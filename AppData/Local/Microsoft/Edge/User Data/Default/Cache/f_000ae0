var oldIEVersions=!1,globalEndPoint=loginGlobals.apiHostName+"/auth",globalEndPointForLogin=loginGlobals.apiHostNameLoginapp+"/account",fPrint="0",resetPasswordErrorArr=[];if("IE6"!=loginGlobals.browser)var client=new ClientJS,fPrint=client.getFingerprint();var queryParams=getUrlVars(),currentUrl=window.location.href;if("IE6"==loginGlobals.browser||"IE7"==loginGlobals.browser||"IE8"==loginGlobals.browser||"IE9"==loginGlobals.browser)oldIEVersions=!0;
var client_id=document.getElementById("glogin_client_id").value,grant_type=document.getElementById("glogin_grant_type").value,loginFormWrapper=document.getElementById("loginFormWrapper"),ForgotPasswordWrapper=document.getElementById("ForgotPasswordWrapper"),CreatePasswordWrapper=document.getElementById("CreatePasswordWrapper"),createPwdHeader=document.getElementById("createPwdHeader"),resetPwdHeader=document.getElementById("resetPwdHeader"),EmailSuccessMsg=document.getElementById("EmailSuccessMsg"),
SuccessWrapper=document.getElementById("successWrapper"),PasswordSuccessWrapper=document.getElementById("passwordSuccessWrapper"),cebLoginSection=document.getElementById("ceb-login-section"),gLoginContainer=document.getElementById("gLoginContainer"),reCaptchaWrapper=document.getElementById("reCaptchaWrapper"),recaptchaError=document.getElementById("recaptchaError"),forgotPasswordLink=document.getElementById("forgotPasswordLink"),goToLogInLink0=document.getElementById("goToLogInLink0"),goToLogInLink1=
document.getElementById("goToLogInLink1"),goToLogInLink2=document.getElementById("goToLogInLink2"),gSignInButton=document.getElementById("gSignInButton"),gRecoverButton=document.getElementById("gRecoverButton"),gCreatePasswordButton=document.getElementById("gCreatePasswordButton"),requestNewUrl=document.getElementById("requestNewUrl"),forgotError=document.getElementById("forgotError"),forgotSuccess=document.getElementById("forgotSuccess"),createError=document.getElementById("createError"),createSuccess=
document.getElementById("createSuccess"),createTextBox1=document.getElementById("createTextBox1"),createTextBox2=document.getElementById("createTextBox2"),password1Required=document.getElementById("password1Required"),password2Required=document.getElementById("password2Required"),createPasswordError1=document.getElementById("createPasswordError1"),createPasswordError2=document.getElementById("createPasswordError2"),createPasswordError3=document.getElementById("createPasswordError3"),usernameRequired=
document.getElementById("usernameRequired"),passwordRequired=document.getElementById("passwordRequired"),loginError=document.getElementById("loginError"),passwordNameRequired=document.getElementById("passwordNameRequired"),remMeChk=document.getElementById("rememberMe"),linkedInError=document.getElementById("linkedInError"),linkedInErrorAsoc=document.getElementById("linkedInErrorAsoc"),linkedInErrorConnect=document.getElementById("linkedInErrorConnect"),LinkedInConnectWrapper=document.getElementById("LinkedInConnectWrapper"),
btnConnectLinkedIn=document.getElementById("btnConnectLinkedIn"),lnkSkipLinkedin=document.getElementById("lnkSkipLinkedin"),regNowLink=document.getElementById("registerNowLink"),recaptchaDisplayTimes=0,targetUrl=queryParams.targetUrl;targetUrl||(targetUrl=queryParams.TARGET);function log(){try{console.log.apply(console,arguments)}catch(a){alert(Array.prototype.join.call(arguments," "))}}
function createXHR(){var a=null;try{a=new XMLHttpRequest}catch(f){for(var b=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.3.0","Msxml2.XMLHTTP"],c=0,e=b.length;c<e;c++)try{a=new ActiveXObject(b[c])}catch(d){a=new ActiveXObject("Microsoft.XMLHTTP")}}return a}
function createCORSRequest(a,b,c,e,f){var d=createXHR();d&&"withCredentials"in d?(d.open(a,b,!0),d.withCredentials=!0,d.setRequestHeader("Content-Type","application/json;charset\x3dUTF-8")):window.ActiveXObject?d.open(a,b):d=null;d&&("withCredentials"in d?(d.onprogress=function(){},d.ontimeout=function(){},d.onload=function(a){c(d,a)},d.onerror=function(a){e(d,a)}):d.onreadystatechange=function(a){4===d.readyState?200===d.status?c(d,a):e(d,a):1!==d.readyState&&2!==d.readyState&&3!==d.readyState&&
e(d,a)},d.send(f))}function getUrlToken(){var a=[];-1<currentUrl.indexOf("reset")?a=currentUrl.split("/reset/"):-1<currentUrl.indexOf("create")&&(a=currentUrl.split("/create/"));if(a.length)return a[1]}
function checkTokenValidity(){var a=getUrlToken();if(a)createCORSRequest("GET",globalEndPoint+"/password/token/validate?linkId\x3d"+a,checkTokenValiditySuccessCallback,checkTokenValidityErrorCallback);else if(-1<currentUrl.indexOf("/reset")||-1<currentUrl.indexOf("/create"))alert("Invalid token! Please try again."),loginFormWrapper.className="hide",ForgotPasswordWrapper.className="",LinkedInConnectWrapper.className="hide",CreatePasswordWrapper.className="hide"}
function checkTokenValiditySuccessCallback(a,b){200==a.status?(createError.className="hide",createSuccess.className="hide"):checkTokenValidityErrorCallback()}
function checkTokenValidityErrorCallback(a,b){createError.className="";createSuccess.className="hide";createPasswordError1.className="hide";createPasswordError2.className="";createPasswordError3.className="hide";document.getElementById("createTextBox2").disabled="disabled";document.getElementById("gCreatePasswordButton").disabled="disabled"}
function userLogin(){gSignInButton.disabled="disabled";showHideLoader("loaderSpinner1",!0);var a=globalEndPointForLogin+"/signin/process",b=document.getElementById("username"),c=document.getElementById("password"),e=document.getElementById("username").value,f=document.getElementById("password").value,d="";"undefined"!=typeof grecaptcha&&(d=grecaptcha.getResponse());usernameRequired.className="hide";passwordRequired.className="hide";b.className="gSignInInput";c.className="gSignInInput";e||(usernameRequired.className=
"required",b.className="gSignInInput inputerror");f||(passwordRequired.className="required",c.className="gSignInInput inputerror");if(!e||!f)return showHideLoader("loaderSpinner1",!1),gSignInButton.disabled="",!1;reCaptchaWrapper&&(reCaptchaWrapper.style.display="none");b=JSON.stringify({password:f,username:e,finger_print:fPrint,recaptcha_value:d});oldIEVersions&&(b='{"password":"'+f+'","finger_print":"'+fPrint+'","username":"'+e+'","recaptcha_value":"'+d+'"}');loginError.className="hide";createCORSRequest("POST",
a,userLoginSuccessCallBack,userLoginErrorCallBack,b)}
function userLoginSuccessCallBack(a,b){loginError.className="hide";gSignInButton.disabled="";a=JSON.parse(a.responseText);b="Sign In";queryParams.TARGET&&0<=queryParams.TARGET.indexOf("newsletter-token")&&(b="Newsletter - Login");if(a.status&&"error"==a.status)return loginError.className="",showRecaptcha(a),showHideLoader("loaderSpinner1",!1),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"signInEvent",category:b,action:"Sign In",label:"Sign In Failed"}),!1;a.content&&"success"==
a.status&&(addCookies(a),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"signInEvent",category:b,action:"Sign In",label:"Sign In Success"}))}
function addCookies(a){var b=globalEndPointForLogin+"/authenticate/process";a=a.content.authToken;var c=document.getElementById("rememberMe").checked;"undefined"===typeof targetUrl&&(targetUrl="");var e=JSON.stringify({authToken:a,targetUrl:targetUrl,rememberMe:c,fingerPrint:fPrint});oldIEVersions&&(e='{"fingerPrint":"'+fPrint+'","authToken":"'+a+'","targetUrl":"'+targetUrl+'","rememberMe":"'+c+'"}');loginError.className="hide";createCORSRequest("POST",b,addCookiesSuccessCallBack,userLoginErrorCallBack,
e)}function addCookiesSuccessCallBack(a,b){loginError.className="hide";gSignInButton.disabled="";a=JSON.parse(a.responseText);if(a.status&&"error"==a.status)return loginError.className="",showHideLoader("loaderSpinner1",!1),!1;"success"==a.status&&a.content.targetUrl&&(window.location.href=a.content.targetUrl)}
function userLoginErrorCallBack(a,b){gSignInButton.disabled="";var c="Sign In";queryParams.TARGET&&0<=queryParams.TARGET.indexOf("newsletter-token")&&(c="Newsletter - Login");b&&4===a.readyState&&a.responseText&&(loginError.className="",a=JSON.parse(a.responseText),oldIEVersions&&"IE9"!==loginGlobals.browser&&showRecaptcha(a));showHideLoader("loaderSpinner1",!1);window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:"signInEvent",category:c,action:"Sign In",label:"Sign In Failed"})}
function enableBtn(){document.getElementById("gSignInButton").disabled=!1}
function showRecaptcha(a){if(a&&a.error&&a.error.needVerification){a=document.getElementsByTagName("head")[0];var b=document.createElement("script");b.src="https://www.recaptcha.net/recaptcha/api.js";b.type="text/javascript";a.appendChild(b);document.getElementById("gSignInButton").disabled=!0;loginError.className="hide";reCaptchaWrapper.style.display="block";recaptchaError.className="hide";a="";"undefined"!==typeof grecaptcha&&(a=grecaptcha.getResponse());if(reCaptchaWrapper){if(0==a.length&&0<recaptchaDisplayTimes)return recaptchaError.className=
"",!1;0<a.length&&"undefined"!==typeof grecaptcha?grecaptcha.reset():loginError.className=""}recaptchaDisplayTimes+=1}}function requestNewPasswordFunc(){var a=globalEndPoint+"/password/token/new",b=queryParams.linkId;createError.className="hide";var c=JSON.stringify({linkId:b,client_id:client_id,grant_type:grant_type});oldIEVersions&&(c="{linkId:"+b+",client_id:"+client_id+",grant_type:"+grant_type+"}");createCORSRequest("POST",a,newPasswordSuccessCallback,newPasswordErrorCallback,c)}
function newPasswordSuccessCallback(a,b){200==a.status&&(CreatePasswordWrapper.className="hide",EmailSuccessMsg.className="",SuccessWrapper.className="hide",PasswordSuccessWrapper.className="")}function newPasswordErrorCallback(a,b){}
function recoverUserName(){gRecoverButton.disabled="disabled";showHideLoader("loaderSpinner2",!0);var a=globalEndPointForLogin+"/recover/password",b=document.getElementById("forgotTextBox").value;passwordNameRequired.className="hide";if(!b)return passwordNameRequired.className="required",showHideLoader("loaderSpinner2",!1),gRecoverButton.disabled="",!1;var c=JSON.stringify({emailorusername:b,fingerPrint:fPrint});oldIEVersions&&(c='{"fingerPrint":"'+fPrint+'","emailorusername":"'+b+'"}');createCORSRequest("POST",
a,recoverUserNameSuccessCallBack,recoverUserNameErrorCallBack,c)}function recoverUserNameSuccessCallBack(a,b){forgotError.className="hide";forgotSuccess.className="hide";a.responseText&&(JSON.parse(a.responseText),200==a.status?(ForgotPasswordWrapper.className="hide",EmailSuccessMsg.className="",SuccessWrapper.className="",PasswordSuccessWrapper.className="hide"):(ForgotPasswordWrapper.className="",forgotSuccess.className="hide"),showHideLoader("loaderSpinner2",!1),gRecoverButton.disabled="")}
function recoverUserNameErrorCallBack(a,b){forgotError.className="";forgotSuccess.className="hide";ForgotPasswordWrapper.className="";EmailSuccessMsg.className="hide";showHideLoader("loaderSpinner2",!1);gRecoverButton.disabled=""}
function resetPassword(){gCreatePasswordButton.disabled="disabled";showHideLoader("loaderSpinner3",!0);var a=globalEndPointForLogin+"/password/reset",b=document.getElementById("createTextBox1").value,c=document.getElementById("createTextBox2").value;password1Required.className="hide";password2Required.className="hide";createSuccess.className="hide";createPasswordError1.className="hide";createPasswordError2.className="hide";createPasswordError3.className="hide";b||(password1Required.className="required");
c||(password2Required.className="required");if(!b||!c)return showHideLoader("loaderSpinner3",!1),gCreatePasswordButton.disabled="",!1;if(b!==c)return createError.className="",createPasswordError1.className="",showHideLoader("loaderSpinner3",!1),gCreatePasswordButton.disabled="",!1;if(resetPasswordErrorArr.length)return document.getElementById("message").className="",showHideLoader("loaderSpinner3",!1),gCreatePasswordButton.disabled="",!1;var c=getUrlToken(),e=JSON.stringify({createNew:b,fingerPrint:fPrint,
linkId:c});oldIEVersions&&(e='{"createNew":"'+b+'","fingerPrint":"'+fPrint+'","linkId":"'+c+'"}');createCORSRequest("POST",a,resetPasswordSuccessCallback,resetPasswordErrorCallback,e)}
function resetPasswordSuccessCallback(a,b){createError.className="hide";createSuccess.className="hide";a.responseText&&(JSON.parse(a.responseText),200==a.status?(createError.className="hide",CreatePasswordWrapper.className="hide",EmailSuccessMsg.className="",SuccessWrapper.className="hide",PasswordSuccessWrapper.className="",-1<currentUrl.indexOf("/create")&&(cebLoginSection.className="hide",gLoginContainer.className="gLoginContainerFullWidth"),document.getElementById("createTextBox1").disabled="disabled",
document.getElementById("createTextBox2").disabled="disabled",document.getElementById("gCreatePasswordButton").disabled="disabled"):(resetPasswordErrorCallback(a,b),EmailSuccessMsg.className="hide"));showHideLoader("loaderSpinner3",!1);gCreatePasswordButton.disabled=""}
function resetPasswordErrorCallback(a,b){(a=JSON.parse(a.responseText))&&a.error&&a.error.reason&&(createPasswordError3.innerHTML=a.error.reason);createError.className="";createPasswordError1.className="hide";createPasswordError2.className="hide";createPasswordError3.className="";createSuccess.className="hide";showHideLoader("loaderSpinner3",!1);gCreatePasswordButton.disabled=""}
function getUrlVars(){for(var a=[],b,c=window.location.href.slice(window.location.href.indexOf("?")+1).split("\x26"),e=0;e<c.length;e++)b=c[e].split("\x3d"),a.push(b[0]),a[b[0]]=b[1];return a}
function showLoginForm(){loginFormWrapper.className="";gSignIn.className="gSignIn";ForgotPasswordWrapper.className="hide";CreatePasswordWrapper.className="hide";EmailSuccessMsg.className="hide";SuccessWrapper.className="";PasswordSuccessWrapper.className="hide";LinkedInConnectWrapper.className="hide";cebLoginSection.className="";gLoginContainer.className=""}
function renderForm(){gSignIn.className="gSignIn";-1<currentUrl.indexOf("/reset")||-1<currentUrl.indexOf("/create")?(loginFormWrapper.className="hide",ForgotPasswordWrapper.className="hide",LinkedInConnectWrapper.className="hide",CreatePasswordWrapper.className="",-1<currentUrl.indexOf("/reset")?(resetPwdHeader.className="",createPwdHeader.className="hide"):-1<currentUrl.indexOf("/create")&&(resetPwdHeader.className="hide",createPwdHeader.className="",cebLoginSection.className="hide"),checkTokenValidity()):
-1<currentUrl.indexOf("/signin/connect")?(loginFormWrapper.className="hide",ForgotPasswordWrapper.className="hide",CreatePasswordWrapper.className="hide",LinkedInConnectWrapper.className=""):-1<currentUrl.indexOf("/recover")?(loginFormWrapper.className="hide",LinkedInConnectWrapper.className="hide",ForgotPasswordWrapper.className="",CreatePasswordWrapper.className="hide"):showLoginForm();updateLegacyChecks()}
function showHideLoader(a,b){b?document.getElementById(a).style.display="inline-block":document.getElementById(a).style.display="none"}function updateLegacyChecks(){if("IE6"==loginGlobals.browser||"IE7"==loginGlobals.browser||"IE8"==loginGlobals.browser)document.getElementById("rememberMe").style.display="inline-block"}
function linkedInConnect(){var a=loginGlobals.domainName+"/home";queryParams.destUrl&&(a=queryParams.destUrl);window.location.href=loginGlobals.domainName+"/auth/linkedin/entry/connect?destUrl\x3d"+a}forgotPasswordLink.onclick=function(){loginFormWrapper.className="hide";ForgotPasswordWrapper.className="";linkedInError.className="hide";linkedInErrorAsoc.className="hide";linkedInErrorConnect.className="hide";CreatePasswordWrapper.className="hide"};
forgotPasswordLink.onkeypress=function(a){13==a.which&&(loginFormWrapper.className="hide",ForgotPasswordWrapper.className="",linkedInError.className="hide",linkedInErrorAsoc.className="hide",linkedInErrorConnect.className="hide",CreatePasswordWrapper.className="hide")};goToLogInLink0.onclick=function(){showLoginForm()};goToLogInLink1.onclick=function(){showLoginForm()};goToLogInLink2.onclick=function(){showLoginForm()};btnConnectLinkedIn.onclick=function(){linkedInConnect()};
lnkSkipLinkedin.onclick=function(){window.location.href=queryParams.destUrl&&""!=queryParams.destUrl?loginGlobals.domainName+"/post-auth/redirect-check?destUrl\x3d"+queryParams.destUrl:"/post-auth/redirect-check"};requestNewUrl&&(requestNewUrl.onclick=function(){});gSignInButton.onmouseup=function(){userLogin()};gSignInButton.onkeypress=function(a){13==a.which&&userLogin()};gRecoverButton.onmouseup=function(){recoverUserName()};gRecoverButton.onkeypress=function(a){13===a.which&&recoverUserName()};
gCreatePasswordButton.onmouseup=function(){resetPassword()};document.getElementById("username").onkeypress=function(a){document.getElementById("loginError").className="hide";13!=(window.event?window.event.keyCode:a.keyCode)||document.getElementById("gSignInButton").disabled||userLogin()};
document.getElementById("password").onkeypress=function(a){document.getElementById("loginError").className="hide";13!=(window.event?window.event.keyCode:a.keyCode)||document.getElementById("gSignInButton").disabled||userLogin()};document.getElementById("forgotTextBox").onkeypress=function(a){document.getElementById("forgotError").className="hide";13==(window.event?window.event.keyCode:a.keyCode)&&(a.preventDefault(),recoverUserName())};
document.getElementById("createTextBox1").onkeydown=function(a){document.getElementById("createError").className="hide";13==(window.event?window.event.keyCode:a.keyCode)&&resetPassword();setTimeout(function(){matchRules()},10)};document.getElementById("createTextBox2").onkeypress=function(a){document.getElementById("createError").className="hide";13==(window.event?window.event.keyCode:a.keyCode)&&resetPassword();setTimeout(function(){matchRules()},10)};
document.getElementById("customChk").onclick=function(){var a=document.getElementById("customChk");remMeChk.checked?(remMeChk.checked="",a.setAttribute("aria-checked",!1)):(remMeChk.checked="checked",a.setAttribute("aria-checked",!0))};document.getElementById("customChk").onkeypress=function(a){13==a.which&&(remMeChk.checked=remMeChk.checked?"":"checked")};var linkedinpopup=document.getElementById("gLinkedinLoginInfo-image");linkedinpopup.onfocus=function(a){linkedinpopup.parentElement.classList.add("hover")};
linkedinpopup.onkeydown=function(a){9===a.which&&linkedinpopup.parentElement.classList.remove("hover")};var letter=document.getElementById("letter"),capital=document.getElementById("capital"),number=document.getElementById("number"),length=document.getElementById("length");createTextBox1.onfocus=function(){document.getElementById("message").className=""};createTextBox1.onblur=function(){};createTextBox2.onfocus=function(){document.getElementById("message").className=""};createTextBox2.onblur=function(){};
function matchRules(){createTextBox1.value.match(/[a-z]/g)?(letter.className="valid",addRemoveEltoArray(resetPasswordErrorArr,"letter-invalid",!1)):(letter.className="invalid",addRemoveEltoArray(resetPasswordErrorArr,"letter-invalid",!0));createTextBox1.value.match(/[A-Z]/g)?(capital.className="valid",addRemoveEltoArray(resetPasswordErrorArr,"capital-invalid",!1)):(capital.className="invalid",addRemoveEltoArray(resetPasswordErrorArr,"capital-invalid",!0));createTextBox1.value.match(/[0-9]/g)?(number.className=
"valid",addRemoveEltoArray(resetPasswordErrorArr,"number-invalid",!1)):(number.className="invalid",addRemoveEltoArray(resetPasswordErrorArr,"number-invalid",!0));8<=createTextBox1.value.length?(length.className="valid",addRemoveEltoArray(resetPasswordErrorArr,"length-invalid",!1)):(length.className="invalid",addRemoveEltoArray(resetPasswordErrorArr,"length-invalid",!0));resetPasswordErrorArr.length?document.getElementById("gCreatePasswordButton").disabled="disabled":document.getElementById("gCreatePasswordButton").disabled=
!1}function addRemoveEltoArray(a,b,c){for(a=0;a<resetPasswordErrorArr.length;a++)resetPasswordErrorArr[a]==b&&resetPasswordErrorArr.splice(resetPasswordErrorArr.indexOf(b),1);c&&resetPasswordErrorArr.push(b)}
function changeCreateAccountURL(){if("conf"===queryParams.type){var a=decodeURIComponent(queryParams.TARGET).split("?"),a=loginGlobals.regNowUrl+"?"+a[1];regNowLink.innerHTML="Create an account for conference registration";regNowLink.setAttribute("href",a)}else"cmt"===queryParams.type&&queryParams.confRegUrl&&(regNowLink.innerHTML="Create an account for conference registration",regNowLink.setAttribute("href",decodeURIComponent(queryParams.confRegUrl)))}
function initApplication(){document.body.className=loginGlobals.browser;var a;a="undefined"===typeof targetUrl?loginGlobals.domainName+"/home":targetUrl;document.getElementById("gLinkedinLoginAnchor").href=loginGlobals.linkedinAnchor+a;renderForm();queryParams.linkedInError&&"gen"==queryParams.errorCode?linkedInError.className="":queryParams.linkedInError&&"asoc"==queryParams.errorCode?linkedInErrorAsoc.className="":queryParams.linkedInError&&"connect"==queryParams.errorCode&&(linkedInErrorConnect.className=
"")}document.onreadystatechange=function(){"complete"===document.readyState&&(initApplication(),queryParams&&queryParams.type&&queryParams.TARGET&&("conf"===queryParams.type||"cmt"===queryParams.type)&&changeCreateAccountURL())};