define("registernamespace",[],function(){!function(){function e(e){for(var n=0,i=arguments.length;i>n;n++)for(var r=this,o=arguments[n].split("."),a=0,s=o.length;s>a;a++){var l=o[a],c=r[l];c||(c=r[l]={}),c.__namespace||(0===a&&"Sys"!==arguments[n]&&(t.Sys.__rootNamespaces[Sys.__rootNamespaces.length]=c),c.__namespace=!0,c.__typeName=o.slice(0,a+1).join("."),c.getName=function(){return this.__typeName}),r=c}return r}var t=window;t.registerNamespace=e,e("Sys"),t.Sys.__rootNamespaces||(t.Sys.__rootNamespaces=[t.Sys])}()}),define("dependancies",["jquery-1.7.2","debug","validateconfig"],function(){!function(e){var t,n=window;n.Debug;t=n.wLive?n.wLive:n.wLive={},t.Core={},t.Controls={};var i=n.$Config;if(i.handlerBaseUrl=i.handlerBaseUrl||"",!i.sd){var r=document.domain,o=r.split(".");i.sd=1===o.length?"":"."+o[o.length-2]+".com"}i.mkt=i.mkt||"na",i.prop=i.prop||"X","undefined"!=typeof window.SymRealWinOpen&&(window.open=window.SymRealWinOpen)}(window.originaljQuery||jQuery)}),define("truncateellipsis",["dependancies","lightstring"],function(){!function(){var e=window,t=e.wLive;t.truncateEllipsis=function(e,t){return t=Math.max(parseInt(t,10)||1e5,4),e?e.length>t?e.substring(0,t-3)+"...":e:""}}()}),define("bsi",["validateconfig","jquery-1.7.2","cookie"],function(){!function(e){function t(){var t=e(document),i=e(T);t.bind("click",o),t.bind("mousedown",r),t.bind("mouseup",s),t.bind("keydown",l),t.bind("keyup",c),t.bind("touchstart",u),t.bind("touchend",d),ce&&ce.suppressBrowserRightClickMenu&&t.bind("contextmenu",a),ge=1,le.ignoreWindowOnload||(le.useJQueryReady?i.ready(function(){setTimeout(b,0)}):i.bind("load",b)),i.bind("unload",C),ce&&ce.capture&&(te=n())}function n(){var e={sw:screen.width,sh:screen.height,c:screen.colorDepth};return document.documentElement.clientWidth&&(e.bw=document.documentElement.clientWidth,e.bh=document.documentElement.clientHeight),e}function i(){O&&O.href!=H&&(O.href=H,e(O).unbind("mouseout",i),O=0)}function r(e){i(),f(e)}function o(e){2==e.which||N||R||(g(e),ae=!N&&!E&&!B,D=1,p(e.target,null,e),ae=1)}function a(t){if(t.shiftKey)return!0;if(t.target){var n=e(t.target),i=n.closest("a");if(i.length>0){var r=i.attr("href");if(r&&"#"!==r)return!0}var o=n.closest("input");if(o.length>0){var a=o.attr("type");if(a&&"text"==a.toLowerCase())return!0}var s=n.closest("textarea");if(s.length>0)return!0}return!1}function s(e){f(e),(1!=D||N)&&(ae=0,p(e.target,3==D,e),ae=1)}function l(e){93==e.keyCode&&(D=3,p(e.target,1,e))}function c(e){var t=e.keyCode;27!=t&&18!=t&&13!=t||i()}function u(e){i(),W=I()}function d(e){I()-W>1e3&&(ae=0,D=3,p(e.target,null,e),ae=1)}function f(e){D=e.which,g(e)}function g(e){E=e.shiftKey,N=e.ctrlKey,B=e.altKey,R=e.metaKey}function p(e,t,n){for(i();e;){if("A"==e.tagName){var r;try{r=e.href}catch(o){}if(r){if(se.AjaxHistory&&se.AjaxHistory.fullAjax&&-1==r.indexOf("#")){var a;T.$PF&&(a=T.$PF.getAppFrameDocument());var s=a?a.location.href:document.location.href,l=s.indexOf("#");l>-1&&(s=s.substr(0,l));var c=s.indexOf("?");c>-1&&(s=s.substr(0,c)),s+="?",0==r.toLowerCase().indexOf(s)&&(r=e.href="#"+r.substr(s.length))}var u=!1;if($U.isLinkABookmark(r)){var d=$U.getUrlFragment(r);d.indexOf("=")>-1&&(u=!0)}else u=!0;u&&A.informNav(r,0,e,t,null,n)}break}e=e.parentNode}}function h(e){for(var t=J;e&&e.getAttribute;){var n=e.getAttribute("lid");if(n){t=n;break}e=e.parentNode}return t}function v(e){var t=J;if(e)for(var n in e){var i=e[n];i=i.encodeUrl?i.encodeUrl():i,t+=G+n+K+i}return t}function m(){ge&&!le.ignoreWindowOnload&&A.informLoaded(1,1)}function _(){var e="U";return 3==D?e="R":1==D?e="L":2==D&&(e="M"),N&&(e+="C"),B&&(e+="A"),E&&(e+="S"),e}function y(e,t){for(var n in t)e[n]=t[n]}function b(e){fe=1,w()}function w(){fe&&0==de.length&&A.informLoaded()}function C(){S(),i();var t=e(document);t.unbind("click",o),t.unbind("mousedown",r),t.unbind("mouseup",s),t.unbind("keydown",l),t.unbind("keyup",c),t.unbind("touchstart",u),t.unbind("touchend",d);var n=e(T);le.ignoreWindowOnload||n.unbind("load",b),n.unbind("unload",C)}function S(){m(),F||k("U")}function I(){return(new Date).getTime()}function $(e){return(e?e:I())-A.headTime}function k(e,t,n,i){if(ce&&ce.enableLD){var r=e+$(n)+(t?t:J),o=M.getCookie(q,1);if(!o&&!i){var a=M.getCookie(X,1);if(a){var s=parseInt(a);if(!isNaN(s)){re-1>s&&(s=re-1),s>oe&&(s=oe),s>=re&&(ie.splice(0,s+1-re),re=s+1);var l=oe-s;if(l>0){for(oe=s;l-- >0;){var c=oe+1-re;if(c<ie.length){var u=ie[c];if(!k(u.logKey,u.logValue,u.logTime,!0)){A.flush();k(u.logKey,u.logValue,u.logTime,!0)}}oe++}o=M.getCookie(q,1)}}}}var d=P.deserialize(o,V,0,1),f=[le.xid,le.rid,se.di,A.headTime].join("_"),g=d[f];if(g?g+="|"+r:g=r,d[f]=g,o=P.serialize(d,V,1),o.length>512)return 0;i||(ie.push({logKey:e,logValue:t,logTime:n?n:I()}),oe++,M.setCookie(X,oe,$Config.sd,0,new Date(2020,1,1),1)),M.setCookie(q,o,$Config.sd,0,new Date(2020,1,1),1)}return 1}function L(e,t){var n=0,i=e.clone(),r=i.length,o=!1,a=T.$WebWatson;if(a)for(;r>n;n++)o=a.wrapCallback(i[n],0,Array.prototype.slice.call(arguments,1))()||o;return o}var T=window,x=(T.Debug,T.$Beacon),M=T.$Cookie,P=T.$Utility,A=window.$BSI;A.headTime||(A.headTime=(new Date).getTime());var D,N,E,B,R,W,j,F,O,H,U=[],Q=[],q="LD",X="LDH",V="&",z="?",G="~",K=":",J="",Y=".com",Z="-int.com",ee={},te={},ne=!0,ie=[],re=-1,oe=-1,ae=1,se=T.$Config,le=se.BSI,ce=le.BICI,ue=se.sd.endsWith(Z)?Z:Y,de=[],fe=le.ignoreWindowOnload,ge=0;A.informLoaded=function(e,t){if(se=T.$Config,le=se.BSI,ce=le.BICI,document.body.id=le.pn?le.pn.encodeHtmlAttribute():J,A.headTime!=j){var n=I();j=A.headTime,ge=0,de=[],t&&A.addLogParams({x:"1"}),L(U,t),k("L",v(te),n),te={},ce&&ce.beaconUrl&&ne&&x.fire(ce.beaconUrl,ee),ee={}}},A.sendToIdss=function(e){return"undefined"!=typeof e&&(ne=e),ne},A.informPVHead=function(){S(),A.headTime=I(),ge=1},A.addBeaconParams=function(e){y(ee,e)},A.addLogParams=function(e){y(te,e)},A.addLoadedCallback=function(e){U.push(e)},A.removeLoadedCallback=function(e){setTimeout(function(){for(var t=0,n=U.length;n>t;t++)if(U[t]==e)return void U.splice(t,1)},0)},A.isLoading=function(){return ge},A.addNavCallback=function(e){Q.push(e)},A.navigateTo=function(e,t,n){if(n&&(A.currentScenarioObject=n),!A.informNav(e,0,0,0,0,0,0,t))try{t?window.open(e,t):window.location.href=e}catch(i){}},A.addLoadEvent=function(e){ge&&de.push(e)},A.eventLoaded=function(e){for(var t=0,n=de.length;n>t;t++)if(de[t]==e){de.splice(t,1),w();break}},A.addHandlerDPs=function(e){return e.biciPrevious=le.biciPrevious,e.mmn=se.mmn,e},A.addLDToHash=function(e){return e.bicild=M.getCookie(q,1),M.deleteCookie(q,$Config.sd),e},A.informNav=function(t,n,r,o,a,s,l,c){ae=ae&&!a&&(!r||"_blank"!=r.getAttribute("target"));var u=I(),d=r?r.href:0;i(),m(),n=n||h(r),t=t||J;var f=$U.doesMatchHost(t,"live"+ue),g=$U.isAbsoluteUrl(t)&&$U.doesMatchHost(t,"g.live"+ue);if(k("N",G+G+n.encodeUrl()+G+_(),u),F=F||ae,ce&&ce.urlHash){var p=ce.urlHash+u;ce.fid&&(p+=V+ce.fid+V+(ae?"1":"0")+(o?"0":"1")),M.setCookie("LN",p,$Config.sd)}var v=L(Q,t,r,o,ae,f,s,l,c);!v&&$B.IE&&$B.V<8&&"function"==typeof ieImgAnchorFix&&r&&ieImgAnchorFix(r);var y=["WLXID=",le.xid,"&RID=",le.rid,"&TID=",A.headTime,"&lid=",n].join(J);if(g){if(r&&ce&&ce.enableGlinkExtra){var b;b=d.indexOf(z)<0?z+z:d.indexOf(z+z)<0&&d.indexOf(V+V)<0?V+V:V,r.href=d+b+y}}else f||ce&&ce.enableGlinkCall&&x.fireAndHold("//g.live"+Y+"/_9uxp9en-us/mike?"+t.encodeUrl()+V+V+y);return r&&d!=r.href&&(O=r,H=d,3==D?$B.Safari||$B.Firefox||e(r).bind("mouseout",i):setTimeout(i,100)),v},A.reportEvent=function(e,t){var n=G+e+v(t);if(!k("E",n)){A.flush();k("E",n)}},A.flush=function(){ie.splice(0,oe-re+1),re=oe,M.setCookie(X,oe,$Config.sd,0,new Date(2020,1,1),1),x.fire(se.handlerBaseUrl+"/Handlers/NoOp.mvc",A.addLDToHash({}))},t(),$Do.register("$BSI.addNavCallback",A.addNavCallback),$Do.register("$BSI")}(window.originaljQuery||jQuery)}),define("css",["validateconfig","jquery-1.7.2"],function(){!function(e){function t(e){var t=i[e];return t||(i[e]=t=new RegExp("\\b"+e+"\\b","ig")),t}var n=window,i={},r=n.$css={has:function(e,n){var i=!1;if(e&&e.className){var r=t(n);r.lastIndex=0;try{i=r.test(e.className)}catch(o){}}return i},remove:function(e,t){r.swap(e,t)},swap:function(e,n,i){i=i||"",r.has(e,n)&&(e.className=e.className.replace(t(n),i).replace(/^\s|\s\s|\s$/g,function(e){return e.substr(1)}))},add:function(e,t){e&&(e.className?r.has(e,t)||(e.className+=" "+t):e.className=t)}}}(window.originaljQuery||jQuery)}),define("sutra",["validateconfig","jquery-1.7.2","debug"],function(){!function(e){function t(e){for(var t=e.split("."),i=n,r=0,o=t.length;o>r;r++)i=i[t[r]];return i}var n=window;n.sutra=function(i,r,o){if(n.$Sutra){var a=e(i);a.attr("sutra")&&o||a.attr("sutra",t(r))}},n.sutra.load=function(t,i){n.$Sutra&&(e(document.body).attr(t,i),e(document.body).removeAttr("sutravisited"))},n.unsutra=function(t){n.$Sutra&&e(t).removeAttr("sutra")}}(window.originaljQuery||jQuery)}),define("setup",["jquery-1.7.2","lightobject","lightstring","debug","validateconfig","dependancies","truncateellipsis","utilityextensions","beacon","lightfunction","lightarray","watson","do","cookie","bsi","css","sutra"],function(){!function(e){function t(){var e=document.title,t=document.location.hash;e!=o&&t&&e.indexOf(t)==e.length-t.length&&(document.title=o),o=document.title}var n=window,i=n.wLive;n.$Version="9.090519.0",n.CompatVersion="9.100709.0",n.$Debug||(n.$Debug={enabled:!1,trace:function(e){}});var r=n.document;n._d=r,n._ce=function(e){return r.createElement(e)},n._ge=function(e){return r.getElementById(e)},n._$ge=function(t){return e(n._ge(t))},n._get=function(e){return r.getElementsByTagName(e)},n._dh=r.head=r.head||n._get("head")[0],i.dh=e("#head")[0]||n._dh;var o;e(document).bind("propertychange",t)}(window.originaljQuery||jQuery)}),define("lightenums",["setup"],function(){!function(){function e(e){return function(){for(var t=arguments.length,n=0;t>n;n+=e)this[arguments[n]]=arguments[n+e-1]}}var t=window;t.jQuery;t.$Flags=e(2),t.$Enum=e(1)}()}),define("settimeout",["lightenums"],function(){!function(e){function t(){var e=r.length;if(e>0){try{r.pop()()}catch(o){var a=n.$WebWatson;a&&a.submitFromException(o)}e>1&&i(t,0)}}var n=window,i=window.setTimeout,r=[];window.smartSetTimeout=function o(e,n,a){function s(){o(e,0,a)}n?i(s,n):(a?r.splice(0,0,e):r.push(e),1==r.length&&i(t,0))}}(window.originaljQuery||jQuery)}),define("helpcontext",["settimeout"],function(){!function(e){var t=window,n=t.$HelpContext={},i=t.$Config;n.attachContextTo=function(e,t,n){t&&e.length>0&&(e[0].href=i.hc.url+"&errorCode="+(t+"").encodeUrl()+(n?"&errorMessage="+n.encodeUrl():""))},$Do.register("$HelpContext")}(window.originaljQuery||jQuery)}),define("lightnetwork",["helpcontext"],function(){!function(e){function t(){function t(e){if(e.indexOf("window.")<0)return!1;for(var t=e.split("."),n=window,i=1;i<t.length;i++)if(n=n[t[i]],void 0===n)return!1;return!0}function c(e,t){function n(){var e=!1;try{var t=o.contentWindow||o.contentDocument.parentWindow;t&&t.fetchXML&&(p.Proxy._registerProxy(t),e=!0)}catch(n){}return e}function i(){var i,r=m[e];if(r.attempts=(r.attempts||0)+1,r.attempts>2&&!r.fail&&!r.ready){if(!n())for(r.fail=!0;i=r.pop();)i.cb&&i.cb({status:5e3},i.c)}else r.ready||n()||c(e,t)}function r(){m[e].ready||m[e].fail||i()}u();var o=document.createElement("iframe");if(o.style.display="none",e.endsWith(f)||e.indexOf(":")>0&&e.substring(0,e.indexOf(":")).endsWith(f)){document.body.insertBefore(o,document.body.firstChild);var s=l.xmlProxyTimeout||3e4;setTimeout(r,s),_[e]=o,o.src=location.protocol+"//"+e+"/xmlProxy.htm?vn="+a+"&domain="+f}else t.cb&&t.cb({status:5e3},t.c)}function u(){if(!y)return void(f=document.domain);if(f=S,f.indexOf(":")>0&&(f=f.substring(0,f.indexOf(":"))),$Config.domain&&!$Config.domain.endsWith("."))document.domain=$Config.domain;else{if(!f.endsWith(".com"))throw new Error("Invalid $Config.domain");var e=f.indexOf(".");if(e>0){document.domain=f;try{for(;e>=0;)f=f.substring(e+1),"com"!=f?(document.domain=f,e=f.indexOf(".")):e=-1}catch(t){}}}f=document.domain,u=function(){}}function d(e,t){return e=p.resolveUrl(e).toLowerCase(),String(e).search(t?w:b)<0?"":RegExp.$1}var f,g,p=this,h=$B.IE,v=[],m={},_={},y=!0;p.requiresDomainLowering=function(e){y=e},p.getCookie=function(e){return r.getCookie(e,1)},p.fetchXML=function(t,n,i,r,o,a,s){function l(e){if(o)for(var t in o)e.setRequestHeader(t,o[t])}function u(e,t){n&&n(e,a)}var f,g,p=d(t);if(i=i||"GET",n=n||function(){},p===S)f=e.ajax({url:t,type:i,data:r,beforeSend:l,complete:u});else{var h=m[p]=m[p]||[],v={url:t,cb:n,v:i,verb:i,postString:r,headers:o,c:a,cbp:s};if(g=_[p]){if(h.ready)return g.contentWindow.fetchXML(v,null,null,n,s),f;if(h.fail)return n&&n({status:5e3},a),f;h.push(v)}else h.push(v),c(p,v)}return f},p.fetchCSS=function(e,t,r,o,a){function l(){var i;clearTimeout(u);var l=!h||$B.IE&&$B.V>=10;if(l&&(c.readyState="complete"),c.onreadystatechange=function(){c&&c.onreadystatechange&&("loaded"===c.readyState||"complete"===c.readyState)&&(t&&t(c),c.onreadystatechange=null)},o&&n.Css_Start&&(i=Css_Start(o,a),c.onload=function(){Css_Load(this,i)},c.onerror=function(){Css_Error(this,i)}),c.href=e,!r){var d=s.dh;d.appendChild(c)}l&&c.onreadystatechange()}var c=r||document.createElement("link"),u=setTimeout(l,9e3);return r||(c.rel="stylesheet",c.type="text/css"),i.fire(e,0,l,l,1),c},p.fetchScript=function(i,r,a,l,c){function u(){if(!m.handled&&("complete"===m.readyState||"loaded"===m.readyState))try{m.handled=!0,e(m).unbind(".fetch"),!a||v[a]||t(a)?r&&r(m):(f&&(f.errorCode=f.errorCode||"ParseFailure"),g.removeChild(m),p.fetchScript(i,r,void 0,l,c))}catch(o){throw o}finally{f&&n.$Static&&n.$Static.logQos(f)}}function d(e){f&&(f.errorCode="DownloadFailure"),u(),a&&e.stopPropagation()}var f,g=s.dh,m=document.createElement("script");return l&&(f={apiId:l,propertyId:c,startTime:(new Date).getTime()}),(!h||$B.IE&&$B.V>=10)&&(m.readyState="loaded"),m.async=!0,m.type="text/javascript",e(m).bind("readystatechange.fetch",u).bind("load.fetch",u).bind("error.fetch",d),o(function(){m.src=i,g.appendChild(m)}),m},p.registerScript=function(e){v[e]=!0},p.Proxy={_registerProxy:function(e){window.NextNetworkRegisterProxy&&window.NextNetworkRegisterProxy(e);var t,n=d(e.location.href,!1),i=_[n],r=m[n],o=e.frameElement;if(r)for(r.ready||(i!=o&&(i=_[n]=o),r.fail=!1,r.ready=!0);t=r.pop();)i.contentWindow.fetchXML(t,null,null,t.cb,t.cbp)}},$Config.applyAppDomain&&u();var b=/^(?:http|https|ftp):\/\/([-.a-z0-9]+(?::[0-9]+)?)(?:\/|$)/i,w=/^((?:http|https|ftp):\/\/[-.a-z0-9]+(?::[0-9]+)?)(?:\/|$)/i,C=/\/[^\/]*\/\.\./;p.extractHost=d,p.resolveUrl=function(e,t){function i(e){for(;C.test(e);)e=e.replace(C,"");return e}if(e=e?e.toString():"",t)t=t.substring(0,t.toString().lastIndexOf("/")+1);else if(g)t=g;else{var r=n._ge("base");if(r&&""!=r.href)t=g=r.href;else{var o=location.protocol+"//"+location.host+location.pathname;t=g=o.substring(0,o.lastIndexOf("file:"===location.protocol?"\\":"/")+1)}}return e.startsWith("/")&&(e=location.protocol+"//"+location.host+e),-1===e.indexOf("//")&&(e=t+e),i(e)};var S=d(document.location.href);p.currentDomain=S}var n=window,i=n.$Beacon,r=n.$Cookie,o=(n.Debug,n.smartSetTimeout),a=n.$Version,s=n.wLive,l=n.$Network=new t;n.$LightNetwork=l}(window.originaljQuery||jQuery)}),define("scenarioqos",["lightnetwork"],function(){!function(e){function t(e,t){p.deferPosting?(p.deferredPosts=p.deferredPosts||[],p.deferredPosts.push({url:e,postString:t})):u.fetchXML(e,null,"POST",t)}function n(){if(p.enabled)if(p.ids&&p.guids&&p.startTimes&&p.propertyIds){for(var e=p.ids.split(m),t=p.guids.split(m),n=p.startTimes.split(m),r=p.propertyIds.split(m),a=e.length,s=g.xid,l=[],d=[],v=[],_=[],y=a-1;y>=0;y--){var b=e[y],C=n[y],S=r[y],I=t[y];y>=a-w&&(l.push(b),d.push(I),v.push(C),_.push(S));var $=o(b,I);if(0!=$.apiArray.length){var k={sc:b,ppd:S,api:$.apiArray.join(m),dur:$.durationArray.join(m),err:$.errArray.join(m),errtp:$.errTypeArray.join(m),st:$.stackTraceArray.join(m),dep:$.dependentArray.join(m),stt:$.startTimeArray.join(m),ac:$.actionIdArray.join(m),pac:$.parentActionIdArray.join(m),xp:s},L=$Utility.serialize(k);u.fetchXML(f.handlerBaseUrl+p.handlerPath,null,"POST",L)}}var T=l.join(m)+"&"+v.join(m)+"&"+_.join(m)+"&"+d.join(m);$BSI.currentScenarioObject&&(T=$BSI.currentScenarioObject.id+"&"+$BSI.currentScenarioObject.startTime+"&"+$BSI.currentScenarioObject.propertyId+"&"+$BSI.currentScenarioObject.guid);var x=new Date;x.setSeconds(x.getSeconds()+5),c.setCookie(h,T.encodeUrl(),f.sd,null,x,1),setTimeout(i,500)}else c.deleteCookie(h,f.sd)}function i(){c&&c.deleteCookie(h,f.sd)}function r(e,t){for(var n=C.d,i=n.length,r=0;i>r;r++){var o=n[r];o.scenarioId===e&&o.transactionGuid===t&&(n.splice(r,1),r--,i--)}}function o(e,t){for(var n=[],i=[],r=[],o=[],a=[],s=[],l=[],c=[],u=[],d=C.d,f=d.length,g=0;f>g;g++){var p=d[g];if(p.scenarioId===e&&p.transactionGuid===t){var h=p.api||v,m=p.clientStart,w=p.error||_,S=p.errorType||(p.error?y:b),I=p.stackTrace||v,$=p.actionId||0,k=p.parentActionId||0;n.push(h),i.push(p.clientLength),r.push(w),o.push(S),a.push(I),s.push(p.dependent||v),l.push(m),c.push($),u.push(k)}}return{apiArray:n,durationArray:i,errArray:r,errTypeArray:o,stackTraceArray:a,dependentArray:s,startTimeArray:l,actionIdArray:c,parentActionIdArray:u}}function a(e,t){return e=e?e+m+t.toString():t.toString()}function s(e,t,n,i){var r={id:e,propertyId:n,guid:t,startTime:i};return r}var l=window,c=(l.$Beacon,l.$Cookie),u=l.$Network,d=l.$ScenarioQoS={},f=$Config,g=f.BSI||{},p=g.Scenario||{},h="Sce",v="na",m="#",_="ok",y="f",b="s",w=3;l.wLive.ScenarioQoSStats={d:[],add:function(e,t,n,i){if(e&&t&&n&&p.ids&&p.guids){var r=p.ids.split(m),o=p.guids.split(m),a=r.length;e.scenarioId=n.id,e.transactionGuid=n.guid;for(var s=0;a>s;s++)if(r[s]===e.scenarioId&&o[s]===e.transactionGuid){var c=l.wLive.ScenarioQoSStats;void 0===i&&(i=(new Date).valueOf()-t),e.clientStart=t,e.clientLength=i,c.d.push(e);break}}}};var C=l.wLive.ScenarioQoSStats;d.addScenarioToHttpHeader=function(e,t){t&&(e.scenarioid=t.id||v,e.transactionguid=t.guid||v,e.scenariopropertyid=t.propertyId||v)},d.getScenarioObject=function(e){if(p.enabled&&p.ids&&p.guids&&p.startTimes&&p.propertyIds)for(var t=p.ids.split(m),n=p.guids.split(m),i=p.startTimes.split(m),r=p.propertyIds.split(m),o=t.length,a=0;o>a;a++)if(n[a]===e)return s(t[a],n[a],r[a],i[a]);return null},d.startScenario=function(e,t){var n=(new Date).valueOf(),i=$Utility.generateGuid();return p.ids=a(p.ids,e),p.propertyIds=a(p.propertyIds,t),p.startTimes=a(p.startTimes,n),p.guids=a(p.guids,i),s(e,i,t,n)},d.stopScenario=function(e,n,i,a,s){if(p.enabled&&p.ids&&p.guids&&p.startTimes&&p.propertyIds)for(var l=n!==!1,c=e.id,u=g.xid,d=e.guid,h=p.ids.split(m),w=p.guids.split(m),C=p.startTimes.split(m),S=p.propertyIds.split(m),I=h.length,$=0;I>$;$++)if(h[$]===c&&w[$]===d){var k=o(c,d),L=(new Date).valueOf()-C[$],T=l?_:i||v,x=l?b:a||y;k.apiArray.push(c),k.durationArray.push(L),k.errArray.push(T),k.errTypeArray.push(x),k.stackTraceArray.push(s||v),k.dependentArray.push(v),k.startTimeArray.push(C[$]),k.actionIdArray.push(0),k.parentActionIdArray.push(0);var M={sc:c,ppd:S[$],api:k.apiArray.join(m),dur:k.durationArray.join(m),err:k.errArray.join(m),errtp:k.errTypeArray.join(m),st:k.stackTraceArray.join(m),dep:k.dependentArray.join(m),stt:k.startTimeArray.join(m),ac:k.actionIdArray.join(m),pac:k.parentActionIdArray.join(m),ctx:d,xp:u},P=$Utility.serialize(M);t(f.handlerBaseUrl+p.handlerPath,P),h.splice($,1),w.splice($,1),C.splice($,1),S.splice($,1),p.ids=h.join(m),p.guids=w.join(m),p.startTimes=C.join(m),p.propertyIds=S.join(m),r(c,d);break}},d.stopAllScenarios=function(e,t,n,i){if(p.enabled&&p.ids&&p.guids)for(var r=p.ids.split(m),o=p.guids.split(m),a=r.length,s=t!==!1,l=0;a>l;l++)e!==v&&e!==r[l]||d.stopScenario({id:r[l],guid:o[l]},s,n,null,i)},d.postDeferredScenarios=function(){if(p.deferPosting=!1,p.deferredPosts){for(var e=0;e<p.deferredPosts.length;e++){var n=p.deferredPosts[e];t(n.url,n.postString)}delete p.deferredPosts}},$BSI.addNavCallback(n)}(window.originaljQuery||jQuery)}),define("pagestats",["scenarioqos"],function(){!function(e){var t=window;t.wLive.PageStats={d:[],o:$BSI.headTime,add:function(n,i){var r=t.wLive.PageStats;i=i||r.o,n=n||{url:"Missing page stats.",tasks:[],executionTimeMs:0,schedulerTimeMs:0};var o=new Date;n.clientStart=i,n.clientLength=o.getTime()-i,n.clientTime=o,r.d.push(n),e(r).trigger("go")}}}(window.originaljQuery||jQuery)}),define("baseutil",["validateconfig","jquery-1.7.2","do","lightstring"],function(){!function(e){var t=window;t.$f={cancelEvent:function(e){return e=e||t.event,e.stopPropagation?(e.preventDefault(),e.stopPropagation()):e.returnValue=!1,!1},getSelectedText:function(){if(document.selection)return document.selection.createRange();var e;try{e=t.getSelection().rangeCount>0?t.getSelection().getRangeAt(0):t.document.createRange()}catch(n){e=t.document.createRange()}return e},createIframe:function(){var e=document.createElement("IFRAME");return e.frameBorder="no",e.src="javascript:''",e.scrolling="no",e},px:function(e){return e+"px"},updateTitle:function(e){try{top.document.title=top.document.title.replace(/.*?( PLT: [0-9]+ms)?$/i,e+"$1")}catch(t){}},replaceQs:function(e,t,n){var i="([?|&])"+t+"=([^&]+)",r=new RegExp(i,"i"),o=e,a="",s=e.indexOf("#");return s>-1&&(o=e.substr(0,s),a=e.substr(s)),o.replace(r,"$1"+t+"="+n)+a},doc:document,docEl:document.documentElement,getDocType:function(){var e,t=$f.doc,n=t.doctype,i=t.all;return n?e=n.publicId:i&&i.length&&(e=i[0].nodeValue),e||""},createLoading:function(t,n,i,r,o,a,s){var l,c=t;"object"==typeof t&&(c=t.returnMarkup,n=t.type,i=t.width,r=t.height,o=t.size,a=t.color,s=t.text,l=t.useTransparentFallback),n=n||$f.loadingType.spinning,i=i||"20px",r=r||i,o=o||"3px",a=a&&a.toLowerCase()||"#666";var u,d="c_spinningDots",f=$Config.imgsBase+"common/";n==$f.loadingType.flying?(d="c_flyingDots",u="flyingdots.gif"):(u="spinner_",u+="#fff"==a?"white_":"grey_","60px"==i?u+="120":"30px"==i?u+="60":(u+="40",l&&"#fff"!=a&&(u+="_transparent")),u+=".gif");var g=f+u,p=document.createElement("div");e(p).css({width:i,height:r,"font-size":o}),p.className=d+" c_loadingDots c_dotsPlaying";var h='<div class="c_loadingFallback"><img src="'+g+'" alt="" width="'+i+'" height="'+r+'" /></div>';h+='<div class="c_loadingTracks">';for(var v=5;v>0;v--)h+='<div class="c_loadingTrack c_loadingTrack'+v+'"><div class="c_loadingDot" style="background-color:'+a+";width:"+o+";height:"+o+'"></div></div>';h+="</div>",p.innerHTML=h;var m=e("<div></div>").append(p);if(n==$f.loadingType.flying&&m.css({width:i}),s&&m.append('<span class="c_loadingText">'+s.encodeHtml()+"</span>"),c){var _=e("<span></span>").append(m),y=_.html();return _.remove(),y}return m[0]},loadingType:{spinning:0,flying:1},hideLoading:function(e){e&&(e.hide(),e.removeClass("c_dotsPlaying"))},showLoading:function(e){e&&(e.show(),e.addClass("c_dotsPlaying"))}},$Do.register("$f")}(window.originaljQuery||jQuery)}),define("domutils",["validateconfig","jquery-1.7.2","lightstring","baseutil","css"],function(){!function(e){function t(){c.bind(d,i),c.bind(f,n)}function n(){clearTimeout(s),c.unbind(f,n),c.unbind(d,i)}function i(){clearTimeout(s),s=setTimeout(r,100)}function r(){o=a=null}var o,a,s,l=window,c=e(l),u=l.$f,d="resize",f="unload";u.dockIt=function(e,t,n,i,r,o,a,s,l,c){var d=0;r=r||!1,n="undefined"==typeof n?0:n,i=i||{x:0,y:0},s=s||{},"object"!=typeof i&&(d=i,i={x:0,y:0}),s.top=s.top||0,s.bottom=s.bottom||0,s.left=s.left||0,s.right=s.right||0;var f=e.offsetParent,g=f==document.body||f==u.docEl||l,p=u.getLocation(e,r);c=c||u.getLocation(t,r,g);var h,v,m=i.x*($B.rtl?-1:1),_={x:p.bodyX+m,y:p.bodyY+i.y,width:p.width,height:p.height,targetLoc:c,spaceY:0};if(!a){var y=u.clientHeight(),b=u.clientWidth(),w=-1!=c.addScrollTop?u.scrollTop():0,C=u.scrollLeft(),S=p.width+m,I=p.height+i.y,$=y+w-c.bottom-s.bottom,k=c.top-w-s.top,L=b+C-c.right-s.right,T=c.left-C-s.left,x=$>I,M=k>I,P=L>S,A=T>S;!x&&M?(2>n?(n+=2,v=1):4!=n&&6!=n||(n+=1,v=1),_.spaceY=k):!M&&x?(n>=2&&4>n?(n-=2,v=1):5!=n&&7!=n||(n-=1,v=1),_.spaceY=$):2>n||4==n||6==n?_.spaceY=$:_.spaceY=k,!P&&A?$B.rtl?n>=4&&6>n?(n+=2,h=1):1!=n&&3!=n||(n-=1,h=1):n>5?(n-=2,h=1):0!=n&&2!=n||(n+=1,h=1):!A&&P&&($B.rtl?n>5?(n-=2,h=1):0!=n&&2!=n||(n+=1,h=1):n>=4&&6>n?(n+=2,h=1):1!=n&&3!=n||(n-=1,h=1))}var D=n%2;return o?(_.x=i.x,_.y=i.y+c.bottom):n>=0&&(4>n?(_.x+=D?$B.rtl?c.left:c.right-p.width:$B.rtl?c.right-p.width:c.left,_.y+=2>n?c.bottom+d:c.top-p.height-d):($B.rtl&&(6>n?n+=2:n-=2),_.x+=6>n?c.left-p.width-d:c.right+d,_.y+=D?c.bottom-p.height:c.top)),!$B.Mobile||M||x||(_.y=u.scrollTop()),h&&(_.x+=-2*i.x),v&&(_.y+=-2*i.y),e.style.left=_.x+"px",e.style.top=_.y+"px",_},u.getLocation=function(e,t,n){for(var i=!1,r=u.getStyle,o="offsetTop",a="offsetLeft",s="position",l={x:e[a],y:e[o],top:0,right:0,bottom:0,left:0,bodyX:0,bodyY:0,width:e.offsetWidth,height:e.offsetHeight},c=e;c=c.offsetParent;){if(i="relative"==r(c,s),2!=t&&(l.bodyX-=c[a],l.bodyY-=c[o]),i){var d=u.toInt(r(c,"padding-left")),f=u.toInt(r(c,"padding-top"));l.x=1==t?l.x:d,l.y=1==t?l.y:f}l.x+=c[a],l.y+=c[o]}e=e.parentNode;for(var g=0,p=0;e&&e!=document.body;){var h=r(e,s);"relative"!=h?("fixed"==h&&n&&(g=1),n||!p&&"absolute"!=h?l.y-=u.toInt(e.scrollTop):"fixed"==h&&(g=-1),e=e.parentNode):(p=1,e=e.parentNode)}return 1==g&&(l.y+=u.toInt(u.scrollTop())),l.left=l.x,l.top=l.y,l.right=l.x+l.width,l.bottom=l.y+l.height,l.addScrollTop=g,l},u.toInt=function(e){return e=parseInt(e),isNaN(e)?0:e},u.locCompare=function(e,t){return e.bodyX!=t.bodyX||e.bodyY!=t.bodyY||e.top!=t.top||e.left!=t.left||e.bottom!=t.bottom||e.right!=t.right?1:0},u.getStyle=function(e,t){var n="";if(u.doc.defaultView&&u.doc.defaultView.getComputedStyle&&e.nodeType){var i=u.doc.defaultView.getComputedStyle(e,"");n=i?i.getPropertyValue(t):""}else if(e.currentStyle){if(t.indexOf("-")>=0){var r=t.split("-");r[1]=r[1].substr(0,1).toUpperCase()+r[1].substr(1),t=r.join("")}n=e.currentStyle[t]}return n},u.isChildOf=function(e,t,n){try{for(n||(n=window.document);t&&t!==e&&t!=n;)t=t.parentNode;return t===e}catch(i){return!1}},u.pn=function(e,t){for(var n=$css.has(e,t),i=n?e:null;!i&&(e=e.parentNode)&&"undefined"!=typeof e;)$css.has(e,t)&&(i=e);return i},u.docHeight=function(e){if(e||!o){var t=u.doc.documentElement.clientHeight,n=u.doc.body.clientHeight,i=void 0!=n?n:window.innerHeight+window.scrollMaxY;o=Math.max(i,t)}return o},u.docWidth=function(){if(!a){var e=u.doc.body.clientWidth;a=void 0!=e?e:document.width}return a},u.scrollTop=function(){var e=u.toInt(u.docEl.scrollTop),t=u.toInt(window.scrollY);return Math.max(e,t)},u.scrollLeft=function(){var e=u.toInt(u.docEl.scrollLeft),t=u.toInt(window.scrollX);return Math.max(e,t)},u.clientHeight=function(){return u.docEl.clientHeight-($B.IE?16:0)},u.clientWidth=function(){return u.docEl.clientWidth-($B.IE?16:0)},t()}(window.originaljQuery||jQuery)}),define("wlivecss",["validateconfig","jquery-1.7.2","css","debug"],function(){!function(e){var t=window,n=(t.Debug,t.$css);n.getCN=function(e,t,i){var r=[];if(i&&i.getElementsByTagName)for(var o=i.getElementsByTagName(t),a=0;a<o.length;a++)n.has(o[a],e)&&(r[r.length]=o[a]);return r},n.addHideBorder=function(t,n){n=n||this,e(n).addClass("c_nobdr")},n.removeHideBorder=function(t,n){n=n||this,e(n).removeClass("c_nobdr")},n.addPressedState=function(t,n){n=n||this,e(n).addClass("t_prs")},n.removePressedState=function(t,n){n=n||this,e(n).removeClass("t_prs")};t.$edh={e:function(e,t){var n=t||"inline";if("span"==e.nodeName.toLowerCase()&&-1!=e.className.indexOf("c_ld")){var i=e.lastChild;i&&(e.parentNode.insertBefore(i,e),i.style.display=n,e.parentNode.removeChild(e))}},d:function(e){if("a"==e.nodeName.toLowerCase()&&("span"!=e.parentNode.nodeName.toLowerCase()||-1==e.parentNode.className.indexOf("c_ld"))){var t=document.createElement("span");t.innerHTML=e.innerHTML,t.className=e.className?e.className+" c_ld":"c_ld";var n=e.getAttribute("title");n&&t.setAttribute("title",n),e.style.display="none",e.parentNode.insertBefore(t,e),t.appendChild(e)}}};$B&&$B.SF_iPhone&&e(function(){e(".sc").length>0&&e(t.document).bind("touchmove",function(t){0===e(t.target).closest(".sc").length&&t.preventDefault()})})}(window.originaljQuery||jQuery)}),define("wliveimagestrip",["validateconfig","jquery-1.7.2","lightstring","do","wlivecss","utilityextensions"],function(){!function(e){function t(e,t,n,i,r,o){o?(e[C][h]=n+y,e[C][v]=t+y,l()||(e[C][m]=p(n)+i+y,e[C][_]=p(t)+r+y)):e[C][b]=t+y+" "+n+y}function n(e,t,n,i,r,o,a,s,l){s=s||""==s?s:a;var c='<span class="{0}"><img class="{1}" src="{2}" onload="this.onload=null;$Do.when(\'$IS.Init\',0,this);" style="width:{3};height:{4};background-position:{5};background-image:{6};" alt="{7}" title="{8}"/></span>',u=c.format(k,"is_img",r+"is/invis.gif",n+y,i+y,"-"+e+y+" -"+t+y,"url('"+o+"')",a?a.encodeHtmlAttribute():"",s?s.encodeHtmlAttribute():"");if(l)return u;var d=document.createElement("span");return d.innerHTML=u,d.firstChild}function i(e,t,n,i){e=r(e.split(",")),t=r(t.split(",")),n=n?n.trim():n;var o=$B.rtl&&e[1]?e[1]:e[0];return f.Create(t[0],t[1],t[2],t[3],n,n+o,t[4],null,i)}function r(e){for(var t=0;t<e.length;t++){var n=e[t];n&&(e[t]=n.trim())}return e}function o(e){if(e&&e.getElementsByTagName)for(var t,n=e.getElementsByTagName("span"),i=n.length,r=-1;i>r&&!t;r++){var o=-1==r?e:n[r],a=g(o,k),s=g(o,L);if(a||s)return o}return null}function a(e){var t=o(e);if(e.tagName!=$&&t&&t.getElementsByTagName&&(e=t.getElementsByTagName($)[0]),e&&g(e,"is_img")){var n=e[C],i=e[S];if(i){i.dir=$B.ltr?"ltr":"rtl";var r=l();if(T||!r){var a='"style="width:{2}px;height:{3}px;"',s='<span class="',d='<img src="{6}"',f="</span>",h=[s,"is_o",a,">",s,"is_i",a,">",d,'class="is_hcimg {11}"alt="{1}"{10}style="left:-{4}px;top:-{5}px;width:{7};height:{8};{9}"/>',f,f,d,'class="is_p',a,"/>"].join(""),v=i[S];if(v)for(var m=v.getElementsByTagName("span"),_=0;_<m.length;_++)m[_][C].zoom=1;var y=n[w],b=y.indexOf("http");-1===b&&(b=y.indexOf('url("')+5),y=y.substr(b,y.length-b-(y.endsWith('")')?2:1));var x,M,P=u(e),A=c(e),D=p(A.x),N=p(A.y);r||(x=D+P.w,M=N+P.h);var E=e.title,B=h.format(e.src.encodeHtmlAttribute(),e.alt.encodeHtmlAttribute(),P.w,P.h,D,N,(r?y:e.src).encodeHtmlAttribute(),r?I:x+"px",r?I:M+"px",r?"":"filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+y.encodeHtmlAttribute()+"',sizingMethod='crop');",E||""==E?'title="'+E.encodeHtmlAttribute()+'"':"",e.className.replace("is_img",""));$css.swap(i,k,L),i.innerHTML=B}}}}function s(e){for(var t=e.getElementsByTagName($),n=0,i=t.length;i>n;n++){var r=t[n],o=r.className;"is_img"!=o&&"is_hcimg"!=o&&"is_p"!=o||(r.onload=null,r[C][w]="")}}function l(){return!$B.IE_M6||$B.IEM_M8}function c(t){var n=e(t),i=t[C],r=(i[b]||n.css(b)||"").split(" "),o=parseInt(i[b+"X"]||n.css(b+"X")||r[0]),a=parseInt(i[b+"Y"]||n.css(b+"Y")||r[1]);return{x:o,y:a}}function u(t){var n=e(t),i=t[C],r=t.currentStyle||window.getComputedStyle&&window.getComputedStyle(t,0)||{},o=parseInt(i[_]||r[_]||n.css(_)),a=parseInt(i[m]||r[m])||n.css(m);return{w:o,h:a}}var d=window;d.Debug;d.$IS={};var f=d.$IS,g=$css.has,p=Math.abs,h="top",v="left",m="height",_="width",y="px",b="backgroundPosition",w="backgroundImage",C="style",S="parentNode",I="auto",$="IMG",k="is_c",L="is_hc",T=d.$Utility.isHighContrast();f.setClass=function(n,i){if(n){var r=o(n);if(r){var a=r.getElementsByTagName($)[0],s=g(r,L);if(a.className=(s?"is_hcimg ":"is_img ")+i,s){var d=a[S],f=(e(a),c(a));l()||(a[C][_]="",a[C][m]="");var p=u(d);t(a,f.x,f.y,p.h,p.w,s)}}}},f.toggle=function(n,i,r){if(n&&0!=i){var a=o(n);if(a){var s=a.getElementsByTagName($)[0],l=g(a,k),d=s;l||(d=s[S]),r&&(s.alt=r,null!=s.title&&(s.title=r));var f=e(s),p=f.css(v)||s[C][v],m=f.css(h)||s[C][h];if(l){var _=c(s);p=_.x,m=_.y}p=parseInt(p),m=parseInt(m);var y=u(d),b=m-y.h*i;t(s,p,b,y.h,y.w,!l)}}},f.Create=n,f.CreateFromConfig=i,f.Init=a,f.disposeAll=s,$Do.register("$IS.Init",a),$Do.register("$IS.disposeAll",s)}(window.originaljQuery||jQuery)}),define("wlivemenu",["validateconfig","jquery-1.7.2","css","debug","baseutil","domutils","sutra"],function(){!function(e){function t(n,p,w,S,I,$,k,L,T,x,M,P,A,D,N,E,B,R,W,j,F,O,H,U,Q){
function q(){$e=!0,n.binding=nn,i(o,c,nn.dispose),i(n,st,_e),i(p,st,_e),i(p,ct,we),i(p,at,fe),i(C,pt,pe),i(C,at,pe),i(C,"touchend",ge),i(C,lt,he),i(C,mt,pe),$B.Firefox&&i(C,_t,pe),Re=p.tagName==g,nn.isHoverMenu=("mouseover"===k||"mousemove"===k||"focus"===k)&&!Re,x||(x=250,He=1e3),M=M||200,nn.isHoverMenu?(i(p,gt,nn.menuOnmouseout),i(p,l,nn.menuOnmouseover),i(n,gt,nn.menuOnmouseout),i(n,l,nn.menuOnmouseover),i(p,ut,nn.menuOnmouseover)):k&&!B&&(!Q||"keyup"!==k&&"mousedown"!==k&&"click"!==k?o.setTimeout(function(){i(p,k,nn.toggleState)},0):o.setTimeout(function(){e(p).bind("keyup"+h,function(e){13===e.which&&nn.toggleState(e)}).bind("mousedown"+h,function(e){nn.toggleState(e)})},0)),!b||$B.IE&&$B.V<7||(Ae=C.createElement("div"),Ae[Ge]="c_m_sbox",Se(Ae,50),(tn||$B.S60_Symbian)&&o.$Config&&$Config.ImagesBaseUrl&&(Ae[u].background="url("+$Config.ImagesBaseUrl+"/imgs/black_50.png)"),C.body.insertBefore(Ae,C.body.firstChild),$B.SF_iPhone&&i(Ae,at,pe)),Mt[Ke]=Ye,X(),G(),i(o,ht,z)}function X(){var t,a=n.getElementsByTagName("*");Oe=0,Ue=null,Me=[];for(var s=null,l=0,c=a.length;c>l;l++){var d=a[l],p=e(d),h="SPAN"==d.tagName&&$css.has(d,"c-NavLinkDisabled"),v="SPAN"==d.tagName&&$css.has(d,"c-InformationRow");if("UL"===d.tagName&&$css.has(d,"c_m")&&"absolute"===p.css("position")&&(s&&$f.isChildOf(s,d,n)||(s=d)),("A"==d.tagName||d.tagName==g||h||v)&&(!s||!$f.isChildOf(s,d,n))){var m=Ie(d);if(m==n||m&&m.binding&&m.binding.isOpen()){v||Me.push(d);var _,y=d[f];try{_="LI"==y.tagName||"DIV"==y.tagName}catch(w){}_&&(b||(r(d,dt,V),r(d,ft,V),r(d,vt,$f.cancelEvent),i(d,dt,V),i(d,ft,V),i(d,vt,$f.cancelEvent),!$B.RE_WebKit||d.getAttribute("tabindex")||h||v||d.setAttribute("tabindex",1),d[u].zoom="0",($css.has(d,"uxfa_ml")||$css.has(d,"c_ml"))&&(Oe=1),d.setAttribute("role","menuitem"),h&&d.setAttribute("aria-disabled","true"),o.$Sutra&&$Sutra.Shared&&$Sutra.Shared.MenuItemLink&&!y.getAttribute("sutra")&&sutra(y,"$Sutra.Shared.MenuItemLink")),"none"===y.style.display||$css.has(y,"NoDisplay")||(Ue=Ue||y,Qe=y),!Ne&&$css.has(d,bt)&&(je=d),Be&&Be.id&&Be.id==d.id&&(t=1,be(Me.length)))}}}Nt=Me.length,Nt>0?(xt&&Ee&&ae(),xt=0,Te=Me[0],xe=Me[Nt-1],i(Te,ct,we),i(xe,ct,we),Ue?(kt.removeClass(It),e(Ue).addClass("c_m_firstchild"),e(Qe).addClass("c_m_lastchild")):kt.addClass(It)):(Y(),xt=1),!t&&je&&be(-1)}function V(e){if(!Re){e=e||event;var t=e.target||e.srcElement;"A"==t.nodeName&&("focusin"==e.type?setTimeout(function(){$css.add(t,yt)},0):setTimeout(function(){$css.remove(t,yt)},0))}}function z(e){if(Tt=1,!$css.has(n,"noresize")){var t=$f.docWidth();jt!=t&&(jt=t,se(e,1))}}function G(){if(!xt){Mt[Je]=Ze;var t=Ie(p);t&&t!=p?Fe=t.binding:void 0!=T&&(w=T),D&&(Ne&&(n[u][d]="auto",$css.remove(n,"c_m_maxw")),n.offsetWidth>D&&(n[u][d]=D+s,$css.add(n,"c_m_maxw")));var r=3,a=r,l=$B.rtl,c=1;if(!Pe&&b&&K(),De||b||(De=$f.createIframe(),At=De[u],At[nt]=$f.getStyle(n,nt),n[f].insertBefore(De,n),i(De,ut,Ce)),Qt=N||p,$css.has(p,"c_m_usep")&&(Qt=p[f]),tn||(o.$WLXIM&&o.$WLXIM.isSidebarOpened()&&(Xt.right=_),!S&&e(n).parents(".c_m").length>0&&(S={y:-y,x:0}),Ut=$f.dockIt(n,Qt,w,S,I,L,P,Xt,Vt,zt),Ft=Ut.targetLoc),b){var g=$f.docWidth(),h=$f.docHeight(),v=Et,m=o.screen[d],C=0;if(Ae&&(Ae[u][it]=h?h+s:"100%",Ae[u][d]=g?g+s:"100%"),(!g||g>m&&!$B.SF_iPhone)&&(g=m),l=0,g>Et&&!tn){var $=$f.getLocation(p,I,Ht),k=$B.rtl?$.right:$.left;k>g/2&&(C=g-Et,l=1),c=0}else v=g,a=0;Ut.x=C,n[u][rt]=Ut.x+s,Mt[d]=Pt[d]=v-2+s,tn&&(n[u][ot]=Wt+s),J()}var x=function(){Ut.height+=b&&c?2*r:0,Pt[Ke]=Ye,b||(Pt[d]=Ut.width+s),Pt[it]=Ut.height+s,Pt[rt]=Ut.x+(l?-a:a)+s,Pt[ot]=Ut.y+(b&&c?-r:r)+s,Pt[Ke]=et};!b||tn||$B.S60_Symbian||setTimeout(x,0),De&&(At[Ke]=Ye,At[d]=Ut.width+s,At[it]=Ut.height+s,At[rt]=Ut.x+s,At[ot]=Ut.y+s),Tt=0,Ee?Ne&&nn.show(0,1):Y()}}function K(){for(Pe=n;Pe[Ge]!=wt&&Pe[ze];)Pe=Pe[ze];Pe&&Pe[Ge]==wt||(Pe=C.createElement("div"),Pt=Pe[u],Pt[nt]=$f.getStyle(n,nt),Pt[ot]=0,Pt[rt]=0,Pe[Ge]=wt,n[f].appendChild(Pe)),Pt=Pe[u],Pt[Je]=tt,Pt.backgroundColor="#000",Se(Pe,20)}function J(){for(var e,t=0,i=[],r=n.getElementsByTagName("UL"),o=0;o<r.length;o++)e=r[o],$css.has(e,"c_gll")&&(i.push(e),de(e),e.offsetTop>e.previousSibling.offsetTop&&(t=1));if(t)for(var a=0;a<i.length;a++)ue(i[a])}function Y(){$e&&(Zt&&!Jt?($t.stop(),Yt=!1,Jt=!0,clearTimeout(Kt),Kt=setTimeout(function(){ee(),oe(),$t.animate({height:0},en,"linear",ne)},10)):(Z(),b||oe()),Ae&&(Ae[u][Je]=tt),be(-1),setTimeout(function(){e(Me).removeClass(yt)},100),kt.attr("aria-expanded","false"),kt.removeAttr("aria-owns"))}function Z(){Ee||(te(),At[Ke]=Pt[Ke]=Mt[Ke]=Ye,At[Je]=Pt[Je]=Mt[Je]=tt,Tt&&(Mt[ot]=Pt[ot]=0,Mt[rt]=Pt[rt]=0)),e(wLive.Controls).trigger("aftermenudismiss",{menu:nn,parent:Fe})}function ee(){$t.css({overflow:"hidden"}),$t.removeClass("pause")}function te(){$t.css({overflow:"",height:"auto"}),$t.addClass("pause")}function ne(){Jt=!1,Z()}function ie(){Yt=!1,te()}function re(e){e=e||$t.height();var t=Ut.spaceY;if(t>0&&e>=t&&!Oe&&($t.css("max-height",t+s),$t.addClass(St),!$t.hasClass("c_mfw")&&(!$B.IE||$B.V<=8))){var n=$t.width()+16;$t.css("min-width",n+s)}}function oe(){$t.hasClass(St)&&($t.css({"max-height":"","min-width":""}),$t.removeClass(St))}function ae(){if(e(wLive.Controls).trigger("beforemenushow",{menu:nn,parent:Fe}),Ae&&(Ae[u][Je]=Ze),At[Je]=Pt[Je]=Mt[Je]=Ze,Zt&&!Yt){clearTimeout(Kt),$t.stop(),Yt=!0,Jt=!1,te();var t=$t.height();ee(),$t.css({height:0}),$t.animate({height:t},en,"linear",ie),re(t)}else b||re();At[Ke]=Pt[Ke]=Mt[Ke]=et,je==Te&&be(0),$B.IE_M7&&($t.find(".c_ms").each(function(){var t=e(this);t.css("width",t.parents("ul").width()-v+s)}),$t.find(".c_ml").each(function(){var t=e(this);t.css("width",t.parents("ul").width()-m+s)})),kt.attr("aria-expanded","true"),n.id&&kt.attr("aria-owns",n.id)}function se(n,i){(i||le()&&Ee)&&(rn=(new Date).getTime(),Ee=0,nn.closeEventSource(n&&n.srcElement),xt||Y(),t.current=Fe,Fe&&(Fe.isHoverMenu&&(Fe.tempHoverCloseDelay=Rt),$B.IE&&ke&&p.focus(),setTimeout(function(){Fe.update(1)},0)),qt.removeClass(Ct),ce(),$B.IE&&$B.V<=8&&($t.find(".c_ms").each(function(){e(this).css("width","")}),$t.find(".c_ml").each(function(){e(this).css("width","")})))}function le(){var e=500;return(new Date).getTime()-rn>e}function ce(){for(var e=0,t=Bt.length;t>e;e++)try{Bt[e]()}catch(n){a.submitFromException(n,Ve,99)}}function ue(e){e[u][Je]=tt,e.previousSibling[Ge]=""}function de(e){e[u][Je]=Ze,e.previousSibling[Ge]="c_gl"}function fe(e){if(!Re&&nn.isHoverMenu){var t=p.getAttribute("href");if((!t||t.endsWith("#"))&&Ee&&!$)try{Te.focus()}catch(n){}}}function ge(e){Xe?(pe(e),Ee||(Xe=!1)):Xe=!0}function pe(e){e=e||event;var t=e.target||e.srcElement;Ee&&t&&!$f.isChildOf(n,t)&&p!=t&&!$f.isChildOf(p,t)&&nn.hide(e)}function he(e){e=e||event;var t=27,i=e.target||e.srcElement,r=e.keyCode||e.which;9==r&&(Le=!1),Ee&&(r==t?(We=i.value,nn.hide(e)):ke||Lt!=p&&(9!=r||$f.isChildOf(n,Lt))||!Te||$||-1!==Dt||ye(1)),Re&&i==p&&(Ee||i.value==We||ve()?Ee&&ve()&&nn.hide(e):nn.show())}function ve(){return!(E||!Re||""!=p.value)}function me(){return!Re||!e(p).is(":focus")}function _e(n){n=n||event;var i=n.target||n.srcElement,r=n.keyCode||n.which,o=0;if(Le=9==r,ke=n.shiftKey,Lt=i,Ee&&(Re||U)){if(i==p||U)if(40==r)ye(1),o=1;else if(38==r)ye(-1),o=1;else if(13==r){if(""!=i.value||W)if(Be){try{Be.focus()}catch(a){}e(nn).trigger("EnterEvent",Be)}else if(je){try{je.focus()}catch(a){}e(je).click(),e(nn).trigger("EnterEvent",je)}}else Le&&!ke?(e(nn).trigger("TabEvent",n),be(-1),t.closeCurrent(n),Re||(o=1)):27==r&&Ee?o=1:Le&&ke&&(be(-1),t.closeCurrent(n),Re||(o=1));else Le&&(ke?ke&&be(Dt-1):be(Lt!=xe?Dt+1:-1));if(o)return $f.cancelEvent(n)}return!0}function ye(t){if(Nt){for(var n=Dt+t;Nt>n&&n>=0&&!e(Me[n]).is(":visible");)n+=t;n>=Nt?n=Nt-1:0>n&&(n=0),be(n)}}function be(e){Nt&&(Be&&$css.remove(Be,yt),Dt=e,Dt>-1?(Be=Me[Dt],$css.remove(je,bt),Be&&($css.add(Be,yt),setTimeout(function(){try{Be.focus()}catch(e){}},0))):(Be=Ve,$css.add(je,bt)))}function we(e){Le&&ke&&Lt==p?(nn.hide(e),nn.menuOnmouseout()):!xt&&(!ke&&Le&&Lt==xe||ke&&Le&&Lt==Te)?(nn.hide(e),nn.menuOnmouseout()):Ee||Lt!=p||nn.menuOnmouseout()}function Ce(e){var t=Le&&!ke?Te:p;try{t.focus()}catch(n){}}function Se(e,t){var n="opacity";$B.IE&&$B.V<=9&&(n="filter"),e[u][n]="filter"==n?"alpha(opacity="+t+")":.01*t}function Ie(e){for(var t=e.binding&&e.binding.toggleState?e:null;!t&&(e=e.parentNode)&&"undefined"!=typeof e;)e.binding&&e.binding.toggleState&&(t=e);return t}var $e,ke,Le,Te,xe,Me,Pe,Ae,De,Ne,Ee,Be,Re,We,je,Fe,Oe,He,Ue,Qe,qe,Xe,Ve=null,ze="nextSibling",Ge="className",Ke="visibility",Je="display",Ye="hidden",Ze="block",et="visible",tt="none",nt="position",it="height",rt="left",ot="top",at="click",st="keydown",lt="keyup",ct="blur",ut="focus",dt="focusin",ft="focusout",gt="mouseout",pt="mousedown",ht="resize",vt="dragstart",mt="mousewheel",_t="DOMMouseScroll",yt="t_seli",bt="t_hov",wt="c_shad",Ct="c_mf",St="c_m_scroll",It="c_emptymenu",$t=e(n),kt=e(p),Lt=Ve,Tt=1,xt=1,Mt=n[u],Pt={display:0,visibility:0},At=Pt,Dt=0,Nt=0,Et=320,Bt=[],Rt=1e3,Wt=($f.docEl,0),jt=$f.docWidth(),Ft={},Ot=n.offsetParent,Ht=Ot==document.body||Ot==$f.docEl,Ut={},Qt=p,qt=R?e(R):kt.parent(),Xt=j||{},Vt=F,zt=H,Gt="";"undefined"==typeof U&&(U=!0);var Kt,Jt,Yt,Zt=!(b||$B.IE&&$B.V<=9||$B.SF_iPhone||O),en=150,tn=$B.BlackBerry,nn=this;void 0===w&&(w=Ve),nn.isHoverMenu=0,nn.tempHoverCloseDelay=0,nn.parentEl=Ve,nn.keepHoverMenuOpen=0,nn.dispose=function(){if(r(n,st,_e),r(p,st,_e),r(p,ct,we),r(C,pt,pe),r(C,at,pe),r(C,lt,he),r(o,ht,z),r(C,mt,pe),$B.Firefox&&r(C,_t,pe),nn.isHoverMenu?(r(p,gt,nn.menuOnmouseout),r(p,l,nn.menuOnmouseover),r(n,gt,nn.menuOnmouseout),r(n,l,nn.menuOnmouseover),r(p,ut,nn.menuOnmouseover)):k&&(!Q||"keyup"!==k&&"mousedown"!==k&&"click"!==k?r(p,k,nn.toggleState):(e(p).unbind("keyup"+h),e(p).unbind("mousedown"+h))),Ae&&(r(Ae,at,pe),e(Ae).remove()),De&&(r(De,ut,Ce),e(De).remove()),!b)for(var i=0;i<Me.length;i++)r(Me[i],dt,V),r(Me[i],ft,V);r(Te,ct,we),r(xe,ct,we),n.binding=p.menu=Ve,t.current==nn&&(t.current=null),Zt&&te(),r(o,c,nn.dispose),Bt=[]},nn.update=function(t){Ne=!0,r(Te,ct,we),r(xe,ct,we);for(var n=0;n<Me.length;n++){var i=Me[n];r(i,dt,V),r(i,ft,V),r(i,vt,$f.cancelEvent),$css.remove(i,yt),e(i).parent().removeClass("c_m_firstchild"),e(i).parent().removeClass("c_m_lastchild")}if(X(),!t){var o=Zt;Zt=!1,G(),Zt=o}Ne=!1,Fe&&setTimeout(function(){Fe.update(t)},0)},nn.deactivate=function(){clearTimeout(Kt),te(),$e=!1},nn.activate=function(){$e=!0},nn.convertToSubMenu=function(e){nn.setLoc(e)},nn.convertFromSubMenu=function(e){nn.setLoc(e)},nn.updateBinding=function(e){e=e||{},Xt=e.edgeOffsets||Xt},nn.hide=se,nn.show=function(e,n){var i;if(Ue||$t.hasClass("c_msem")){if(!n){var r=$f.scrollTop();Wt==r&&Ft&&!$f.locCompare(Ft,$f.getLocation(Qt,I,Ht))||(Wt=r,Tt=1),Ee||!Tt&&!A||(G(),i=1)}if(Fe||t.current==nn||t.closeAll(),Ee=1,xt||ae(),Fe&&Fe.update(1),!Ne&&!e&&!nn.isHoverMenu)try{p.focus()}catch(o){}qt.addClass(Ct),ce(),t.current=nn}};var rn=0;nn.toggleState=function(e){e&&e.originalEvent&&nn.triggerEventType(e.originalEvent.type),le()&&(rn=(new Date).getTime(),Ee||ve()?me()&&se(e,1):nn.show())},nn.isOpen=function(){return Ee},nn.addStateListener=function(e){Bt.push(e)},nn.removeStateListener=function(e){for(var t=0,n=Bt.length;n>t;t++)if(Bt[t]==e)return void Bt.splice(t,1)},nn.setOffset=function(e){S=e,Tt=1},nn.invalidatePosition=function(){Tt=1},nn.setLoc=function(e){w=e,Tt=1},nn.menuOnmouseover=function(){if(p.unhover&&(clearTimeout(p.unhover),p.unhover=Ve),!Ee&&!p.hover){var e=x;t.tempOpenDelayTimer&&He&&(e=1),p.hover=setTimeout(function(){Ee||nn.show()},e)}},t.tempOpenDelayTimer=0,nn.menuOnmouseout=function(){p.hover&&(clearTimeout(p.hover),p.hover=Ve),!Ee||p.unhover||nn.keepHoverMenuOpen||(nn.tempHoverCloseDelay=nn.tempHoverCloseDelay||M,p.unhover=setTimeout(function(){se()},nn.tempHoverCloseDelay),nn.tempHoverCloseDelay=0,He&&(clearTimeout(t.tempOpenDelayTimer),t.tempOpenDelayTimer=setTimeout(function(){t.tempOpenDelayTimer=null},He)))},nn.getSelectedEl=function(){return Be?Be:je},nn.triggerEventType=function(e){return"undefined"!=typeof e&&(Gt=e),Gt},nn.closeEventSource=function(e){return"undefined"!=typeof e&&(qe=e),qe},q()}function n(){($B.Chrome||$B.Safari)&&(r(C,l,t.emptyFunction),r(o,c,n))}function i(t,n,i){t&&e(t).bind(n,i)}function r(t,n,i){t&&e(t).unbind(n,i)}var o=window,a=o.$WebWatson,s="px",l="mouseover",c="unload",u="style",d="width",f="parentNode",g="INPUT",p="h/c7.png,h/c7_rtl.png,",h=".wliveMenu",v=30,m=35,_=300,y=10,b=$B.Mobile,w=$B.IE_M6,C=$f.doc,S='<ul class="uxfa_m c_m t_hovl"></ul>',I='<li class="c_mcp"></li>',$='<a class="uxfa_ml c_ml"><span class="c_mlu"></span></a>',k='<span class="c_chev"></span>',L="click";t.closeCurrent=function(e){t.current&&t.current.hide(e,1)},t.current=null,t.closeAll=function(){for(;t.current;)t.closeCurrent()},t.chevronTypes={SmallLeftDark:["154,17,6,8","&#9668;"],SmallLeftLight:["154,33,6,8","&#9668;"],SmallRightDark:["192,17,6,8","&#9658;"],SmallRightLight:["192,33,6,8","&#9658;"],SmallUpDark:["67,17,8,8","&#9650;"],SmallUpLight:["67,33,8,8","&#9650;"],SmallDownDark:["114,17,8,8","&#9660;"],SmallDownLight:["114,33,8,8","&#9660;"],SmallPlusLeftDark:["145,17,8,9","&#9668;"],SmallPlusLeftLight:["145,33,8,9","&#9668;"],SmallPlusRightDark:["184,17,8,9","&#9658;"],SmallPlusRightLight:["184,33,8,9","&#9658;"],SmallPlusUpDark:["57,17,9,8","&#9650;"],SmallPlusUpLight:["57,33,9,8","&#9650;"],SmallPlusDownDark:["104,17,9,8","&#9660;"],SmallPlusDownLight:["104,33,9,8","&#9660;"],MediumLeftDark:["135,17,9,11","&#9668;"],MediumLeftLight:["135,33,9,11","&#9668;"],MediumRightDark:["175,17,9,11","&#9658;"],MediumRightLight:["175,33,9,11","&#9658;"],MediumUpDark:["45,17,11,9","&#9650;"],MediumUpLight:["45,33,11,9","&#9650;"],MediumDownDark:["92,17,11,9","&#9660;"],MediumDownLight:["92,33,11,9","&#9660;"],LargeLeftDark:["123,17,11,15","&#9668;"],LargeLeftLight:["123,33,11,15","&#9668;"],LargeRightDark:["162,17,11,15","&#9658;"],LargeRightLight:["162,33,11,15","&#9658;"],LargeUpDark:["29,17,15,11","&#9650;"],LargeUpLight:["29,33,15,11","&#9650;"],LargeDownDark:["76,17,15,11","&#9660;"],LargeDownLight:["76,33,15,11","&#9660;"],EllipsisDark:["232,1,16,4",""],EllipsisLight:["232,17,16,4",""],SmallCheckDark:["1,1,12,12",""],SmallCheckMedium:["1,17,12,11",""],SmallCheckDisabled:["1,33,12,11",""],SmallCheckLight:["1,49,12,11",""],LargeCheckDark:["14,1,14,12",""],LargeCheckMedium:["14,17,14,12",""],LargeCheckDisabled:["14,33,14,12",""],LargeCheckLight:["14,49,14,12",""],LargeDotDark:["249,1,8,8",""],LargeDotLight:["249,17,8,8",""],SquareDark:["276,1,8,8",""],SquareLight:["276,17,8,8",""]},t.createChevron=function(e,t){if(w||b)return e[1];var n=e[0]+",",i=$IS.CreateFromConfig(p,n,$Config.imgsBase,t);return i},t.emptyFunction=function(){},function(){($B.Chrome||$B.Safari)&&(i(o,c,n),i(C,l,t.emptyFunction))}(),t.bind=function(e,n,i,r,o,a,s,l,c,u,d,f,g,p){var h={offset:i,alt:void 0==r?0:r,nofocus:o,posabs:a,defaultLoc:s,hoverDelay:l,hoverCloseDelay:c,forceDispose:u,parentEl:d,menuEl:f,eventType:g,sourceEl:p};return t.create(e,n,h)},t.create=function(e,n,i){function r(){var i=!1,r=0,o=1,a=2,s=r;return S.binding?(s=o,S.binding.updateBinding({edgeOffsets:D})):S&&$&&(I=I||e.type,S.binding=new t(S,$,n,c,p,h,I,v,m,_,y,k,L,T,x,M,b,P,A,D,N,E,B,R,W),s=o,"mouseover"!=I&&"focus"!=I||$.tagName==g||(s=a),$.menu=S.binding,i=!0),S.binding.triggerEventType(e.type),s==o?S.binding.toggleState():s==a&&S.binding.menuOnmouseover(),i}e=e||event,i=i||{};var o=e.target||e.srcElement,a=["c_ml","c_mcp","c_m"],l=o,c=i.offset,p=void 0==i.alt?1:i.alt,h=i.nofocus,v=i.posabs,m=i.defaultLoc,_=i.hoverDelay,y=i.hoverCloseDelay,b=i.forceDispose,C=i.parentEl,S=i.menuEl,I=i.eventType,$=i.sourceEl,k=i.skipEdgeDetection,L=i.noDockCache,T=i.maxWidth,x=i.dockEl,M=i.showOnEmptyInput,P=i.pressedStateEl,A=i.allowClickOnEmptyInput,D=i.edgeOffsets||{},N=i.sourceRelativeToBody,E=i.disableAnimations,B=i.targetLoc,R=i.arrowKeysNavigate,W=i.bindEnterKey;if($=$||$f.pn(l,a[0]),$&&("undefined"==typeof $.menu||null===$.menu||b||i.edgeOffsets)&&(C=C||$f.pn(l,a[1])||$[f])){w&&"LI"==C.tagName&&$css.has(C[f],"c_m")&&(C[u][d]=C.offsetWidth+s);for(var j=C.childNodes,F=j.length;F--&&!S;)S=$css.has(j[F],a[2])?j[F]:null;return b&&S&&S.binding&&S.binding.dispose(),r()}return!1},t.createSubmenuContainer=function(){return e(S)},t.createSubmenuA=function(t,n){var i=e($);return e("span",i).append(t),n&&n.length>0&&i.append(n),i},t.createSubmenuChevron=function(n){var i=n||t.chevronTypes.SmallRightDark,r=e(k);return r.append(t.createChevron(i)),r},t.createSubmenuItem=function(t,n,i){var r=e(I);return t&&t.length>0&&r.append(t),n&&n.length>0&&r.append(n),i&&r.bind(L,i),r},o.$menu=t}(window.originaljQuery||jQuery)}),define("csiperf",["validateconfig","jquery-1.7.2","cookie","dependancies","bsi"],function(){!function(e){function t(e,t,s){var l=t[z]||"NA*NA*",c=o(t),u=i(c.time),d=me(pe("ANON",1)).A||J,f=F.$WebWatson,g=f&&f.foundException()?1:0,p=a(_e.latency),h=a(ye.thr),v=l+":"+n(ae.prop,20)+"*"+n(e)+"."+we,m={ANON:d,NL:p,TP:h,CL:ae.mmn||J,MA:ae.mkt,B:ae.build,TR:v,PLT:c.time,IR:!be||c.nostart||s?0:1,EX:g};return r(m,c.lapseReport,u),S(m),R(m,re),m}function n(e,t){t=t||q;var n=e.length;return e=n>t?e.substr(n-t):e,e.encodeUrl()}function i(e){return ne>0&&!s(e)&&e>0?{tprs:Math.round(ne/1024*8/(e/1e3)),size:Math.round(ne/1024*10)/10}:K}function r(e,t,n){if(ye.plt&&(e.PLM=ye.plt),ye.com&&(e.PCT=ye.com),ye.req&&(e.PCD=ye.req),n&&(e.SZ=n.size,e.TPRS=n.tprs),t)for(var i=0;i<t.length;i++){var r=t[i];e[r.key]=r.val}}function o(e){Z._ttg&&Z.lapse.push({s:"ttg",t:Z._ttg});var t=fe.timeStamp;(s(t)||0==t)&&(t=$());var n=e.ST||0;0==n&&window.performance&&window.performance.timing&&(n=window.performance.timing.navigationStart,be=1),Z.ttxDeferred.resolve(n),Z.TTxDeferred.resolve(n),Z.addCsd("st",n);var i=t-n,r=d(n,t,Z.lapse);return{nostart:0==n,time:i>0?i:0,lapseReport:r}}function a(e){var t=parseInt(e);return isNaN(t)?0:t}function s(e){return"undefined"==typeof e||!e||J==e}function l(){var e={latency:_e.latency,throughput:_e.throughput};M(e),_e=e}function c(){p(),l(),H.deleteCookie(Q,ae.sd)}function u(){try{var e=window.location;return e.hostname+e.pathname}catch(t){return document.domain}}function d(e,t,n){var i=[];if(n&&n.length>1&&t-e>0){n[0]={s:"Start",t:e};for(var r=0;r<n.length-1;r++){var o=(n[r],n[r+1]);if(!s(o)){var a=o.t-e;if(a>0){i[i.length]={key:"L."+o.s,val:a}}}}}return i}function f(e,n,i,r){e=e||u(),ne=a(i.p),(s(ne)||0>=ne)&&(ne=s(n)?0:a(n));var o=_e[G],c=_e[z];c&&o&&(i[z]="0*"+c+"*",i[G]=o,be=1,l()),Z.GT1Param=t(e,i,r),Z.payloadHash=j(Z.GT1Param)}function g(e){e[z]=J,e[G]=J,T(e)}function p(){ne=0,fe.timeStamp=0,ie={},re={},Z.csd={},Z.lapse=[{}],Z._ttg=0,Z.payloadLength=0,le.rt=0}function h(e,t){if(!ce.enabled)return void c();!$BSI.sendToIdss()&&Z.payloadHash.ANON&&Z.fireCsiPerfBeacon(),s(e)&&(e=u());var n=L();n[z]=e+"."+we,n[G]=$(),n.p=s(t)?0:a(t),T(n)}function v(){var e=window.performance;if(e){var t=e.timing;if(t){var n=t.navigationStart;m("jsPlt",n,t.loadEventEnd),m("1Pnt",n,t.msFirstPaint),m("domIn",n,t.domInteractive),m("rdir",t.redirectStart,t.redirectEnd),m("dns",t.domainLookupStart,t.domainLookupEnd),m("tcp",t.connectStart,t.connectEnd),m("req",t.requestStart,t.responseEnd),m("resp",t.responseStart,t.responseEnd)}var i=e.navigation;i&&($CSIPerf.addNtd("navType",i.type),$CSIPerf.addNtd("redirectCount",i.redirectCount))}}function m(e,t,n){t&&n&&n>t&&$CSIPerf.addNtd(e,n-t)}function _(e){if(!ce.enabled)return void c();var t=L();v(),f(se.pn,Z.payloadLength,t,e)}function y(){if(ce.enabled){var e=Z.GT1Param,t=I(e)||!e.IR?"nostart":ve(e);ue.enabled&&$BSI.addBeaconParams({csiperf:t})}}function b(){if(ce.enabled){var e=Z.GT1Param;ge.enabled&&le.enabled&&e&&Z.fireOnLoad&&(delete e.ANON,delete e.MA,delete e.CL,e.RT=le.rt,e.bicild="",O.fire(ae.handlerBaseUrl+"/Handlers/PerfMonitor.mvc",$BSI.addHandlerDPs(e),le.render?C:0,0,1))}Z.GT1Param=null}function w(e,t){if(e){var n=e.indexOf(" PLT: ");n>-1&&(e=e.substr(0,n)),e+=t}else e=t;return e}function C(){var e=pe("SBSPLT");if(e){var t=" PLT: "+parseInt(e)+"ms";try{window.top.document.title=w(window.top.document.title,t)}catch(n){document.title=w(document.title,t)}}}function S(e){I(Z.csd)||B(e,Z.csd),I(ie)||B(e,ie)}function I(e){if(e)for(var t in e)return!1;return!0}function $(){return(new Date).getTime()}function k(e){if(ae=$Config,se=ae.BSI||{},le=se.SBSPLT||{},ce=se.CSIPerf||{},ue=ce.IDSS||{},de=ce.Trace||{},fe=ce.page||{},ge=ce.WLXFD||{},_csiPerfConfigOmniture=ce.Omniture||{},!ce.disableTimers){if(!ce.skipStopTimer&&(_(e),y(),b(),ce.enabled&&!ce.pltDetectionDisabled)){var t=L(),n=ae.prop;t.l!=n&&(t.l=n,T(t),setTimeout(x,Y))}g(L()),$BSI.sendToIdss()&&p(),ee=(new Date).getTime()}}function L(){var e=pe(Q,1);return e==te?oe:(te=e,oe=me(e))}function T(e){oe=e,te=ve(e),he(Q,te,ae.sd,K,K,1)}function x(){function e(){var e=(new Date).getTime()-t;"1"==pe("pltmode",1)&&(_e.latency=e,M(_e),H.deleteCookie("pltmode",ae.sd,"/"))}var t=(new Date).getTime(),n={bicild:"",v:ae.build};O.fire(ae.handlerBaseUrl+"/Handlers/Plt.mvc",n,e,e,1)}function M(e){var t=new Date;he(X,ve(e),ae.sd,K,new Date(t.getUTCFullYear()+1,t.getUTCMonth(),t.getUTCDay()),1)}function P(e,t,i,r,o){if(!i&&o&&!ce.disableTimers){var a=s(se.pn)?u():se.pn;Z.setPerformanceId(we||A(t));var l=n(ae.prop,20)+"*"+n(a);h(l,Z.payloadLength),be=1}}function A(e){for(var t=J;e&&e.getAttribute;){var n=e.getAttribute("pid");if(n){t=n;break}e=e.parentNode}return t}function D(e){ce.enabled&&de.enabled&&le.enabled&&O.fire(ae.handlerBaseUrl+"/Handlers/Bandwidth.mvc",$BSI.addLDToHash($BSI.addHandlerDPs(e)))}function N(e,t,n){var i,r=this,o=(new Date).getTime(),a={};r.lapse=[],r.addCsd=function(e,t){E(a,e,t)},r.addLapse=function(e){r.lapse.push({s:e,t:(new Date).getTime()})},r.endTrace=function(){if(!i&&(i=1,ce.enabled&&de.enabled&&le.enabled)){var s=(new Date).getTime(),l={tc:e,tcs:t,ti:s-o,th:o-$BSI.headTime,to:ee?o-ee:-1};W(l,r.lapse,o,s),B(l,a);var c=ae.handlerBaseUrl+"/Handlers/Trace.mvc";n&&(l.wli="csi",c=se.BICI.beaconUrl),O.fire(c,$BSI.addLDToHash($BSI.addHandlerDPs(l)))}}}function E(e,t,n){e[t]=n}function B(e,t){for(var n in t)e["C."+n]=t[n]}function R(e,t){for(var n in t)e["N."+n]=t[n]}function W(e,t,n,i){for(var r=t.length,o=0;r>o;o++){var a=t[o];e["L."+a.s]=a.t-n}}function j(e){var t={};for(var n in e)0!==n.indexOf("C.")&&0!==n.indexOf("N.")&&"ANON"!==n&&"CL"!==n&&"B"!==n&&"TR"!==n&&"IR"!==n&&"PLT"!==n||(t[n]=e[n]);if(t["C.TR"]&&0==t["C.TR"].indexOf("0-")&&t.TR){var i=t.TR.substring(0,t.TR.indexOf(":"));t["C.TR"]=t["C.TR"].replace("0-",i+".")}return e["L.ttg"]&&(t[Z.timingPrefix+"g"]=e["L.ttg"]),t}var F=window,O=F.$Beacon,H=F.$Cookie,U=F.$Utility,Q=(F.Debug,"BP"),q=40,X="wlidperf",V="wl_preperf",z="FR",G="ST",K=null,J="",Y=5e3,Z=$CSIPerf;Z.GT1Param=null,Z.payloadLength=0,Z.TTxDeferred=e.Deferred(),Z.ttxDeferred=e.Deferred(),Z.payloadHash={},Z.fireOnLoad=!0,Z.timingPrefix="T.";var ee,te,ne=0,ie={},re={},oe={},ae=F.$Config,se=ae.BSI||{},le=se.SBSPLT||{},ce=se.CSIPerf||{},ue=ce.IDSS||{},de=ce.Trace||{},fe=ce.page||{},ge=ce.WLXFD||{},pe=H.getCookie,he=H.setCookie,ve=U.serialize,me=U.deserialize,_e=me(pe(X,1)),ye=me(pe(V,1)),be=se.ir,we=J;Z.lapseTimer=function(e,t){var n;n=t&&t>0?t:a($()),Z.lapse.push({s:e,t:n})},Z.setUploadTP=function(e,t,n,i){var r={dir:"up",sz:e,ti:t,d:i,pn:se.pn,ext:n};D(r)},Z.setDownloadTP=function(e){var t={dir:"down",pn:se.pn,rate:e};D(t)},Z.startTrace=function(e,t,n){return new N(e,t,n)},Z.endTrace=function(e,t){},Z.setPerformanceId=function(e){we=n(e,20)},Z.addCsd=function(e,t){E(ie,e,t)},Z.csdContains=function(e){return ie[e]},Z.addNtd=function(e,t){E(re,e,t)},Z.clearTTxDeferred=function(){Z.TTxDeferred=null},Z.fireCsiPerfBeacon=function(){O.fire(se.BICI.beaconUrl,Z.payloadHash),p(),Z.ttxDeferred=e.Deferred(),Z.payloadHash={}},Z.addTTxEvent=function(e,t){Z.ttxDeferred&&Z.ttxDeferred.done(function(n){Z.payloadHash[Z.timingPrefix+e]=t-n})},Z.dontFireOnLoad=function(){Z.fireOnLoad=!1,$BSI.sendToIdss(!1)},$BSI.addLoadedCallback(k),$BSI.addNavCallback(P)}(window.originaljQuery||jQuery)}),define("date",[],function(){!function(){Date.now||(Date.now=function(){return(new Date).getTime()})}()}),define("reporter",["jquery-1.7.2","pagestats"],function(){!function(){function e(e){var t=e.error;t&&(e.errorCode=e.errorCode||m.getErrorCode(t),e.stackTrace=e.stackTrace||t.stack,e.resultDetails=e.resultDetails||{},t.name&&(e.resultDetails.name=t.name),t.message&&(e.resultDetails.message=t.message))}function t(){r&&(o.clearTimeout(r),r=null);var e=o.$Config,t=e.ContactCache;if(t&&t.logEnabled){var n=JSON.stringify({actions:m.actionHistory});m.actionHistory=[],$Network.fetchXML(e.handlerBaseUrl+"/Handlers/PeopleApi/log.mvc?canary="+t.canary.encodeURIComponent(),function(){},"POST",n)}}function n(e){var n=window.$Config.ContactCache;if(n){var a=n.logVerbose;a&&i(e),m.actionHistory.length>=n.actionHistoryMaxLength?(n&&n.logVerbose&&t(),m.actionHistory.shift()):n.logVerbose&&n.logEnabled&&!r&&(r=o.setTimeout(t,5e3)),m.actionHistory.push(e)}}function i(e){if(o[d]&&o[d][p]){var t=[e.eventType];if(e.message&&t.push(e.message),e.resultCode&&t.push(e.resultCode),e.stackTrace&&t.push(e.stackTrace),e.resultDetails)for(var n in e.resultDetails)t.push(n+":"+e.resultDetails[n]);o[d][p]("People: "+t.join(" - "))}}var r,o=window,a=o.wLive,s=a.People={},l=o.$ScenarioQoS,c=a.ScenarioQoSStats,u="WL_People_Cache",d="console",f="error",g="errorType",p="log",h="undefined",v={MissingTicket:{type:"c"},PassportAuthFail:{type:"c"},InvalidPassportUser:{type:"c"},401:{type:"c"},5000:{type:"f",name:"ProxyLoadFailure"},CantAccessIframeStorage:{type:"c"},15:{type:"c"},18:{type:"c"},22:{type:"c",name:"StorageExceededOrDisabled"},NoStorage:{type:"c"}},m=s.Reporter={isQosEnabled:!1,lastError:null,actionHistory:[],logAction:function(e){m.log({eventType:e})},logError:function(e,t,n){m.log({eventType:e,error:t},n)},logDetails:function(e,t,n){m.log({eventType:e,resultDetails:t},n)},log:function(i,r){i&&i.eventType&&(e(i),n(i),r&&t())},verbose:function(){for(var e=0;e<m.actionHistory.length;e++)i(m.actionHistory[e]);var t=window.$Config.ContactCache;t&&(t.logVerbose=!0)},handleError:function(e,t,n,i,r,o,a,s,l,c){m.log({eventType:"PageError",resultCode:i,stackTrace:a,resultDetails:{message:e,jsUrl:t,jsLine:n,data:l,hostname:r,action:s,isHidden:c}},!0)},startScenario:function(e){var t=u+"_"+e;return m.isQosEnabled?l.startScenario(t,u):null},stopScenario:function(e,t,n){if(n&&!m.lastError&&(m.lastError=n),m.isQosEnabled){var i=void 0,r=!1;if(!t&&n){var o=v[n];o&&o.type&&(i=o.type,r="f"===i)}if(e.id){var a=!t,s=t?null:n;m.log({eventType:e.id,resultCode:s,success:t,isQosImpacting:r},a)}l.stopScenario(e,t,n,i)}},addStats:function(e,t,n,i){var r=u+"_"+e,o=n?v[n]:null,a=o&&o.name?o.name:n;a&&(this.lastError=a);var s=o?"f"==o.type:!1,l=i?i.id:null;if(m.log({eventType:r,resultCode:a,success:!!n,isQosImpacting:s,resultDetails:{api:r,property:u,scenario:l}}),m.isQosEnabled&&i){var d={api:r,dependent:u};o&&(d[g]=o.type),a&&(d[f]=a),c.add(d,t,i)}},getErrorCode:function(e,t){return t=t||"Unknown",e.errorCode?e.errorCode:e.code?e.code:t},isNullOrUndefined:function(e){return typeof e===h||null==e}}}()}),define("idletimer",["reporter"],function(){!function(e){function t(t,l){function c(){s.clearTimeout(g),g=s.setTimeout(f,n)}function d(){_&&(l&&l(),_=!1),c()}function f(){_||(t&&t(),_=!0)}var g,p=this,h=u.IE?"MSPointerDown":"touchstart",v=u.IE?"MSPointerMove":"touchmove",m=u.IE?"MSPointerUp":"touchend",_=!1,y=e(s.document);y.bind(a,d),y.bind(r,d),y.bind(o,d),y.bind(h,d),y.bind(v,d),y.bind(m,d),d(),p.dispose=function(){s.clearTimeout(g),e(s).unbind(i,p.dispose);try{y.unbind(a,d),y.unbind(r,d),y.unbind(o,d),y.unbind(h,d),y.unbind(v,d),y.unbind(m,d)}catch(n){}t=null,l=null},e(s).bind(i,p.dispose)}var n=3e5,i="unload",r="mousedown",o="mousewheel",a="keydown",s=window,l=s.wLive,c=l.People,u=(c.Reporter,s.$B);c.IdleTimer=t}(window.originaljQuery||jQuery)}),define("names",["idletimer"],function(){!function(){function e(e,t,n,o,a){function l(e){return u(e,["personal","work","other"])}function c(e){return u(e,["mobile","home","home2","work","work2","pager","homeFax","workFax","mobile2","companyPhone","other"])}function u(e,t,n){var i={};if(e)for(var r=0;r<t.length;r++)s.Reporter.isNullOrUndefined(e[r])||(n?i[t[r]]=u(e[r],n):i[t[r]]=e[r]);return i}function d(){return t||"0"}function f(e){var t=m[e];return t||(t=g(e),m[e]=t),t}function g(e){for(var t=e.split("|"),n=["if (!firstName && !lastName) { return null }; var n = [], s = '';"],i=0,o=t.length;o>i;i+=2){var a=r[t[i]];n.push("if ("+a+") {"),n.push(" if (n.length) { n.push(s); } "),n.push(" n.push("+a+"); "),n.push("s = '"+t[i+1]+"';"),n.push("} else {s = s || '"+t[i+1]+"';}")}return n.push("return n.join('').trim();"),new Function("title","firstName","middleName","lastName","suffix",n.join(""))}function p(e,t,n,i,r){return h(e,t,null,i,r)}function h(e,t,n,i,r){var o=[];return t||i?(i&&o.push(i),r&&i&&(o.push(" "),o.push(r)),t&&(i&&o.push(", "),e&&(o.push(e),o.push(" ")),o.push(t)),n&&(!t&&i?o.push(", "):o.push(" "),o.push(n)),o.join("").trim()):null}for(var v=this,m=[],_=0;11>=_;_++){var y=i[_+""];y.fullName=f(y.fn),y.fullNameReverse=y.lnf?y.fullName:h,y.displayName=f(y.dn),y.displayNameReverse=y.lnf?y.displayName:p,y.sortName=f(y.sn),y.sortNameReverse=y.snr?f(y.snr):y.sortName}v.noNameString=n||"",v.profileUrl=o||"",v.photosUrl=a||"",v.isLastNameFirst=function(){return e},v.formatName=function(e,t,n,r,o,a,s){var l=e||d(),c=i[l][t];return c(n,r,o,a,s)},v.getDefaultNameType=d,v._isLastNameFirstForNameType=function(e){e=e||d();var t=i[e];return t&&t.lnf},v._buildDate=function(e){var t=null;return e&&(t=u(e,["year","month","day"]),1900!=t.year&&1904!=t.year||(t.year=null)),t},v._buildEmails=l,v._buildEmailFlags=function(e){return l(e)},v._buildEmailCapabilities=function(e){return l(e)},v._buildPhones=c,v._buildPhoneFlags=function(e){return c(e)},v._buildAddresses=function(e){return u(e,["home","work","other"],["street","city","state","zipCode","country"])}}var t="F| |L",n="L| |F",i={0:{fn:"T| |F| |M| |L| |S",dn:"T| |F| |L| |S",sn:t,snr:n,lnf:!1},1:{fn:"F| |L| |M| |T| |S",dn:"F| |L| |T| |S",sn:t,snr:n,lnf:!1},2:{fn:"F| |L| |M| |T| |S",dn:"F| |L| |T| |S",sn:t,snr:n,lnf:!1},3:{fn:"F| |M| |L| |T| |S",dn:"F| |L| |T| |S",sn:t,snr:n,lnf:!1},4:{fn:"F| |M| |L| |T| |S",dn:"F| |L| |T| |S",sn:t,snr:n,lnf:!1},5:{fn:"L| |F| |M| |T| |S",dn:"L| |F| |T| |S",sn:"L| |F",lnf:!0},6:{fn:"T| |F| |M| |L| |S",dn:"T| |F| |L| |S",sn:t,snr:n,lnf:!1},7:{fn:"T| |F| |L| |M| |S",dn:"T| |F| |L| |S",sn:t,snr:n,lnf:!1},8:{fn:"T| |L||F| |M| |S",dn:"T| |L||F| |S",sn:"L||F",lnf:!0},9:{fn:"T| |L| |F| |M| |S",dn:"T| |L| |F| |S",sn:"L| |F",lnf:!0},10:{fn:"T| |L| |F| |M| |S",dn:"T| |L| |F| |S",sn:"L| |F",lnf:!0},11:{fn:"T| |L| |M| |F| |S",dn:"T| |L| |F| |S",sn:"L| |F",lnf:!0}},r={T:"title",F:"firstName",M:"middleName",L:"lastName",S:"suffix"},o=window,a=o.wLive,s=a.People;s.Names=e}()}),define("messagingaddress",["names"],function(){!function(e){function t(e,t){var n=this;n._c=e,n._mri=t,n._aa=!1,n._p=0,n._ccl=!1,n._cch=!1,n._cgch=!1}var n="changed";window.wLive.People.MessagingAddress=t;var i=t.prototype;i.isActiveAddress=function(){return this._aa},i.getPresence=function(){return this._p},i.canCall=function(){return this._ccl},i.canChat=function(){return this._cch},i.canGroupChat=function(){return this._cgch},i.getDifferentiator=function(){var e=this,t=e._c,n=t.getSourceId();return"GOOG"==n?e._getMri():"SCD"==n||"SKYPE"==n?t.getNickname():t.getDisplayNameWithFallback()},i._getContact=function(){return this._c},i._getMri=function(){return this._mri},i._setProperty=function(t,i,r,o,a){this._aa==t&&this._p==i&&this._ccl==r&&this._cch==o&&this._cgch==a||(this._aa=t,this._p=i,this._ccl=r,this._cch=o,this._cgch=a,e(this._getContact().getPerson()).triggerHandler(n))}}(window.originaljQuery||jQuery)}),define("peoplecontactdetails",["messagingaddress"],function(){!function(){function e(e,t,n){var i=this;i._d=e,i._pd=t,i._n=n,i._b=e[2],i._a=null,i._an=null}var t=window.wLive.People;t.ContactDetails=e;var n=e.prototype;n.getAddresses=function(){var e=this;if(!e._a){var t=e._b,n=e._pd[24]||[],i=e._d[25]||[],r=[65536&t?n[0]:i[0],t&1<<17?n[1]:i[1],t&1<<18?n[2]:i[2]];
e._a=e._n._buildAddresses(r)}return e._a},n.getSignificantOther=function(){var e=this;return e._b&1<<20?e._pd[25]:e._d[26]},n.getAnniversary=function(){var e=this;if(!e._an){var t=e._b&1<<20?e._pd[26]:e._d[27];e._an=e._n._buildDate(t)}return e._an},n.getWebsite=function(){var e=this;return e._b&1<<21?e._pd[27]:e._d[28]},n.getJobTitle=function(){var e=this;return 16&e._b?e._pd[28]:e._d[29]},n.getNotes=function(){var e=this;return e._b&1<<22?e._pd[29]:e._d[30]}}()}),define("peoplecontact",["peoplecontactdetails"],function(){!function(){function e(e,t,n,i){var r=this;r._d=e,r._p=t,r._pd=n,r._n=i,r._b=e[2],r._cd=null,r._bd=null,r._e=null,r._eie=null,r._ec=null,r._ph=null,r._m=null,r._pie=null}var t=8,n=window.wLive.People;n.ContactState={deleted:-1,shell:0,meContact:1,pending:2,follower:3,twoWay:4,rolodex:5,nonFriend:6,declined:7,implicitContact:8,shellContactFanPage:9,enhancedShellContact:10,implicitShellContact:11,invitationShellContact:12},n.Contact=e;var i=e.prototype;i.getPerson=function(){return this._p},i.getId=function(){var e=this;return 1&e._b?e._pd[0]:e._d[0]},i.getPassportMemberName=function(){var e=this;return"WL"===e._d[4]?e._p.getPassportMemberName():null},i.getMessagingAddresses=function(){var e=this;if(!e._m){e._m=[];for(var t=e.getMris(),i=0;i<t.length;i++)t[i]&&e._m.push(new n.MessagingAddress(e,t[i]))}return e._m},i.getDisplayName=function(){var e=this;return e._n.formatName(e.getNameType(),"displayName",e.getTitle(),e.getFirstName(),e.getMiddleName(),e.getLastName(),e.getSuffix())},i.getFullName=function(){var e=this;return e.getOrderedName()||e._n.formatName(e.getNameType(),"fullName",e.getTitle(),e.getFirstName(),e.getMiddleName(),e.getLastName(),e.getSuffix())},i.getDisplayNameWithFallback=function(){var e=this,t=e.getDisplayName();if(t=t||e.getNickname(),t=t||e.getCompanyName(),t=t||e.getPassportMemberName(),!t){var n=e.getEmails();t=t||n.personal,t=t||n.work,t=t||n.other}if(!t){var i=e.getPhones();t=t||i.mobile,t=t||i.home,t=t||i.home2,t=t||i.work,t=t||i.work2,t=t||i.other}return t||e._n.noNameString},i.getContactState=function(){return this._d[1]},i.getPromotionBitmap=function(){return this._b},i.getMris=function(){return this.getPerson().isMe()?["1:"+this.getPerson().getPassportMemberName()]:this._props()[0]||[]},i.getIsHidden=function(){return this._props()[1]},i.getOfflineImEnabled=function(){return this._props()[2]},i.getSourceId=function(){return this._d[4]},i.getObjectId=function(){return this._d[5]},i.getDomainTag=function(){return this._d[6]},i.getFirstName=function(){var e=this;return e._b&t?e._pd[2]:e._d[7]},i.getMiddleName=function(){var e=this;return e._b&t?e._pd[18]:e._d[18]},i.getLastName=function(){var e=this;return e._b&t?e._pd[3]:e._d[8]},i.getTitle=function(){var e=this;return e._b&t?e._pd[19]:e._d[20]},i.getSuffix=function(){var e=this;return e._b&t?e._pd[20]:e._d[21]},i.getEmails=function(){var e=this;if(!e._e){var t=e._b,n=e._pd[4],i=e._d[9]||[],r=[32&t?n[0]:i[0],64&t?n[1]:i[1],128&t?n[2]:i[2]];e._e=e._n._buildEmails(r)}return e._e},i.getPrimaryEmail=function(){var e=this,t=e.getEmails(),n=t.personal||t.work||t.other||e.getPassportMemberName();return n},i.getPhones=function(){var e=this;if(!e._ph){var t=e._b,n=e._pd[5],i=e._d[10]||[],r=[256&t?n[0]:i[0],512&t?n[1]:i[1],1024&t?n[2]:i[2],2048&t?n[3]:i[3],4096&t?n[4]:i[4],8192&t?n[5]:i[5],16384&t?n[6]:i[6],32768&t?n[7]:i[7],t&1<<23?n[8]:i[8],t&1<<24?n[9]:i[9],t&1<<25?n[10]:i[10]];e._ph=e._n._buildPhones(r)}return e._ph},i.getCompanyName=function(){var e=this;return 16&e._b?e._pd[10]:e._d[11]},i.getUserTile=function(){var e=this;return 4&e._b?e._pd[11]:e._d[12]},i.getEmailImEnabled=function(){var e=this;return e._eie||(e._eie=e._n._buildEmailFlags(e._d[13])),e._eie},i.getEmailCapabilities=function(){var e=this;return e._ec||(e._ec=e._n._buildEmailCapabilities(e._d[14])),e._ec},i.getPhoneImEnabled=function(){var e=this;return e._pie||(e._pie=e._n._buildPhoneFlags(e._d[15])),e._pie},i.getFavoriteOrder=function(){return this._d[16]},i.getBirthday=function(){var e=this;if(!e._bd){var t=e._bd&1<<19?e._pd[16]:e._d[17];e._bd=e._n._buildDate(t)}return e._bd},i.getNickname=function(){var e=this,n=e._b&t?e._pd[17]:e._d[19],i=e.getSourceId();return i&&"TWITR"===i.toUpperCase()&&n&&!n.startsWith("@")&&(n="@"+n),n},i.getYomiFirstName=function(){var e=this;return e._b&t?e._pd[21]:e._d[22]},i.getYomiLastName=function(){var e=this;return e._b&t?e._pd[22]:e._d[23]},i.getYomiCompanyName=function(){var e=this;return e._b&t?e._pd[23]:e._d[24]},i.getOrderedName=function(){var e=this;return e._b&t?e._pd[30]:e._d[31]},i.getNameType=function(){var e=this;return e._b&t?e._pd[31]:e._d[32]},i.getSkypeId=function(){return this._d[34]},i.getIsAnonymous=function(){return this._d[35]},i.getLinkedMsa=function(){return this._d[36]},i.getLinkedFacebookId=function(){return this._d[37]},i.getIsBidirectional=function(){return this._d[38]},i.getSkypePendingOutbound=function(){return this._d[39]},i.getIsBlocked=function(){return this._d[40]},i.getDetails=function(){var e=this;return e._cd||(e._cd=new n.ContactDetails(e._d,e._pd,e._n)),e._cd},i._props=function(){return this._d[3]||[]}}()}),define("persondetails",["peoplecontact"],function(){!function(){function e(e,t){var n=this;n._d=e,n._n=t,n._a=null,n._an=null}var t=window.wLive.People;t.PersonDetails=e;var n=e.prototype;n.getAddresses=function(){var e=this;return e._a||(e._a=e._n._buildAddresses(e._d[24])),e._a},n.getSignificantOther=function(){return this._d[25]},n.getAnniversary=function(){var e=this;return e._an||(e._an=e._n._buildDate(e._d[26])),e._an},n.getWebsite=function(){return this._d[27]},n.getJobTitle=function(){return this._d[28]},n.getNotes=function(){return this._d[29]},n.getAntilinks=function(){return this._d[32]}}()}),define("person",["persondetails"],function(){!function(e){function t(t,n){var i=this;i._d=t,i._n=n,i.$changes=e(this),i._c=null,i._e=null,i._p=null,i._b=null,i._ce=null,i._pd=null,i._m=null}var n=window,i=n.wLive.People;i.Person=t;var r=t.prototype;r.getId=function(){return this._d[0]},r.getContacts=function(){var e=this;if(!e._c){e._c=[];var t=this._d[1];if(t)for(var n=0;n<t.length;n++)e._c.push(new i.Contact(t[n],e,e._d,e._n))}return e._c},r.getMessagingRelevance=function(){var e=parseInt(this._d[33]);return isNaN(e)&&(e=0),e},r.getPeopleRelevance=function(){var e=parseInt(this._d[34]);return isNaN(e)&&(e=0),e},r.getMessagingAddresses=function(){var e=this;if(!e._m){for(var t=e.getContacts(),n=[],i=0;i<t.length;i++)"SKYPE"==t[i].getSourceId()&&n.addRange(t[i].getMessagingAddresses());for(i=0;i<t.length;i++)"WL"==t[i].getSourceId()&&n.addRange(t[i].getMessagingAddresses());for(i=0;i<t.length;i++)"SKYPE"!=t[i].getSourceId()&&"WL"!=t[i].getSourceId()&&n.addRange(t[i].getMessagingAddresses());e._m=n}return e._m},r.isOnline=function(e){for(var t=this,n=t.getMessagingAddresses(),i=0;i<n.length;i++)if((!e||n[i].isActiveAddress())&&1==n[i].getPresence())return!0;return!1},r.canCall=function(e){for(var t=this,n=t.getMessagingAddresses(),i=0;i<n.length;i++)if((!e||n[i].isActiveAddress())&&n[i].canCall())return!0;return!1},r.canChat=function(e){for(var t=this,n=t.getMessagingAddresses(),i=0;i<n.length;i++)if((!e||n[i].isActiveAddress())&&n[i].canChat())return!0;return!1},r.canGroupChat=function(e){for(var t=this,n=t.getMessagingAddresses(),i=0;i<n.length;i++)if((!e||n[i].isActiveAddress())&&n[i].canGroupChat())return!0;return!1},r.getDisplayName=function(){var e=this;return e._n.formatName(e.getNameType(),"displayName",e.getTitle(),e.getFirstName(),e.getMiddleName(),e.getLastName(),e.getSuffix())},r.getFullName=function(){var e=this;return e.getOrderedName()||e._n.formatName(e.getNameType(),"fullName",e.getTitle(),e.getFirstName(),e.getMiddleName(),e.getLastName(),e.getSuffix())},r.getDisplayNameWithFallback=function(){var e=this,t=e.getDisplayName();if(t=t||e.getNickname(),t=t||e.getCompanyName(),t=t||e.getPassportMemberName(),!t){var n=e.getEmails();t=t||n.personal,t=t||n.work,t=t||n.other}if(!t){var i=e.getPhones();t=t||i.mobile,t=t||i.home,t=t||i.home2,t=t||i.work,t=t||i.work2,t=t||i.other}return t||e._n.noNameString},r.isLastNameFirst=function(){var e=this,t=e.getNameType();return e._n._isLastNameFirstForNameType(t)},r.getProfileUrl=function(){var e=this,t=e._d[7];return t?e._n.profileUrl.replace("{cid}",e._d[7]):""},r.getPhotosUrl=function(){var e=this,t=e._d[7];return t?e._n.photosUrl.replace("{cid}",e._d[7]):""},r.isMe=function(){var e=this._d[1][0];return e&&1===e[1]},r.isPendingInbound=function(){for(var e=this._d[1],t=!1,n=Math.min(e.length,3),i=0;n>i;i++){var r=e[i];if(r&&2===r[1]){t=!0;break}}return t},r.isHidden=function(){for(var e=this._d[1],t=!1,n=Math.min(e.length,3),i=0;n>i;i++){var r=e[i];if(r&&(6===r[1]&&r[3]&&1===r[3][1]||2===r[1])){t=!0;break}}return t},r.isFanPage=function(){var e=this._d[1][0];return e&&9===e[1]},r.getFirstName=function(){return this._d[2]},r.getLastName=function(){return this._d[3]},r.getEmails=function(){var e=this;return e._e||(e._e=e._n._buildEmails(e._d[4])),e._e},r.getPhones=function(){var e=this;return e._p||(e._p=e._n._buildPhones(e._d[5])),e._p},r.getCid=function(){return this._d[6]},r.getHexCid=function(){return this._d[7]},r.getOnHideList=function(){return this._d[8]},r.getTrustLevel=function(){return this._d[9]},r.getCompanyName=function(){return this._d[10]},r.getUserTile=function(){return this._d[11]},r.getCategoryIds=function(){return this._d[12]?this._d[12]:[]},r.getIsFavorite=function(){return this._d[13]},r.getFavoriteOrder=function(){return this._d[14]},r.getPassportMemberName=function(){return this._d[15]},r.getBirthday=function(){var e=this;return e._b||(e._b=e._n._buildDate(e._d[16])),e._b},r.getNickname=function(){return this._d[17]},r.getMiddleName=function(){return this._d[18]},r.getTitle=function(){return this._d[19]},r.getSuffix=function(){return this._d[20]},r.getYomiFirstName=function(){return this._d[21]},r.getYomiLastName=function(){return this._d[22]},r.getYomiCompanyName=function(){return this._d[23]},r.getOrderedName=function(){return this._d[30]},r.getNameType=function(){return this._d[31]||this._n.getDefaultNameType()},r.getVersion=function(){return this._d[35]},r.getContactEmails=function(){function e(e,t,n){if(n){var i=n.toLowerCase();t[i]||(t[i]=1,e.push(n))}}var t=this;if(!t._ce){for(var n=[],i={},r=t.getContacts(),o=0;o<r.length;o++){var a=r[o].getEmails();e(n,i,a.personal),e(n,i,a.work),e(n,i,a.other)}e(n,i,t.getPassportMemberName()),t._ce=n}return t._ce},r.getDetails=function(){var e=this;return e._pd||(e._pd=new i.PersonDetails(e._d,e._n)),e._pd},r._update=function(e){var t=this;t._d=e,t._c=null,t._e=null,t._p=null,t._b=null,t._ce=null,t._pd=null,t._m=null},r._getHashKeys=function(){for(var e=this,t=e._d,n=[t[0],t[6],t[7]],i=t[1]||[],r=0;r<i.length;r++)n.push(i[r][0]);return n}}(window.originaljQuery||jQuery)}),define("group",["person"],function(){!function(e){function t(t){this._d=t,this.$changes=e(this)}window.wLive.People.Group=t;var n=t.prototype;n.getId=function(){return this._d[0]},n.getName=function(){return this._d[1]},n.getCid=function(){return this._d[2]},n.getHexCid=function(){return this._d[3]},n.getEmail=function(){return this._d[4]},n._update=function(e){return this._d=e},n._getHashKeys=function(){return[this._d[0]]}}(window.originaljQuery||jQuery)}),define("category",["group"],function(){!function(e){function t(t){this._d=t,this.$changes=e(this)}window.wLive.People.Category=t;var n=t.prototype;n.getId=function(){return this._d[0]},n.getName=function(){return this._d[1]},n.getIsFavorite=function(){return this._d[2]},n._update=function(e){return this._d=e},n._getHashKeys=function(){return[this._d[0]]}}(window.originaljQuery||jQuery)}),define("service",["category"],function(){!function(e){function t(t){this._d=t,this.$changes=e(this)}window.wLive.People.Service=t;var n=t.prototype;n.getId=function(){return this._d[0]},n.getName=function(){return this._d[1]},n.getTokenState=function(){return this._d[2]},n.getSupportsIm=function(){return this._d[3]},n.getSupportsContactAgg=function(){return this._d[4]},n.getIconUrlThumbnail=function(){return this._d[5]},n.getIconUrlMiniPhoto=function(){return this._d[6]},n.getIconUrlLargePhoto=function(){return this._d[7]},n.getProfileUrl=function(){return this._d[8]},n.getPhotosUrl=function(){return this._d[9]},n.getSendMessageUrl=function(){return this._d[10]},n.getReportAbuseUrl=function(){return this._d[11]},n.getRank=function(){return this._d[12]},n.getOnHideList=function(){return this._d[13]},n._getHashKeys=function(){return[this._d[0]]},n._update=function(e){this._d=e}}(window.originaljQuery||jQuery)}),define("settings",["service"],function(){!function(e){function t(t){this._d=t,this.$changes=e(this)}var n=t.prototype;n.getMessengerTrustLevel=function(){return this._d[0]},n.getImHistoryEnabled=function(){return 1==this._d[1]},n.getAbSettings=function(){return this._d[2]},n.getWebIMSettings=function(){return this._d[3]},n.getSkypePendingInboundCount=function(){return this._d[4]},window.wLive.People.Settings=t}(window.originaljQuery||jQuery)}),define("lazyhash",["settings"],function(){!function(){function e(e){function t(e,t){t=t||!1;for(var i=e.length,o=0;i>o;o++)for(var a=e[o],s=a._getHashKeys(),l=s.length,c=0;l>c;c++)t?n(s[c]):r(s[c],e[o])}function n(e){e&&s[e]&&delete s[e]}function r(e,t){i.Reporter.isNullOrUndefined(e)||(s[e]=t)}var o=this,a=!1,s=[];o.get=function(t){return a||(a=!0,o.update(e)),s[t]||null},o.clear=function(){a=!1,s=[]},o.update=function(n,i){!a&&i&&(a=!0,o.update(e)),a&&t(n,!1)},o.removeItemByKey=function(e){a&&n(e)},o.remove=function(e){a&&t(e,!0)}}var t=window,n=t.wLive,i=n.People;i.LazyHash=e}()}),define("crossdomainproxy",["lazyhash"],function(){!function(){function e(e,o,a){function l(e){s.logAction("Pwc_XmlProxyCallback");var t=e.status,r=null;200==t?(p.window=c(),p.window||(s.logAction("Pwc_XmlProxyIframeNotFound"),r=i.document.domain!=v.domain?"HostDomainInvalid":g?g:"UnknownProxyFailure")):r=t,s.addStats(n,h,r,o),a&&a()}function c(){for(var e=null,t=i.document.getElementsByTagName("iframe"),n=0,r=t.length;r>n;n++)try{var o=t[n],a=o.contentDocument?o.contentDocument:o.contentWindow.document;if(a&&a.location.href==d){e=o.contentWindow||o.contentDocument.parentWindow;break}}catch(l){s.logError("Pwc_FindProxyIframeFailure",l)}return e}function u(t){t.origin==i.location.protocol+"//"+e&&t.data&&t.data.startsWith&&t.data.startsWith("pwc:")&&(g=t.data.substring(4))}var d,f,g,p=this,h=(new Date).getTime(),v=i.$Config;if(p.window=null,i.addEventListener)try{i.addEventListener(t,u,0),f=!0}catch(m){}d=i.location.protocol+"//"+e+"/xmlProxy.htm?vn="+i.$Version.encodeURIComponent()+"&domain="+(v.d||v.domain).encodeURIComponent(),(window.FilesConfig&&window.FilesConfig.lightweightEmbedPage||window.Flight&&window.Flight.Ramps&&window.Flight.Ramps.lightweightEmbedPage)&&r.requiresDomainLowering(!1),r.fetchXML(d,l,"GET",null,null),p.dispose=function(){f&&i.removeEventListener&&i.removeEventListener(t,u,0)}}var t="message",n="LoadXmlProxy",i=window,r=i.$Network,o=i.wLive,a=o.People,s=a.Reporter;o.People.CrossDomainProxy=e}()}),define("storageproxy",["crossdomainproxy"],function(){!function(){function e(){var e=this,n=[],i=null;e.errorCode=null,e.setProxyWindow=function(n,a){try{var s=a?a:t,l=n?s.localStorage:s.sessionStorage;if(l){var c="st_"+Math.round(1e5*Math.random());l.setItem(c,c),l.getItem(c)==c?(l.removeItem(c),i=l):e.errorCode="GetTestValueFailed"}else e.errorCode=a?"CantAccessIframeStorage":"NoStorage"}catch(u){r.logError("Pwc_RestoreAbError",u),e.errorCode=o(u)}a&&e.errorCode&&e.setProxyWindow(!1)},e.remove=function(t){if(i)try{i.removeItem(t)}catch(a){r.logError("Pwc_StorageRemove",a),e.errorCode=o(a)}else delete n[t]},e.get=function(t,a){var s;if(i)try{s=i.getItem(t)}catch(l){r.logError("Pwc_StorageGet",l),e.errorCode=o(l)}else s=n[t];return r.isNullOrUndefined(s)&&(s=a),s},e.getDate=function(t){var n=e.get(t);if(n)try{var i=parseInt(n);return new Date(i)}catch(a){r.logError("Pwc_StorageGetDate",a),e.errorCode=o(a)}return new Date(1)},e.getInt=function(t,n){var i=e.get(t);if(i)try{return parseInt(i)}catch(a){r.logError("Pwc_StorageGetInt",a),e.errorCode=o(a)}return n||0},e.set=function(t,a){if(i)try{i.setItem(t,a)}catch(s){r.logError("Pwc_StorageSet",s),e.errorCode=o(s)}else n[t]=a},e.setDate=function(t,n){n&&e.set(t,n.getTime())},e.dispose=function(){n=null,i=null}}var t=window,n=t.wLive,i=n.People,r=i.Reporter,o=r.getErrorCode;i.StorageProxy=e}()}),define("store",["storageproxy"],function(){!function(){function e(e,v,b,w,C){function S(e,t,n){for(var i=e.getInt(t+f,-1),r=n.length,o=[],a=0;i>=a;a++){for(var s={},l=0;r>l;l++){var c=e.get(t+n[l]+a,null);if(null==c)return y.logAction("Pwc_GetIncrementalResponsesMissingKey"),[];s[n[l]]=c}o[a]=s}return o}function I(){y.logAction("Pwc_ClearAb"),x.remove(r),x.remove(i),x.remove(n),x.remove(o),x.remove(a),x.remove(s),x.remove(c),x.remove(l),k(x,u,[g,p])}function $(e,t,n){var i=e.getInt(t+f,-1)+1;e.set(t+f,i);for(var r in n)"string"==typeof r&&e.set(t+r+i,n[r])}function k(e,t,n){if(e){for(var i=e.getInt(t+f,-1),r=n.length,o=0;i>=o;o++)for(var a=0;r>a;a++)e.remove(t+n[a]+o);e.remove(t+f)}}var L=this,T=null,x=new _,M=new _;L.init=function(t){function n(){var e=T&&T.window?T.window:h;e&&(x.setProxyWindow(v,e),M.setProxyWindow(!0,e),x.get(r)===b&&x.get(i)===w||I()),C&&C()}T=new m.CrossDomainProxy(e,t,n)},L.setFullSyncRequired=function(e){x.set(c,e)},L.getFullSyncRequired=function(){return x.get(c)},L.setFullAb=function(e,d,f){var h,v=(new Date).getTime();try{x.errorCode=null,k(x,u,[g,p]),x.remove(l),x.set(r,b),x.set(n,e),x.set(i,w),x.setDate(o,f),x.setDate(a,f),x.remove(s),x.remove(c),h=x.errorCode}catch(m){y.logError("Pwc_SetFullAb",m),h=y.getErrorCode(m)}y.addStats(t,v,h,d)},L.clearAbErrorCode=function(){var e=x.errorCode;return x.errorCode=null,e},L.getFullAb=function(){return x.get(n,null)},L.setLastFullSync=function(e){x.setDate(o,e)},L.getLastFullSync=function(){return x.getDate(o)},L.setDeltaSyncRequired=function(e){x.set(s,e)},L.getDeltaSyncRequired=function(){return x.get(s)},L.removeDeltaSyncRequired=function(){x.remove(s)},L.setAbDelta=function(e,t){$(x,u,{json:e,syncKey:t})},L.getAbDeltas=function(){return S(x,u,[g,p])},L.setLastDeltaSync=function(e){x.setDate(a,e)},L.getLastDeltaSync=function(){return x.getDate(a)},L.setDeltaSyncCount=function(e){x.set(l,e)},L.getDeltaSyncCount=function(){return x.getInt(l)},L.setHost=function(e){M.set(d,e)},L.getHost=function(e){return M.get(d,e)},L.clearHost=function(){M.remove(d)},L.clearAb=I,L.dispose=function(){T&&(T.dispose(),T=null),x&&(x.dispose(),x=null),M&&(M.dispose(),M=null)}}var t="PersistAB",n="fullSyncResponse",i="mkt",r="abCid",o="lastFullSync",a="lastDeltaSync",s="deltaSyncRequired",l="deltaSyncCount",c="fullSyncRequired",u="deltaSyncResponse",d="preferredHostName",f="_e",g="json",p="syncKey",h=window,v=h.wLive,m=v.People,_=m.StorageProxy,y=m.Reporter;m.Store=e}()}),define("serviceproxy",["store"],function(){!function(){function ServiceProxy(store,market,peopleApiHostName,peopleApiAppId,handlersBaseUrl,canary){function PwcError(e,t){this.errorCode=t,this.message=e}function buildDefaultHeaders(e){var t={};return t.Pragma="no-cache",t["Cache-Control"]="no-cache",t.Expires="-1",Reporter.isQosEnabled&&e&&w.$ScenarioQoS.addScenarioToHttpHeader(t,e),t}function buildPeopleApiUrl(e,t){var n=store.getHost(peopleApiHostName),i="&cbus="+Math.random();if(!Reporter.isNullOrUndefined(t))for(var r in t)i+="&"+r+"="+t[r].encodeURIComponent();return w.location.protocol+"//"+n+"/people/"+e+"?SerializeAs=compact"+c_marketParam+market.encodeURIComponent()+"&appid="+peopleApiAppId.encodeURIComponent()+"&version="+c_schemaVersion.encodeURIComponent()+i}function buildHandlerUrl(e){return handlersBaseUrl+"/Handlers/PeopleApi/"+e+".mvc"}function parseGetProfilesResponse(e){var t=parseJson(e);if(t&&t.length>0&&t[0]==c_schemaVersion){var n=t[1];return n}return[]}function processPeopleResponse(e,t,n,i,r,o,a){var s=null,l=null,c=[];hasRequestSucceeded(e)||(s=getResponseStatusCode(e));try{l=stripJsonPrefix(e.responseText),c=parsePeopleResponse(l,a)}catch(u){Reporter.logError("Pwc_PeopleParseError",u,!0);var d=s;s=Reporter.getErrorCode(u,s?s:c_parseError),"MissingTicket"==s||"PassportAuthFail"==s||s==c_errorInvalidPassportUser||Reporter.isNullOrUndefined(d)||"200"==d||(s=d+"_"+s)}Reporter.addStats(t,r,getQosErrorCode(e,s),o),null==s?(updatePreferredHostName(e),n(e,l,c)):(store.clearHost(),i(e,s))}function parsePeopleResponse(e,t){var n,i=null,r=parseJson(e);if(r&&r.length){var o=r[1];if(o)o.length>=2?(i=o[0]||"EmptyEvalOrAbError",n=o[1]||"Unspecified error returned",i!=c_errorInvalidPassportUser&&("BadArgument"!=i||-1==n.toLowerCase().indexOf("resolve the caller")&&-1==n.toLowerCase().indexOf("ticket"))||(n="Invalid passport user",i=c_errorInvalidPassportUser)):(n="Invalid error response",i="InvalidErrorResponse");else{var a=r[0];a?t||a[2]==c_schemaVersion||(n="Schema mismatch (expected: {0}, returned: {1})".format(c_schemaVersion,a[2]||""),i="SchemaMismatch"):(n="Data is missing in the response",i="EmptyResponseArray")}}else n="Invalid response format",i="InvalidResponse";if(n)throw new PwcError(n,i);return r}function parseJson(rawResponse){var result;try{result=eval(rawResponse)}catch(ex){Reporter.logError("Pwc_ParseJsonFailure",ex),result=[,[ex.name,"Syntax error: "+ex.message]]}return result}function stripJsonPrefix(e){if(!e)throw new PwcError("Empty PWC response","EmptyResponse");if(e.indexOf("<json>")<0)throw new PwcError("JSON prefix not found on PWC response","JsonPrefixNotFound");return e.substring(6,e.length)}function getResponseStatusCode(e){var t=e?e.status:null;return null!==t&&"undefined"!==t?t:c_hostUnreachableError}function hasRequestSucceeded(e){return 200==getResponseStatusCode(e)}function getQosErrorCode(e,t){return hasRequestSucceeded(e)?t:t?t:getResponseStatusCode(e)}function updatePreferredHostName(e){try{var t=Boolean(e)&&Boolean(e.getResponseHeader)?e.getResponseHeader("PreferredHostName"):null;t&&store.setHost(t)}catch(n){Reporter.logError("Pwc_UpdatePreferredHost",n)}}PwcError.prototype=new Error,PwcError.prototype.constructor=PwcError;var _this=this;_this.fullSync=function(e,t,n){function i(i){processPeopleResponse(i,c_WL_People_Cache_Rest_FullSync_ApiId,e,t,r,n)}var r=(new Date).getTime(),o=buildPeopleApiUrl(c_abCore),a=buildDefaultHeaders(n);$Network.fetchXML(o,i,c_get,null,a)},_this.deltaSync=function(e,t,n,i){function r(e){processPeopleResponse(e,c_WL_People_Cache_Rest_DeltaSync_ApiId,t,n,o,i)}var o=(new Date).getTime(),a=buildPeopleApiUrl(c_abCore,{syncKey:e}),s=buildDefaultHeaders(i);$Network.fetchXML(a,r,c_get,null,s)},_this.loadPersonDetails=function(e,t,n,i){function r(e){processPeopleResponse(e,c_WL_People_Cache_Rest_PersonDetails_ApiId,t,n,o,i,!0)}var o=(new Date).getTime(),a=buildPeopleApiUrl(c_personDetails,{contactId:e}),s=buildDefaultHeaders(i);$Network.fetchXML(a,r,c_get,null,s)},_this.loadAllPersonDetails=function(e,t,n,i){function r(e){processPeopleResponse(e,c_WL_People_Cache_Rest_AllPersonDetails_ApiId,t,n,o,i,!0)}var o=(new Date).getTime(),a=null;e&&(a={filter:e});var s=buildPeopleApiUrl(c_allPersonDetails,a),l=buildDefaultHeaders(i);$Network.fetchXML(s,r,c_get,null,l)},_this.loadProfiles=function(e,t,n,i){function r(e){var r=null,a=[];if(hasRequestSucceeded(e))try{a=parseGetProfilesResponse(e.responseText)}catch(s){Reporter.logError("Pwc_ProfilesParseError",s,!0),r=Reporter.getErrorCode(s,c_parseError)}else r=getResponseStatusCode(e);Reporter.addStats(c_WL_People_Cache_Rest_GetProfiles,o,getQosErrorCode(e,r),i),r?n(e,r):t(e,a)}var o=(new Date).getTime(),a=e.join(","),s=buildHandlerUrl(c_getProfilesHandler),l="canary="+canary.encodeURIComponent()+"&cids="+a.encodeURIComponent()+c_marketParam+market.encodeURIComponent(),c=buildDefaultHeaders(i);$Network.fetchXML(s,r,c_post,l,c)},_this.parseProfiles=parseGetProfilesResponse,_this.parseAb=parsePeopleResponse,_this.blockOrUnblockMessenger=function(e,t,n,i){var r=e.getCid();if(r){var o=(t?"Hide":"Unhide")+"Contact";$Network.fetchXML(buildHandlerUrl(o),function(e){var t=e&&"200"===e.responseText,r=t?n:i;r&&r(e.responseText)},"POST","canary="+canary.encodeURIComponent()+"&cid="+encodeURIComponent(r))}}}var c_WL_People_Cache_Rest_GetProfiles="Rest_GetProfiles",c_WL_People_Cache_Rest_FullSync_ApiId="Rest_FullSync",c_WL_People_Cache_Rest_DeltaSync_ApiId="Rest_DeltaSync",c_WL_People_Cache_Rest_PersonDetails_ApiId="Rest_PersonDetails",c_WL_People_Cache_Rest_AllPersonDetails_ApiId="Rest_AllPersonDetails",c_errorInvalidPassportUser="InvalidPassportUser",c_hostUnreachableError="HostUnreachable",c_parseError="ParseError",c_schemaVersion="W5.M2",c_get="GET",c_post="POST",c_getProfilesHandler="GetProfiles",c_abCore="abcore",c_personDetails="PersonDetails",c_allPersonDetails="allPersonDetails",c_marketParam="&market=",w=window,$Network=w.$Network,wLive=w.wLive,People=wLive.People,Reporter=People.Reporter;People.ServiceProxy=ServiceProxy}()}),define("deltasync",["serviceproxy"],function(){!function(){function e(e,n,i){function s(e,t){var i=!1;if(e&&e.length>0){for(var r=n.settings,o=0;o<e.length;o++)e[o]&&e[o]!=r._d[o]&&(r._d[o]=e[o],i=!0);i&&t&&r.$changes.triggerHandler(n.changedEventName)}return i}function l(e,n,i,a,s,l){if(!e)return null;if(typeof e!==r){for(var c=[],u=[],d=[],f=0,g=e.length;g>f;f++){for(var p=e[f],h=-1,v=0,m=n.length;m>v;v++)if(n[v].getId()===p[o]){h=v;break}if(-1!==h){var _=n[h];1===p[s]?(u.push(_),a.remove([_]),n.splice(h,1)):(c.push(_),n[h]._update(p))}else if(1!==p[s]){var y=l(p);d.push(y),a.update([y]),n.push(y)}}if(d.length>0||c.length>0||u.length>0)return new t(i,d,c,u)}return null}function d(e){if(!e)return null;var i={},r=[],o=[],s=[],l=[];h(e,i),v(e,i,r);for(var c in i){var u=n._personHash.get(c),d=u._d;if(u){var f=d[a].length,g=n.getPersonDetails(c);g&&n._personDetailsHash.remove([g]),0===f?(n.persons.remove(u),n._personHash.remove([u]),s.push(u)):(D(d),u._update(d),n._personHash.update([u]),o.push(u))}}for(var p=0,m=r.length;m>p;p++){var _=r[p];D(_);var y=new T.Person(_,n.names);n.persons.push(y),n._personHash.update([y]),l.push(y)}return l.length>0||o.length>0||s.length>0?new t(n.$persons,l,o,s):null}function h(e,t){for(var i=0,r=e.length;r>i;i++)for(var s=e[i],l=s[a],c=0;c<l.length;){var u=l[c],d=u[g],f=n._personHash.get(d);if(f&&(u[1]===x.deleted||s[o]!==f.getId())){var p=f._d,h=p[a],v=k(p,d);-1!=v&&(n._personHash.removeItemByKey(d),t[f.getId()]=1,"WL"===h[v][4]&&(n._personHash.removeItemByKey(f.getCid()),n._personHash.removeItemByKey(f.getHexCid()),w(p)),h.splice(v,1))}u[1]===x.deleted?l.splice(c,1):c++}}function v(e,t,i){for(var r=0,s=e.length;s>r;r++){var l=e[r];if(l[a].length){var d=n._personHash.get(l[o]);if(d&&d.getId()===l[o]){for(var f=d._d,p=l[a],h=f[a],v=0,_=p.length;_>v;v++){var y=p[v],b=k(f,y[g]);t[d.getId()]=1,-1!=b?h[b]=y:h.push(y),"WL"===y[4]&&C(f,l)}m(h),f[c]=l[c],f[u]=l[u]}else i.push(l)}}}function m(e){e.sort(function(e,t){var n=I(e[4]),i=I(t[4]);if(n>i)return 1;if(i>n)return-1;var r=e[g],o=t[g];return r>o?-1:o>r?1:0})}function w(e){for(var t=0,n=_.length;n>t;t++)delete e[_[t]]}function C(e,t){for(var n,i=0,r=_.length;r>i;i++)n=_[i],e[n]=t[n]}function S(e,t){return e[a][t][g]||e[o]}function I(e){var t;if("ABCH"===e)t=-2;else{var i=n.getService(e);t=i?i.getRank():9999}return t}function $(e){var t,i,r=0;if(e[c]){for(t=0,i=e[c].length;i>t;t++){var o=n._categoryHash.get(e[c][t]);if(o&&o._d[2]){r=1;break}}e[u]=r}var s=e[a],l=s[0][16]||e[14]||0;for(t=1,i=s.length;i>t;t++){var d=s[t][16]||e[14]||0;l>d&&(l=d)}e[14]=l}function k(e,t){for(var n=-1,i=e[a],r=0,o=i.length;o>r;r++)if(S(e,r)===t){n=r;break}return n}function L(e){for(var t=e[a],n=e[o],i=0,r=y.length;r>i;i++){for(var s=y[i],l=s.mask,c=s.personFields,u=s.contactFields,d=s.arrayIndex,f=s.isArray,g=!1,h=0,v=t.length;v>h;h++){var m=t[h];if(m[p]&l){if(g=!0,f)for(var _=0,b=c.length;b>_;_++){var w=e[c[_]];w&&(m[u[_]]||(m[u[_]]=[]),m[u[_]][d]=w[d])}else for(var C=0,S=c.length;S>C;C++)m[u[C]]=e[c[C]];m[p]=m[p]&~l}}if(g)for(var I=0,$=s.personFields.length;$>I;I++)f?e[c[I]]&&(e[c[I]][d]=null):e[c[I]]=null}e[o]=n}function M(e,t,n,i,r){for(var o=!0,a=0,s=n.length;s>a;a++){var l=e[n[a]];i&&l&&(l=l[r]),l&&(t[a]=l,o=!1)}return o}function P(e,t,n,i){for(var r=0,o=t.length;o>r;r++){var a=t[r];e[a]&&(n?i<e[a].length&&(e[a][i]=null):e[a]=null)}}function A(e,t,n,i,o,a){for(var s=!0,l=0,c=n.length;c>l;l++){var u=e[n[l]];i&&u&&(u=u[o]);var d=t[l];if(a){if(!a(u,d)){s=!1;break}}else if((typeof u!==r||typeof d!==r)&&u!==d){s=!1;break}}return s}function D(e){L(e),N(e),$(e)}function N(e){for(var t=e[o],n=0,i=f;i>n;n++)b[n]&&delete e[n];e[o]=t,e[35]=(e[35]||0)+1;for(var r=0,s=y.length;s>r;r++){for(var l=y[r],c=l.mask,u=e[a],d=[],g=l.contactFields,h=l.personFields,v=l.isArray,m=l.arrayIndex,_=l.comparer,w=M(e,d,h,v,m),C=0,S=u.length;S>C;C++){var I=u[C];w&&(w=M(I,d,g,v,m)),!w&&A(I,d,g,v,m,_)&&(I[p]=(I[p]||0)|c,P(I,g,v,m))}if(l.isArray&&!e[h[0]]&&(e[h[0]]=[]),!w)for(var $=0,k=Math.min(h.length,d.length);k>$;$++)l.isArray?e[h[$]][l.arrayIndex]=d[$]:e[h[$]]=d[$]}}function E(e){for(var t=e.clone(),n=0,i=t.length;i>n;n++){var r=t[n];"object"==typeof r&&r instanceof Array&&(t[n]=E(r))}return t}var B=this;B.apply=function(e){var t=[],r=i[0],o=r[3],a=r[4],c=r[5],u=r[6],f=r[7],g=s(u,e);t.push(l(f,n.services,n.$services,n._serviceHash,20,function(e){return new T.Service(e)})),t.push(l(a,n.categories,n.$categories,n._categoryHash,3,function(e){return new T.Category(e)})),t.push(l(c,n.groups,n.$groups,n._groupHash,5,function(e){return new T.Group(e)})),t.push(d(o));for(var p=0,h=t.length;h>p;p++)if(null!==t[p]){if(e){var v=t[p];if(v.$event.triggerHandler(n.changedEventName,v),null!=v.changed)for(var m=0;m<v.changed.length;m++)v.changed[m].$changes.triggerHandler(n.changedEventName)}g=!0}return g},B.flatten=function(e){var t=E(e._d);return L(t),new T.Person(t,n.names)},B.clone=function(e){var t=E(e._d);return new T.Person(t,n.names)},B.dedupe=function(e){var t=E(e._d);return N(t),new T.Person(t,n.names)},B.sortContactsByRank=function(e){m(e._d[1]),e._update(e._d)}}function t(e,t,n,i){var r=this;r.$event=e,r.added=t,r.changed=n,r.removed=i}function n(e,t,n,i,r,o){var a=this;a.mask=e,a.personFields=t,a.contactFields=n,a.isArray=i,a.arrayIndex=r,a.comparer=o}function i(e,t){var n=!1;return e&&t&&e.length===t.length&&(n=!0,e.forEach(function(e,i){t[i]!=e&&(n=!1)})),n}for(var r="undefined",o=0,a=1,s=4,l=5,c=12,u=13,d=24,f=35,g=0,p=2,h=9,v=10,m=25,_=[6,7,9,8,15],y=[new n(1,[o],[g]),new n(4,[11],[12]),new n(8,[2,3,19,20,17,18,21,22,30,31],[7,8,20,21,19,18,22,23,31,32]),new n(16,[10,23,28],[11,24,29]),new n(32,[s],[h],1,0),new n(64,[s],[h],1,1),new n(128,[s],[h],1,2),new n(256,[l],[v],1,0),new n(1<<23,[l],[v],1,8),new n(512,[l],[v],1,1),new n(1024,[l],[v],1,2),new n(2048,[l],[v],1,3),new n(4096,[l],[v],1,4),new n(16384,[l],[v],1,6),new n(8192,[l],[v],1,5),new n(32768,[l],[v],1,7),new n(1<<24,[l],[v],1,9),new n(1<<25,[l],[v],1,10),new n(65536,[d],[m],1,0,i),new n(1<<17,[d],[m],1,1,i),new n(1<<18,[d],[m],1,2,i),new n(1<<20,[25,26],[26,27]),new n(1<<21,[27],[28]),new n(1<<22,[29],[30]),new n(1<<19,[16],[17],0,0,i)],b=[],w=0,C=y.length;C>w;w++)for(var S=y[w].personFields,I=0,$=S.length;$>I;I++)b[S[I]]||(b[S[I]]=1);var k=window,L=k.wLive,T=L.People,x=T.ContactState;T.DeltaSync=e,L.People.DeltaSyncEvent=t}()}),define("syncclient",["deltasync"],function(){!function(){function e(e,b,S,I,$){function k(e,t,n,i){for(var r,o=!0,a=null,s=0,l=B.length;l>s;s++){r=B[s];var f=r[h],m=r[d];if(f===e){m||(o=!1,a=r);break}if(e===u&&f===c&&!m){o=!1,a=r;break}}o?(r={},r[h]=e,r[g]=[t],r[p]=[n],r[v]=i,r[d]=!1,B.push(r)):a&&(t||n)&&(t&&a[g].push(t),n&&a[p].push(n),i&&(a[v]=i)),L()}function L(){function t(e,t,n){S.lastFullSync=S.lastDeltaSync=new Date,E.resetTimers(!1),T(t),x(n),S._personDetailsHash.clear(),E.fullSyncRequired=!1,E.deltaSyncRequired=!1,b.setFullAb(t,I[v],S.lastFullSync),B.shift(),M(I[g],"fsSuccess"),L()}function n(e,t){C(t,!1)}function m(n,r,o){S.lastDeltaSync=new Date,b.setLastDeltaSync(S.lastDeltaSync),E.resetTimers(!1);
var a=o[0];if(a[8])t(n,r,o);else{b.removeDeltaSyncRequired(),y.setSessionCookie(i,null);var s=new w.DeltaSync(e,S,o),c=s.apply(!0);if(c){var u=a[0];S.syncKey=u,b.setAbDelta(r,u);var d=b.getDeltaSyncCount()+1;b.setDeltaSyncCount(d),d>=l&&(E.fullSyncRequired=!0,b.setFullSyncRequired(!0))}E.deltaSyncRequired=!1,B.shift(),M(I[g],"dsSuccess"),L()}}function _(e,t){C(t,!0)}function C(e,t){if(I[f]=(I[f]||0)+1,I[f]>=s||e===r||e===o||e===a){var n=t?"dsFailure":"fsFailure";B.shift(),t?S.lastDeltaSync=new Date:(S.lastFullSync=new Date,b.setLastFullSync(S.lastFullSync)),E.resetTimers(t,!0),M(I[p],n,[e])}else I[d]=!1;L()}if(0!==B.length){var I=B[0];I[d]||I[h]===u&&W||(I[h]===c?e.fullSync(t,n,I[v]):I[h]===u&&e.deltaSync(S.syncKey,m,_,I[v]))}}function T(e){for(var t=0,n=0,i=S.persons.length;i>n;n++){var r=S.persons[n]._d[1];r&&r.length&&(t+=r.length)}var o={contactCount:t,responseLength:e.length};C.logDetails("Pwc_FullSync",o),_.reportEvent("View.WLPeopleCache.FullSync",o)}function x(e){for(var t=e[0]||[],n=t[3]||[],i=[],r=0;r<n.length;r++)i[r]=new w.Person(n[r],S.names);for(var o=t[4]||[],a=[],s=0;s<o.length;s++)a[s]=new w.Category(o[s]);for(var l=t[5]||[],c=[],u=0;u<l.length;u++)c[u]=new w.Group(l[u]);for(var d=t[7]||[],f=[],g=0;g<d.length;g++)f[g]=new w.Service(d[g]);var p=new w.Settings(t[6]||[]);S._applyFull(i,a,c,f,p),S.syncKey=t[0]}function M(e,t,n){n=n||[];for(var i=0;i<e.length;)P(e[i],t+"["+i+"]",n),i++;e.splice(0,e.length)}function P(e,t,n){if(e)try{n&&n.length>0?e.apply(null,n):e()}catch(i){C.logError("Pwc_Callback"+t+"Error",i)}}function A(){N=!0}function D(){N=!1,E.deltaSyncRequired&&E.queueDelta()}var N,E=this,B=[],R=new w.IdleTimer(A,D),W=!1,j=0,F=null,O=null;E.deltaSyncRequired=!1,E.fullSyncRequired=!1,E.applyFull=function(t){var n=e.parseAb(t);x(n)},E.applyDelta=function(t){var n=e.parseAb(t),i=new w.DeltaSync(e,S,n);i.apply()},E.queueFull=function(e,n,i){function r(){a&&C.stopScenario(i,!0),e&&e()}function o(e){a&&C.stopScenario(i,!1,e),n&&n()}C.logAction("Pwc_FullSyncQueued");var a=!i;i=i||C.startScenario(t),k(c,r,o,i)},E.queueDelta=function(e,t,i){function r(){a&&C.stopScenario(i,!0),e&&e()}function o(e){a&&C.stopScenario(i,!1,e),t&&t()}if(C.logAction("Pwc_DeltaSyncQueued"),b.setDeltaSyncRequired(!0),S.isReady&&!N){if(E.fullSyncRequired)E.queueFull(e,t,i);else{var a=!i;i=i||C.startScenario(n),k(u,r,o,i)}E.deltaSyncRequired=!1}else E.deltaSyncRequired=!0},E.pause=function(){W=!0},E.resume=function(){W=!1,L()},E.resetTimers=function(e,t){if(t){if(++j>=3)return}else j=0;var n=new Date,i=I,r=S.lastFullSync||n,o=S.lastDeltaSync||r;e=e||!1,e||(null!==F&&m.clearTimeout(F),i=Math.max(i-(n.getTime()-r.getTime()),0),F=m.setTimeout(function(){E.queueFull()},i)),null!==O&&m.clearTimeout(O);var a=Math.max($-(n.getTime()-o.getTime()),0);i>$&&(O=m.setTimeout(function(){E.queueDelta()},a))},E.dispose=function(){R&&R.dispose(),R=null,B=[]}}var t="FullSync",n="DeltaSync",i="wpd",r="InvalidPassportUser",o="PassportAuthFail",a="MissingTicket",s=3,l=20,c="full",u="delta",d="inProgress",f="attempts",g="successCallbacks",p="failureCallbacks",h="requestType",v="qosScenario",m=window,_=m.$BSI,y=m.$Cookie,b=m.wLive,w=b.People,C=w.Reporter;w.SyncClient=e}()}),define("client",["syncclient"],function(){!function(e){function t(t,a,s){var u=this;u.fullSync=function(e,t,n){a.queueFull(e,t,n)},u.deltaSync=function(e,t,n){a.queueDelta(e,t,n)},u.pauseDeltaSync=function(){a.pause()},u.resumeDeltaSync=function(){a.resume()},u.processABChangedEvent=function(t){c.logAction("Pwc_ProcessABChangedEvent");var n=!0;if(t)try{var i=e(e.parseXML(t)),r=i.find("LastModifiedDate");n=Date.parse(s.syncKey)!=Date.parse(r.text()),n||c.logAction("Pwc_ProcessABChangedNoDeltaSyncRequired")}catch(o){c.logError("Pwc_ProcessABChangedFailedEvent",o)}n&&a.queueDelta()};var d={};u.loadPersonDetails=function(e,n,i,o){function a(t,n,i){if(i.length<1)return void u(t,"InvalidResponseArray");var r=new l.Person(i[0],s.names);s._personDetailsHash.update([r],!0),f&&c.stopScenario(o,!0);for(var a=0;a<p.successCallbacks.length;a++)p.successCallbacks[a](r);d[e]=null}function u(t,n){c.logDetails("Pwc_DetailsData",{contactId:e,errorCode:n}),f&&c.stopScenario(o,!1,n);for(var i=0;i<p.failureCallbacks.length;i++)p.failureCallbacks[i](t,n);d[e]=null}var f=!o,g=!1;d[e]||(d[e]={successCallbacks:[],failureCallbacks:[]},g=!0);var p=d[e];n&&p.successCallbacks.push(n),i&&p.failureCallbacks.push(i),g&&(o=o||c.startScenario(r),t.loadPersonDetails(e,a,u,o))},u.loadAllPersonDetails=function(e,n,i,r){function a(e,t,i){if(i.length<1)return void u(e,"InvalidResponseArray");for(var o=i[0],a=[],f=0;f<o.length;f++)a[f]=new l.Person(o[f],s.names);s._personDetailsHash.update(a,!0),d&&c.stopScenario(r,!0),n&&n()}function u(e,t){d&&c.stopScenario(r,!1,t),i&&i()}var d=!r;r=r||c.startScenario(o),t.loadAllPersonDetails(e,a,u,r)},u.loadProfiles=function(e,r,o,a){function l(e,t,n){v++;var i=[],o=[];s._addProfiles(t);for(var l=0;l<n.length;l++)s.getPerson(n[l])?i.push(n[l]):o.push(n[l]);v>=h&&m&&c.stopScenario(a,!y,_),r&&r(i,o)}function u(e,t,n){v++,y=!0,_=t,v>=h&&m&&c.stopScenario(a,!y,_),o&&o(n)}for(var d=[],f=[],g=0,p=e.length;p>g;g++)s.getPerson(e[g])?f.push(e[g]):d.push(e[g]);var h=0,v=0,m=!1,_=null,y=!1;if(d.length>0)for(m=!a,a=a||c.startScenario(i);d.length>0;){var b=d.length>n?n:d.length,w=d.splice(0,b);t.loadProfiles(w,function(e,t){l(e,t,w)},function(e,t){u(e,t,w)},a)}(0==d.length||f.length>0)&&r&&r(f,[])},u.blockOrUnblockMessenger=function(e,n,i,r){t.blockOrUnblockMessenger(e,n,i,r)},u.dispose=function(){t=null,a=null,s=null}}var n=122,i="GetProfiles",r="PersonDetails",o="AllPersonDetails",a=window,s=a.wLive,l=s.People,c=l.Reporter;l.Client=t}(window.originaljQuery||jQuery)}),define("networkid",["client"],function(){!function(){var e=window.wLive.People.NetworkID=function(){};e.skype="SKYPE",e.windowsLive="WL",e.shortCircuit="SCD",e.facebook="FB",e.google="GOOG"}()}),define("sortorder",["networkid"],function(){!function(){var e=window.wLive.People.SortOrder=function(){};e.none=0,e.displayName=1,e.messagingRelevance=2,e.peopleRelevance=3}()}),define("cache",["sortorder"],function(){!function(e){function t(t,c,g){function p(e,t){e.splice(0,e.length),e.addRange(t||[])}function h(e,t,i){if(e)for(var r=0,o=e.length;o>r;r++){var a=e[r][t];if(typeof a!==n&&a===i)return e[r]}return null}function v(e,t){var n=[];if(e.filter)n=e.filter(t);else for(var i=0;i<e.length;i++)t(e[i])&&n.push(e[i]);return n}function m(){_.profiles.splice(0,_.profiles.length),_.persons.splice(0,_.persons.length),_.categories.splice(0,_.categories.length),_.groups.splice(0,_.groups.length),_.services.splice(0,_.services.length),I.clear(),y.clear(),w.clear(),C.clear(),S.clear()}var _=this;_.readyEventName=r,_.failureEventName=i,_.disposeEventName=o,_.changedEventName=a,_.fullSyncEventName=s,_.persons=[],_.categories=[],_.groups=[],_.services=[],_.profiles=[],_.settings=new u.Settings([]);var y=new d(_.persons),b=new d([]),w=new d(_.categories),C=new d(_.groups),S=new d(_.services),I=new d(_.profiles),$=[],k=[],L=!1;_.$persons=e({}),_.$categories=e({}),_.$groups=e({}),_.$services=e({}),_.$events=e(_),_.client=null,_.names=new u.Names(t.isLastNameFirst,t.nameType,t.nns,t.profileUrl,t.photosUrl),_.isReady=!1,_.isFailed=!1,_.lastFullSync=null,_.lastDeltaSync=null,_.syncKey=null,_._personHash=y,_._personDetailsHash=b,_._categoryHash=w,_._groupHash=C,_._serviceHash=S,_.getMe=function(){return _.getPerson(l.$Config.cid)},_.getPerson=function(e){var t=y.get(e);return null===t&&(t=I.get(e)),t},_.getPersons=function(e,t){var i=_.persons.slice(0);if(e){var r;typeof e.isOnline!==n&&(r=e.isOnline?function(e){return e.isOnline()}:function(e){return!e.isOnline()},i=v(i,r)),typeof e.isIMCapable!==n&&(r=e.isIMCapable?function(e){return e.getMessagingAddresses().length>0}:function(e){return 0==e.getMessagingAddresses().length},i=v(i,r)),typeof e.hasPicture!==n&&(r=e.hasPicture?function(e){return e.getUserTile()&&!0}:function(e){return!e.getUserTile()&&!0},i=v(i,r)),!t||t!=f.messagingRelevance&&t!=f.peopleRelevance||(r=t==f.messagingRelevance?function(e){return e.getMessagingRelevance()>=0}:function(e){return e.getPeopleRelevance()>=0},i=v(i,r)),e.networks&&e.networks instanceof Array&&e.networks.length>0&&(r=function(t){for(var n=t.getContacts(),i=0;i<n.length;i++)if(e.networks.contains(n[i].getSourceId()))return!0;return!1},i=v(i,r))}var o=t?t:f.none;switch(o){case f.displayName:i.sort(function(e,t){return e.getDisplayNameWithFallback().localeCompare(t.getDisplayNameWithFallback())});break;case f.messagingRelevance:i.sort(function(e,t){return t.getMessagingRelevance()-e.getMessagingRelevance()});break;case f.peopleRelevance:i.sort(function(e,t){return t.getPeopleRelevance()-e.getPeopleRelevance()});break;case f.none:}return i},_.getFavorites=function(){for(var e=[],t=0,n=_.categories.length;n>t;t++)if(_.categories[t].getIsFavorite()){e=_.getPersonsByCategory(_.categories[t].getId());break}return e},_.getPersonsByEmail=function(e){var t=[];if(e){e=e.toLowerCase();for(var n=0,i=_.persons.length;i>n;n++)for(var r=_.persons[n].getContactEmails(),o=0,a=r.length;a>o;o++)if(r[o]&&r[o].toLowerCase()===e){t.push(_.persons[n]);break}}return t},_.getPersonsByCategory=function(e){for(var t=[],n=0,i=_.persons.length;i>n;n++){var r=_.persons[n]._d[12];r&&r.contains(e)&&t.push(_.persons[n])}return t},_.getPersonsByService=function(e){for(var t=[],n=0,i=_.persons.length;i>n;n++){var r=_.persons[n],o=h(r._d[1],4,e);o&&t.push(r)}return t},_.getPersonDetails=function(e){var t=b.get(e);return t},_.removePersonDetails=function(e){var t=b.get(e);t&&b.remove(t)},_.getContactIdsForMri=function(e){var t=[];if(e){e=e.toLowerCase();for(var n=0,i=_.persons.length;i>n;n++)for(var r=_.persons[n]._d[1],o=0,a=r.length;a>o;o++){var s=r[o];if(s[3]){var l=s[3][0];if(l)for(var c=0,u=l.length;u>c;c++)if(l[c].toLowerCase()==e){t.push(s[0]);break}}}}return t},_.getCategory=function(e){var t=w.get(e);return t},_.getService=function(e){var t=S.get(e);return t},_.reset=function(){m(),c.clearAb(),c.clearHost()},_.callWhenReady=function(e,t){function n(){_.$events.unbind(i,n);for(var e=0;e<k.length;e++)k[e]();k=[]}function o(){_.$events.unbind(r,o);for(var e=0;e<$.length;e++)$[e]();$=[]}_.isReady&&e?e():(0===$.length&&_.$events.bind(r,o),$.push(e),t&&(_.isFailed?t():(0===k.length&&_.$events.bind(i,n),k.push(t))))},_.removeWhenReadyCallback=function(e,t){if($){var n=$.indexOf(e);-1!=n&&$.splice(n,1),t&&(n=k.indexOf(t),-1!=n&&k.splice(n,1))}},_.dispose=function(){L=!0,_.$events.triggerHandler(o),_._disposeCache()},_.processABChangedEvent=function(e){_.client.processABChangedEvent(e)},_._flatten=function(e){var t=new u.DeltaSync(g,this,null);return t.flatten(e)},_._clone=function(e){var t=new u.DeltaSync(g,this,null);return t.clone(e)},_._sortContactsByRank=function(e){var t=new u.DeltaSync(g,this,null);t.sortContactsByRank(e)},_._dedupeContacts=function(e){var t=new u.DeltaSync(g,this,null);return t.dedupe(e)},_._addProfiles=function(e){for(var t=[],n=0;n<e.length;n++){var i=new u.Person(e[n],_.names);if(I.get(i.getId())){for(var r=0;r<_.profiles.length;r++)if(_.profiles[r].getId()==i.getId()){_.profiles[r]=i;break}}else _.profiles.push(i),t.push(i)}I.update(t)},_._applyFull=function(e,t,n,i,r){p(_.persons,e),p(_.categories,t),p(_.groups,n),p(_.services,i),_.settings=r,y.clear(),w.clear(),C.clear(),_.isReady&&_.$events.triggerHandler(s)},_._getProfile=function(e){var t=I.get(e);return t},_._find=function(e){function t(e,t){for(var n=0;n<e.length;n++){var i=e[n].getDisplayName();if(i&&t&&i.toLowerCase().indexOf(t.toLowerCase())>=0)return e[n]}return null}var n=t(_.persons,e);return n||t(_.profiles,e)},_._snapshot=function(){function e(t){if(t)if(t instanceof Array)for(var n=0;n<t.length;n++)e(t[n]);else{var i=[];for(var r in t)r.startsWith("get")&&"getPerson"!=r&&"function"==typeof t[r]&&i.push(r);for(var o=0;o<i.length;o++){var a=t[i[o]]();t[i[o].substr(3)]=a,a&&("function"==typeof a||a instanceof Array)&&e(a)}}}e(_.persons),e(_.profiles),e(_.categories),e(_.groups),e(_.services),e(_.settings)},_._disposeCache=function(){L||(_.$events.unbind(r),_.$events.unbind(i),_.$events.unbind(s),_.$persons.unbind(a),_.$categories.unbind(a),_.$groups.unbind(a),_.$services.unbind(a),_.profiles=null,_.services=null,_.categories=null,_.groups=null,_.persons=null,_.settings=null)}}var n="undefined",i="failure",r="ready",o="dispose",a="changed",s="fullSync",l=window,c=l.wLive,u=c.People,d=u.LazyHash,f=u.SortOrder;u.Cache=t}(window.originaljQuery||jQuery)}),define("pwcinitializer",["cache"],function(){!function(e){function t(){function t(){if(!w)if(T.isReady)g($,!0);else{var e=k.getFullSyncRequired();if(f.logAction("Pwc_InitCacheFullSyncRequired"),!e&&s()){var t=S.deltaSyncInterval?parseInt(S.deltaSyncInterval):3e5;x.deltaSyncRequired&&(T.lastDeltaSync=new Date((new Date).getTime()-t),x.deltaSyncRequired=!1,f.logAction("Pwc_InitCacheDeltaSyncRequired")),x.resetTimers(),v()}else c()}}function s(){var e=!1,t=(new Date).getTime(),n=k.clearAbErrorCode(),r=k.getFullAb();if(n=k.clearAbErrorCode()||n,r){try{x.applyFull(r),T.lastFullSync=k.getLastFullSync(),T.lastDeltaSync=k.getLastDeltaSync();for(var a=k.getAbDeltas(),s=0;s<a.length;s++)x.applyDelta(a[s].json);e=!0,x.deltaSyncRequired=k.getDeltaSyncRequired()||"1"===h.getSessionCookie(o)}catch(l){f.logError("Pwc_RestoreAbError",l),n=f.getErrorCode(l)}e||k.clearAb()}return f.addStats(i,t,n,$),e}function c(){if(S.initOnPageLoad)if(p.isLoading()){var e,t=!1;e=function(){t||(e&&(p.removeLoadedCallback(e),t=!0),u())},p.addLoadedCallback(e)}else u();else g($,!0)}function u(){T.isReady?x.resetTimers():S.fullSyncDelay?l.setTimeout(function(){M.fullSync(v,m,$)},S.fullSyncDelay):M.fullSync(v,m,$)}function v(){T.isReady=!0,T.isFailed=!1,h.setSessionCookie(a,"1"),g($,!0),T.$events.triggerHandler(T.readyEventName)}function m(){T.isReady=!1,T.isFailed=!0,h.setSessionCookie(a,null),g($,!1,"fullSyncFailure"),T.$events.triggerHandler(T.failureEventName)}function _(){T.reset()}function y(){w=!0,l.$Logout&&S.enabled&&!S.fullyDisabled&&C.hcid&&l.$Logout.remove(_),e(l).unbind(r,y),k&&(k.dispose(),k=null),T&&(T.$events.unbind(T.disposeEventName,y),T._disposeCache(),T=null),x&&(x.dispose(),x=null)}var b=this,w=!1,C=l.$Config||{},S=C.ContactCache||{},I=C.mkt?C.mkt.toLowerCase():"";f.isQosEnabled=S.qos;var $,k=new d.Store(S.peopleApiBaseUrl,S.localStorage,C.hcid,I,t),L=new d.ServiceProxy(k,I,S.peopleApiBaseUrl,S.peopleApiAppId,C.handlerBaseUrl,S.canary),T=new d.Cache(S,k,L),x=new d.SyncClient(L,k,T,S.fullSyncInterval,S.deltaSyncInterval),M=new d.Client(L,x,T);T.client=M,T.$events.bind(T.disposeEventName,y),b.cache=T,S.enabled&&!S.fullyDisabled&&C.hcid&&($=f.startScenario(n),l.$Logout&&l.$Logout.add(_),k.init($))}var n="Init",i="RestoreAB",r="unload",o="wpd",a="wpc",s="$pwc",l=window,c=l.$Do,u=l.wLive,d=u.People,f=d.Reporter,g=f.stopScenario,p=l.$BSI,h=l.$Cookie,v=new t;l[s]=v.cache,c.register(s,0,!0)}(window.originaljQuery||jQuery)}),define("iccommondata",["jquery-1.7.2","pagestats","pwcinitializer"],function(){!function(){function e(){function e(){return i||(i=t.ic_common_data),i||{}}function n(){return r||(r=t.ic_menu_data),r||{}}var i,r,o=this;o.getActionData=function(e){return n()[e]},o.getReturnUrl=function(){return e().ru||location.href},o.getActionDescription=function(e){return n()[e][0]||""}}var t=window,n=t.wLive||{};n.IC=n.IC||{};var i=n.IC;i.ICCommonData=new e}()}),define("ictemplate",["iccommondata"],function(){!function(e){function t(t,n,i){function r(e){return c>e?n[e]:null}function o(){return l++}var a,s=this,l=0,c=n.length;s.id=t,s.html=i.html(),s.getNewId=function(){return t+o()},s.getCid=function(){return r(0)},s.getShowCard=function(){return"1"==r(1)},s.getMenuActions=function(){return r(2)},s.getName=function(){return r(3)},s.getEmail=function(){return r(6)},s.getUserTileUrl=function(){return r(17)},s.getTileSize=function(){if(!a){var n=e("#{0}_{1}".format(t,"usertilecontainer"),i);if(n.length>0){var r=n.attr("class").split(" ");if(r&&r[1])return r[1].replace("c_ic_img_","")}else a="none"}return a},s.dispose=function(){i=null,n=null}}var n=window,i=n.wLive;i.IC=i.IC||{};var r=i.IC;r.ICTemplate=t}(window.originaljQuery||jQuery)}),define("ictemplates",["ictemplate"],function(){!function(e){function t(){function t(e){if(e.startsWith("icTm")){var t=e.indexOf("_template"),n=t>=0?t:e.length;return e.substring(4,n)}return e}var i=this,o={};i.init=function(){n.icPwcData&&i.addTemplates(n.icPwcData)},i.addTemplates=function(n){if(n)for(var i in n){var a=t(i);o[a]&&o[a].dispose(),o[a]=new r.ICTemplate(i,n[i],e("#{0}_template".format(i)))}},i.getTemplate=function(e){return e=t(e),o[e]?o[e]:null},i.dispose=function(){for(var e in o)o[e].dispose(),delete o[e];o=null},i.init()}var n=window,i=n.wLive;i.IC=i.IC||{};var r=i.IC;r.ICTemplates=t}(window.originaljQuery||jQuery)}),define("icaction",["ictemplates"],function(){!function(e){function t(e,n){var i=this;i.id=t.id,i.isEnabled=function(){return e&&e.getContactEmails().length>0||n},i.getAvailableOptions=function(){var t=[],i=e?e.getContactEmails():[];n&&t.push({id:n,displayName:n});for(var r=0;r<i.length;r++)n&&i[r]==n||t.push({id:i[r],displayName:i[r]});return t},i.performAction=function(e){if(p.getActionData(i.id)){var t=i.getAvailableOptions(),n=e||t.length>0&&t[0].id;if(n){var r=p.getActionData(i.id)[1].replace("$address$",n).replace("$ru$",encodeURIComponent(p.getReturnUrl())),o=c.wLive&&c.wLive.Hotmail?null:"_blank";$BSI.navigateTo(r,o)}}},i.dispose=function(){}}function n(e){var t=this;t.id=n.id,t.isEnabled=function(){return e&&!e.isMe()&&e.getId()},t.getAvailableOptions=function(){return[]},t.performAction=function(n){if(e&&p.getActionData(t.id)){var i=p.getActionData(t.id)[1].replace("$contactid$",e.getId());c.open(i,"_blank")}},t.dispose=function(){}}function i(e){var t=this;t.id=i.id,t.isEnabled=function(){return e&&e.isMe()},t.getAvailableOptions=function(){return[]},t.performAction=function(e){if(p.getActionData(t.id)){var n=p.getActionData(t.id)[1];c.open(n,"_blank")}},t.dispose=function(){}}function r(e,t,n){var i,o=this;o.id=r.id,o.setWebImContact=function(e){i=e},o.isEnabled=function(){return i&&e&&!e.isMe()&&e.canChat(t)},o.getAvailableOptions=function(){var t=[];if(e&&i)for(var n=e.getMessagingAddresses(),r=0;r<n.length;r++)n[r].canChat()&&t.push({id:n[r].get_id(),displayName:n[r].get_network().get_name()});return t},o.performAction=function(t,r){var o=s(e.getMessagingAddresses(),t);$WLXIM.startConversation(i,o?o.get_type():0,a(n),o?o.get_network():null,r)},o.dispose=function(){}}function o(e,t,n,i){var r,c=this;c.id=t?o.audioId:o.videoId,c.setWebImContact=function(e){r=e},c.isEnabled=function(){return r&&e&&!e.isMe()&&e.canCall(n)},c.getAvailableOptions=function(){var t=[];if(e&&r)for(var n=e.getMessagingAddresses(),i=0;i<n.length;i++)n[i].canCall()&&t.push({id:n[i].get_id(),displayName:n[i].get_network().get_name()});return t},c.performAction=function(n,o){var c=s(e.getMessagingAddresses());t?$WLXIM.startVideoCall(r,a(i),c,o):$WLXIM.startAudioCall(r,a(i),c,o),l()},c.dispose=function(){}}function a(e){return e=e||f,g[e]||e}function s(e,t){var n=null;if(t)for(var i=0;!n&&i<e.length;i++)e[i].get_id()==t&&(n=e[i])}function l(){function t(){e(n).unbind("pluginLoaded",t),e(n).unbind("callFinished",t),$header.hideLoading()}var n=window.Microsoft.Live.Messenger.Services.SkyJSHelper;n.skypeEnabled&&$header&&($header.showLoading(),e(n).bind("pluginLoaded",t),e(n).bind("callFinished",t))}var c=window,u=c.wLive,d=u.IC,f="identityControl",g={PeoplePane:"peoplePane"},p=d.ICCommonData;d.ICActionEmail=t,t.id="se",d.ICActionContactDetails=n,n.id="cd",d.ICActionEditProfile=i,i.id="ep",d.ICActionSendIm=r,r.id="si",d.ICActionCall=o,o.videoId="vc",o.audioId="ac"}(window.originaljQuery||jQuery)}),define("icpresence",["icaction"],function(){!function(e){function t(t,i){function s(){d=n.$WLXIM,d&&f&&!h&&!y&&(e(f).bind(o,c),v[r.ICActionEmail.id]=new r.ICActionEmail(f,g),v[r.ICActionEditProfile.id]=new r.ICActionEditProfile(f),v[r.ICActionContactDetails.id]=new r.ICActionContactDetails(f),v[r.ICActionSendIm.id]=new r.ICActionSendIm(f,t,i),v[r.ICActionCall.videoId]=new r.ICActionCall(f,!1,t,i),v[r.ICActionCall.audioId]=new r.ICActionCall(f,!0,t,i),h=!0,l(),$Do.when("$WLXIM.UserSignedIn",0,function(){!y&&f.getId()&&(u=f.isMe()?d.user.get_contact():d.user.findContactById(f.getContacts()[0].getId()),u&&(v[r.ICActionSendIm.id].setWebImContact(u),v[r.ICActionCall.videoId].setWebImContact(u),v[r.ICActionCall.audioId].setWebImContact(u),l()))}))}function l(){var t=p.isOnline(),n=m!=t;m=t;for(var i in v){var r=v[i].isEnabled();n=n||r!=_[i],_[i]=r}n&&e(p).trigger(a)}function c(e){l()}var u,d,f,g,p=this,h=!1,v={},m=!1,_={},y=!1;_[r.ICActionEmail.id]=!1,_[r.ICActionContactDetails.id]=!1,_[r.ICActionEditProfile.id]=!1,_[r.ICActionSendIm.id]=!1,_[r.ICActionCall.videoId]=!1,_[r.ICActionCall.audioId]=!1,p.actions=v,p.setPerson=function(e,t){f=e,g=t,s()},p.isOnline=function(){return f&&f.isOnline(t)},p.dispose=function(){for(var t in v)v[t].dispose(),delete v[t];v=null,e(f).unbind(o,c),u=null,y=!0},$Do.when("wlxim",0,s)}var n=window,i=n.wLive,r=i.IC,o="changed",a="presenceChanged";r.ICPresence=t}(window.originaljQuery||jQuery)}),define("iccard",["icpresence"],function(){!function(e){function t(){if(!i){var t=e("#"+s);0==t.length?(i=e("<div>").prop("id",s),e("body").prepend(i),r.$Sutra&&sutra(i,d+"ICMenuList")):i=t}return i}function n(n,i){function o(){i&&e(i).bind(u,M)}function s(i){P=e("<ul>"),P.addClass(l),P.prop("id",n.id+"_menu_ul"),P.html(b()),w(),M(),t().append(P);var r={offset:{x:0,y:5},nofocus:1,hoverDelay:c,menuEl:P[0]};if($menu.create(i,0,r),A=P[0].binding,S(),D&&!D.isMe()){var o=x();o.Template=n.template.id,o.hasContactDetails=y(a.ICActionContactDetails.id),o.hasEmail=y(a.ICActionEmail.id),o.hasIM=y(a.ICActionSendIm.id),o.hasVideoVoiceCall=y(a.ICActionCall.videoId)||y(a.ICActionCall.audioId),$BSI.reportEvent("View.IC.Nav",o)}}function y(e){return i&&i.actions[e]&&i.actions[e].isEnabled()?1:0}function b(){var e="",t=y(a.ICActionContactDetails.id)?p:g,r=t.format(n.getName().encodeHtml(),n.getEmail().encodeHtml(),a.ICActionContactDetails.id);if(i){D&&D.isMe()&&(r=p.format(n.getName().encodeHtml(),_.getActionDescription(a.ICActionEditProfile.id).encodeHtml(),a.ICActionEditProfile.id));for(var o=0;o<v.length;o++){var s=v[o],l=_.getActionDescription(s).encodeHtml();e+=f.format(s,l,C(s))}}return r+e}function w(){r.$Sutra&&P&&P.length>0&&(sutra(P,d+"ICMenu"),sutra(e("#"+a.ICActionEditProfile.id,P),d+"ICMenuEditProfile"),sutra(e("#"+a.ICActionContactDetails.id,P),d+"ICMenuContactDetails"),sutra(e("#"+a.ICActionEmail.id,P),d+"ICMenuSendEmail"),sutra(e("#"+a.ICActionSendIm.id,P),d+"ICMenuStartIM"),sutra(e("#"+a.ICActionCall.videoId,P),d+"ICMenuVideoCall"),sutra(e("#"+a.ICActionCall.audioId,P),d+"ICMenuAudioCall"),sutra(e(".c_ic_menu_name",P),d+"ICMenuName"),sutra(e(".c_ic_menu_sub",P),d+"ICMenuSub"))}function C(t){var n;switch(t){case"si":n=h.IM;break;case"se":n=h.Mail;break;case"vc":n=h.Video;break;case"ac":n=h.Audio}return n?e($IS.CreateFromConfig("ic/icmenu2_gray.png,ic/icmenu2_gray.png,",n,$Config.imgsBase)).html():""}function S(){for(var t=0;t<v.length;t++)L(v[t]);e("#ep a",P).bind("click",function(){i.actions[a.ICActionEditProfile.id].performAction()}),e("#cd a",P).bind("click",function(){i.actions[a.ICActionContactDetails.id].performAction()})}function I(){for(var t=0;t<v.length;t++)k(v[t]);e("#ep a",P).unbind(),e("#cd a",P).unbind()}function $(){A&&(A.dispose(),A=null),P&&(I(),P.remove(),P=null)}function k(t){e("#"+t,P).unbind()}function L(t){function r(e){$IS.toggle(o[0],e-a),a=e}var o=e("#"+t,P),a=1;o.hover(function(){r(2)},function(){r(1)}),o.bind("mousedown",function(){r(3)}),o.bind("mouseup",function(){r(1)}),o.bind("mouseup",function(){r(1)}),i.actions[t]&&o.bind("click",function(e){e&&e.preventDefault(),i.actions[t].performAction(null,o[0]),N.hide();var r=x();r.IdentityControlNav=T(t),r.Template=n.template.id,$BSI.reportEvent("SelectClick.IC.Nav",r)})}function T(e){switch(e){case a.ICActionEditProfile.id:return"Profile";case a.ICActionContactDetails.id:return"CDMenu";case a.ICActionEmail.id:return"Email";case a.ICActionSendIm.id:return"IM";case a.ICActionCall.videoId:return"Video";case a.ICActionCall.audioId:return"Voice"}return"UnknownAction"}function x(){var e={},t={};if(D)for(var n=D.getContacts(),i=0;i<n.length;i++)t[n[i].getSourceId()]=!0;for(var r=0;r<m.length;r++)e[m[r]]=t[m[r]]||!1;return e}function M(){if(P&&i){for(var t=0;t<v.length;t++){var n=v[t],r=e("#"+n,P);i.actions[n]&&i.actions[n].isEnabled()?r.css("display",""):r.hide()}A&&A.update()}}var P,A,D,N=this;N.setPerson=function(e){D=e},N.show=function(e){P||s(e),A&&!A.isOpen()&&A.show()},N.hide=function(){A&&A.isOpen()&&A.hide()},N.toggleVisibility=function(){A&&A.toggleState()},N.dispose=function(){i&&(e(i).unbind(u,M),i=null),$()},o()}var i,r=window,o=r.wLive,a=o.IC,s="c_ic_menus",l="c_ic_menu c_m t_hovl",c=625,u="presenceChanged",d="$Sutra.Shared.",f='<li id="{0}" class="c_ic_menu_glyph"><a href="#" alt="{1}" tabindex="1" role="menuitem"><span class="is_c">{2}</span></a></li>',g='<li id="{2}"><span><div class="c_ic_menu_name">{0}</div><div class="c_ic_menu_sub">{1}</div></span></li>',p='<li id="{2}"><a href"#" tabIndex="1" role="menuitem"><div class="c_ic_menu_name">{0}</div><div class="c_ic_menu_sub">{1}</div></a></li>',h={Mail:"1,0,30,31,",IM:"32,0,30,31,",Audio:"63,0,30,31,",Video:"94,0,30,31,"},v=[a.ICActionEmail.id,a.ICActionSendIm.id,a.ICActionCall.videoId,a.ICActionCall.audioId],m=["ABCH","FB","GOOG","LI","MYSP","SINWE","SKYPE","SCD","TWITR","WL"],_=a.ICCommonData;a.ICCard=n}(window.originaljQuery||jQuery)}),define("ic",["iccard"],function(){!function(e){function t(t,u,d){function f(){var e=t.getTileSize();if(!x.isMe()&&("mxl"==e||"mxxl"==e)){var n=x.getContacts(),i=n.length>0?n[0].getId():null;i&&($pwc.getPersonDetails(i)?(M=$pwc.getPersonDetails(i),p(!0)):$pwc.client.loadPersonDetails(i,function(){M=$pwc.getPersonDetails(i),p(!0)}))}}function g(){if(A){var e=F;j=!1,W.deactivate(),W.render(),B.replaceWith(A),O=!0,e&&W.activate()}}function p(e){var t=S();$B.IE&&t&&t.indexOf("fbcdn")>0&&(t=void 0),!R||j&&!e||(j=!0,R.prop("src")==t?h():(R.bind("load",h),R.bind("error",v),t?R.prop("src",n.$ssl.ensureSSLImageUrl(t)):R.prop("src",R.prop("errsrc")||$icerrsrc)))}function h(){try{c[R.prop("src")]=1,R.attr("class","c_ic_tile");var e,t,n=0;t=R[0].naturalWidth,e=R[0].naturalHeight;var i=R.css("width"),r=R.css("height");if(1==t&&1==e||"1px"==i&&"1px"==r)return void v();var o=Math.round;if(t&&e&&t!=e)if(t>e){var a=parseInt(r),s=parseInt(i),l=o(t*(a/e));n=-o((l-s)/2),R.css({width:"auto","max-width":"none",left:n+"px"})}else R.css({height:"auto","max-height":"none"});R.css("visibility","")}catch(u){E&&E.logError("IC_OnUserTileLoad_Error",u)}}function v(){var e;try{e=R.parent(),R.remove();var t=R.attr("errsrc")||$icerrsrc;R.attr("src")!=t&&(R.attr("class","c_ic_tile").css("top","").css("left","").css("height","").css("width",""),setTimeout(function(){R.attr("src",t).css("visibility","")},0))}catch(n){E&&E.logError("IC_OnUserTileError_Error",n)}finally{null!=e&&e.append(R)}}function m(){var t=e(k("frame"),B),n=e(k("bar"),B),i=!d.hidePresence&&D.isOnline();t.length>0?$IS.setClass(t[0],i?l:s):(n.removeClass(i?s:l),n.addClass(i?l:s))}function _(){var t=e(k("bar"),B);t.css("visibility","inherit")}function y(){var t=$(),n=I();W.getShowICCard()&&x&&(t=""),e(k("frame_clip"),B).attr("title",t),e(k("usertile"),B).attr("alt",t);var i=e(k("name"),B);i.attr("title")&&i.attr("title",n)}function b(){return x&&x.getIsFavorite()}function w(){return d.showICCard&&t.getShowCard()}function C(){var e=d.name||x&&x.getDisplayNameWithFallback(),n=t.getName();return n="{0}"==n?null:n,e||n||""}function S(){var e=t.getUserTileUrl(),n=x&&x.isMe()&&!T(e)?e:null;return n||d.userTileUrl||M&&M.getUserTile()||x&&x.getUserTile()||t.getUserTileUrl()}function I(){var e=d.email;if(!e&&x){var n=x.getContactEmails();n.length>=0&&(e=n[0])}return e||t.getEmail()}function $(){if("none"==d.toolTipType)return"";var e;return e=d.toolTipType&&"email"!=d.toolTipType&&C()?C():I(),e||""}function k(e){return"#{0}_{1}".format(P,e)}function L(e){return!o||null!=e&&""!=e?e:'""'}function T(e){return e.indexOf("blueman")>=0}d=d||{};var x,M,P,A,D,N,E,B,R,W=this,j=!1,F=!1,O=!0,H=!1;W.person=null,W.pwcId=u,W.template=t,W.init=function(){W.id=P=t.getNewId(),W.namespace=d.namespace,D=new r.ICPresence(d.useActiveMessagingAddress),N=new r.ICCard(W,D),u&&$Do.when("$pwc",0,function(){$pwc.callWhenReady(function(){H||(E=i.People.Reporter,W.person=x=$pwc.getPerson(u),x&&(D.setPerson(x,I()),N.setPerson(x),y(),f()),A&&g())})})},W.render=function(){var n=C().encodeHtmlAttribute(),i=$().encodeHtmlAttribute();A=t.html.replace(new RegExp(t.id,"g"),P).format(n,"","",L(i));var r=S();if(c[r]){var o=e("<div></div>").html(A),a=e(k("usertile"),o);a.prop("src",r),a.addClass("c_ic_tile"),a.css("visibility",""),A=o.html()}return A},W.activate=function(n){if(!F&&!H){if(O){if(O=!1,B=n||e("#"+P),B.addClass("icpwc"),R=e(k("usertile"),B),y(),b()){var i=e(k("fstarp"),B);if(i.length>0){i.removeClass("c_ic_fstarp_hide");var r=e(k("name"),B);r.length>0&&r.parent().addClass("c_ic_name_fstar_"+t.getTileSize())}}W.getShowICCard()||e(k("usertilecontainer"),B).addClass("c_emptymenu"),_()}e(D).bind(a,m),m(),setTimeout(p,0),F=!0}},W.deactivate=function(){F&&!H&&(e(D).unbind(a,m),B&&(e(k("frame_clip"),B).unbind(".ic"),e(k("name"),B).unbind()),R&&R.unbind(),N.dispose(),N=new r.ICCard(W,D),F=!1)},W.isActive=function(){return F},W.getUserTileContainerElement=function(){return e(k("usertilecontainer"),B)},W.getPresence=function(){return D},W.dispose=function(){W.deactivate(),D&&(D.dispose(),D=null),B&&B.html(""),B=R=null,W.person=x=M=null,H=!0},W.getShowICCard=w,W.getName=C,W.getUserTileUrl=S,W.getEmail=I,W.getTooltip=$,W.init()}var n=window,i=n.wLive,r=i.IC,o=$B.IE,a="presenceChanged",s="c_ic_blueframe",l="c_ic_greenframe",c={};r.IC=t}(window.originaljQuery||jQuery)}),define("icmanager",["ic"],function(){!function(e){function t(){function t(e,t,n){var i=new r.IC(e,t,n);return a[i.id]=i,t&&(s[t]=s[t]||[],s[t].push(i)),n.namespace&&(l[n.namespace]=l[n.namespace]||[],l[n.namespace].push(i)),i}var i,o=this,a={},s={},l={},c=!1;o.init=function(){c||(c=!0,i=new r.ICTemplates,$Do.register("$icm",0,!0))},o.addTemplates=function(e){c&&i.addTemplates(e)},o.createICForPerson=function(e,n,r){if(!i)return null;r=r||{};var o=i.getTemplate(e);return n&&o?t(o,n,r):null},o.createNonContactIC=function(e,n,r){if(!i)return null;var o=i.getTemplate(e);return o?(r=r||{},r.email=n,t(o,null,r)):null},o.createICsFromCids=function(e,t,i,r){function a(t,n){var a=o.createICForPerson(e,n.getId()||t,r);i(c[t],a)}function s(e,t){for(var n=0;n<e.length;n++)a(e[n],l.getPerson(e[n]));for(n=0;n<t.length;n++)i(t[n],null)}var l,c={};$Do.when("$pwc",0,function(){l=n.$pwc,l.callWhenReady(function(){for(var e=[],n=0,i=t.length;i>n;n++){var r=t[n][0];if(c[r]=t[n][1],"0"!=r&&0!=r){var o=l.getPerson(r);o?a(r,o):e.push(r)}}e.length>0&&l.client.loadProfiles(e,s)})})},o.getICById=function(e){return a[e]||null},o.getICsForPerson=function(e){return s[e]},o.getICsForNamespace=function(e){return l[e]||[]},o.removeIC=function(e){if(delete a[e.id],e.pwcId){var t=e.pwcId;s[t]&&(s[t].remove(e),0==s[t].length&&delete s[t])}if(e.namespace){var n=e.namespace;l[n]&&(l[n].remove(e),0==l[n].length&&delete l[n])}e.dispose()},o.removeAllICsByNamespace=function(e){var t=l[e];if(t){t=t.clone();for(var n=0;n<t.length;n++)o.removeIC(t[n])}},o.removeAllICs=function(){for(var e in a)o.removeIC(a[e])},o.dispose=function(){e(n).unbind("unload",o.dispose),o.removeAllICs(),a=null,l=null,s=null,i&&i.dispose(),i=o.templates=null,n.$icm=null},e(n).bind("unload",o.dispose)}var n=window,i=n.wLive,r=i.IC;r.ICManager=t,n.$icm=new t,$Do.register("$icmCreated",0,!0)}(window.originaljQuery||jQuery)}),define("safelinks",["validateconfig","jquery-1.7.2","bsi"],function(){!function(e){function t(e,t){var i=t&&t.getAttribute("wrap");if(i){var l=n.$Config,c=l.WS||{},u=c.SL||{},d=u.url;
if(d){var f,g=i.split(o),p=g.slice(s).join(o),h={l:p,p:l.di,mkt:l.mkt};for(f=0;s>f;f++)g[f]&&(h[a[f]]=g[f]);t.href=d+"?"+r.serialize(h)}}}var n=window,i=n.$BSI,r=n.$Utility,o="|",a=["h","o","u","q1","q2","q3","q4","q5"],s=a.length;i.addNavCallback(t)}(window.originaljQuery||jQuery)}),define("ssl",["validateconfig","jquery-1.7.2","bsi"],function(){!function(e){function t(){n=a.$Config,i=n.Ssl||{},r=i.imu,o=i.d}var n,i,r,o,a=window,s=(a.$Utility,a.Debug,"http://"),l="https://";t(),a.$ssl={ensureSSLImageUrl:function(e){return o||document.location.href.toLowerCase().startsWith(l)&&e.toLowerCase().startsWith(s)&&r&&(e=r+e.encodeUrl()),e},copyOutConfig:function(t){t.$Config.Ssl={},e.extend(t.$Config.Ssl,$Config.Ssl,!0),t.$ssl.resetCachedValues()},resetCachedValues:t}}(window.originaljQuery||jQuery)}),define("wlivenavlink",["registernamespace","pagestats","validateconfig","jquery-1.7.2","bsi","wlivecss","wlivemenu"],function(){!function(e){function t(){}function n(n,i){var o=this;o._id=t._getItemId(),o.$obj=e(n).first(),o._isDisposed=!1,i?(o._$a=o.$obj.children("a").first(),0==o._$a.length?o._$a=null:o.id=o._$a.attr("id"),sutra(o._$a,"$Sutra.Shared.NavLink",!0),o._$span=o.$obj.children("span:not(.is_c)").first(),0==o._$span.length&&(o._$span=null),o._$imageStrip=o.$obj.children("span.is_c").first(),0==o._$imageStrip.length&&(o._$imageStrip=null),o._$sep=o.$obj.children("span.c_ms").first(),0==o._$sep.length&&(o._$sep=null),o._$rchev=o.$obj.children("span.c_rchev").first(),0==o._$rchev.length&&(o._$rchev=null)):r(o,!1)}function i(t){t._$a&&0!=t._$a.length||(t._$a=e("<a></a>"),sutra(t._$a,"$Sutra.Shared.NavLink",!0),t.$obj.append(t._$a),t._isDisposed=!1)}function r(e,t){t&&(e.$obj=null),e._$a=null,e._$span=null,e._$sep=null,e._$rchev=null,e._$imageStrip=null}var o=window,a=o.wLive.Controls,s=o.$edh,l=0;a.NavItem=t,t._getItemId=function(){return"c_ci"+l++},a.NavLink=n;var c=n.prototype;c.setHtml=function(e){var t=this;return i(t),t._$a.html(e),sutra(t._$a,"$Sutra.Shared.NavLink",!0),t._$span&&(t._$a.detach(),t._$span.html(e),t._$span.append(t._$a)),t},c.setUrl=function(e){return this.setProperty("href",e)},c.setId=function(e){var t=this;return t.id=e,t.setProperty("id",e)},c.setProperty=function(e,t){var n=this;return i(n),n._$a.attr(e,t),n},c.enable=function(){var e=this;return e._$span&&(s.e(e._$span[0]),e._$a=e.$obj.find("a").first(),sutra(e._$a,"$Sutra.Shared.NavLink",!0),e._$span=null),e},c.disable=function(){var e=this;return e._$a&&(s.d(e._$a[0]),e._$span=e.$obj.find("span").first()),e},c.removeClick=function(){var e=this;return e._aclickHandler&&e._$a&&e._$a.unbind("click",e._aclickHandler),e},c.addClick=function(e,t){var n=this;return i(n),n.removeClick(),t||n.setUrl("#"),n._aclickHandler=function(t){var n;try{n=e(t)}catch(i){return $WebWatson.submitFromException(i),!1}return n},n._$a.click(n._aclickHandler),n},c.addMousedown=function(e){var t=this;return i(t),t._$a.mousedown(e),t},c.addSeparator=function(){var t=this;return t._$sep||(t._$sep=e('<span class="c_ms" role="presentation"></span>'),t.$obj.append(t._$sep)),t._$sep.css("display",""),t},c.removeSeparator=function(){var e=this;return e._$sep&&e._$sep.hide(),e},c.addRChev=function(){var t=this;return t._$rchev||(t._$rchev=e('<span class="c_rchev"></span>'),t.$obj.append(t._$rchev),t._$rchev.html($menu.createChevron($menu.chevronTypes.SmallRightDark,!0))),t._$rchev.show(),t},c.removeRChev=function(){var e=this;return e._$rchev&&e._$rchev.hide(),e},c.addImageStrip=function(t,n){var i=this;return i._$imageStrip||(i._$imageStrip=e(t),n?i._$a.append(i._$imageStrip):(i._$imageStrip.append(" "),i._$a.prepend(i._$imageStrip))),i},c.dispose=function(){var e=this;e._isDisposed||(e.removeClick(),r(e,!0),e._isDisposed=!0)},n.defaultOptions={html:"",separator:!1,url:"#",id:"",click:null,mousedown:null,container:"<li></li>",imageStrip:null},n.create=function(t){var i=e.extend({},n.defaultOptions,t),r=new n(i.container);return r.setHtml(i.html),r.setUrl(i.url),r.setId(i.id),i.separator&&r.addSeparator(),i.click&&r.addClick(i.click,i.url),i.mousedown&&r.addMousedown(i.mousedown),i.imageStrip&&r.addImageStrip(i.imageStrip),r}}(window.originaljQuery||jQuery)}),define("navigationcollections",["wlivenavlink"],function(){!function(e){function t(){var e=this;e._isItemsHashDirty=!0,e._itemsHashTable={},e._list=[],e.list=[]}function n(t,n,i,r,o){function a(e){s._menu||(n?s._menu=s._$ul[0].binding:(r.defaultLoc=x,$menu.create(e,M,r)&&(s._menu=s._$ul[0].binding)))}var s=this;s._id=S.NavItem._getItemId();var l=new S.MenuDataModel;if(s._items=[],s.$obj=e(t).first(),r=r||{},!n){var c,d,f=$Config.isLightTheme?$menu.chevronTypes.SmallDownDark:$menu.chevronTypes.SmallDownLight,g=$menu.createChevron(f,!0);o?(c='<span class="c_mlu">'+g+"  &nbsp;</span>",d=""):(c='<span class="c_mlu"></span>',d='<span class="c_chev"> '+g+"</span>");var h='<a href="#" class="uxfa_ml c_ml" onclick="return false">'+c+d+'</a><ul class="uxfa_m '+$+' t_hovl"></ul>';i?s.$obj.append(h):s.$obj.html(h)}s._$a=s.$obj.children("a.c_ml").first(),s._navLink=new I(s.$obj,!0),s._$mspan=s._$a.children("span.c_mlu").first(),s._$chev=s._$a.children("span.c_chev").first(),s._$ul=s.$obj.children("ul"),0==s._$ul.length&&(s._$ul=e('<ul class="uxfa_m '+$+' t_hovl"></ul>'),s.$obj.append(s._$ul)),s.id=s._$ul.attr("id"),s._menu=s._$ul[0].binding,p(s),l._list=s._items,s._$a.bind("click.menu",function(e){e.preventDefault(),a(e)}),s._$a.bind("mousedown.menu",a),sutra(s._$a,"$Sutra.Shared.MenuLink",!0),sutra(s._$ul,"$Sutra.Shared.MenuList",!0),s._dataModel=l,u(s,l._list),l.list=new ObservableArray(l._list)}function i(){var e=this;e.menu={}}function r(t,i,r){var o=this;o._id=S.NavItem._getItemId(),o._dataModel=new S.SplitMenuDataModel,o.$obj=e(t).first(),o._$a=new I(o.$obj,i),i?o._$sep=o.$obj.children(".c_ms"):(o._$a.setHtml("&nbsp;"),o._$sep=e('<span class="c_ms"> </span>'),o.$obj.append(o._$sep),o.$obj.addClass(k+" "+T)),o._$menu=new n(o.$obj,i,!0,{dockEl:o.$obj.get()[0]},r),o._dataModel.menu=o._$menu}function o(t){var n=this;n._isItemsHashDirty=!0,n._itemsHashTable={},n._logo=t&&t.logo||{containerWidth:"220px",imageStrip:"",text:"",title:"",url:"",hasPropertyText:!1},n._list=[],n.isLightTheme=t&&t.isLightTheme,n.getIndexById=function(e){if(n._isItemsHashDirty)for(var t=0;t<n._list.length;t++){var i=n._list[t]._id,r=n._list[t].id;n._itemsHashTable[i]=t,n._itemsHashTable[r]=t}return n._itemsHashTable[e]},n.getItemById=function(e){var t=n.getIndexById(e);return n._list[t]},n.getItemByIndex=function(e){return this._list[e]},n._dispose=function(){e(n.logo).unbind(),e([n.list]).unbind(),e(n.list).unbind()}}function a(t,n,i){var r=this;r._id=S.NavItem._getItemId(),r._needsToRender=!1,r.$obj=e(t);var o=new S.CommandBarDataModel(i);sutra(r.$obj,"$Sutra.Shared.CommandBarControl",!0),r._items=[],n||r.$obj.html('<div class="c_clogo"><a href="#"><h1><span class="c_clogoimg"></span><span class="c_clogot"></span></h1></a></div><ul class="c_cc"></ul><div class="c_cme">></div>'),r._$logo=r.$obj.children(".c_clogo"),r._$logoImage=r._$logo.find(".c_clogoimg"),r._$logoText=r._$logo.find("span.c_clogot"),r._$logoLink=r._$logo.find("a"),r._$ul=r.$obj.children("ul"),sutra(r._$ul,"$Sutra.Shared.CommandBar",!0),0==r._$logoImage.length&&(r._$logoImage=e('<span class="c_clogoimg"></span>'),r._$logoText.parent().prepend(r._$logoImage)),p(r,"$Sutra.Shared.CommandItem"),o._list=r._items,o._logo.imageStrip=r._$logoImage.html(),r._dataModel=o,c(r._$logoText,o._logo,"text","innerHTML"),c(r._$logoText,o._logo,"hasPropertyText",s,"function"),c(r._$logoLink,o._logo,"url","href"),c(r._$logoLink,o._logo,"title","title"),c(r._$logoImage,o._logo,"imageStrip",l,"function"),c(r._$logo,o._logo,"containerWidth",$B.IE_M6?"width":"min-width","style"),u(r,o._list),o.logo=new Observable(o._logo),o.list=new ObservableArray(o._list)}function s(e,t){t?e.hide():e.show()}function l(e,t){e.empty(),e.append(t)}function c(t,n,i,r,o){e(n).bind("propertyChanged",function(e,n,a,s){i==n&&("style"==o?t.css(r,a):"function"==o?r(t,a):t.attr(r,a))})}function u(t,n){e([n]).bind("arrayChange",function(n,i,r,o){t._needsToRender||e(t).trigger("beforeRender"),clearTimeout(t._renderTimeout),t._needsToRender=!0,t._renderTimeout=setTimeout(function(){t._needsToRender&&t.render&&t.render()},500),"insert"==i?t.add(o,r):"remove"==i&&t.remove(r,!0,o)})}function d(){E||(E=setTimeout(f,0))}function f(){E=0;for(var e=B.length,t=0;e>t;t++)B[t]();B.splice(0,e)}function g(e){B.push(e)}function p(t,i){var o=t._$ul.children("li");o.each(function(){var o=e(this);o.hasClass(k)?t._items.push(new r(o,!0)):o.hasClass(T)?o.hasClass(L)||t._items.push(new n(o,!0)):t._items.push(new I(o,!0)),i&&sutra(this,i,!0)})}function h(e){for(var t=e._items,n=0;n<t.length;n++)e._$ul.append(t[n].$obj)}function v(t,n,i){i||0==i||(i=t._items.length),g(function(){if(n.$obj){var r=t._$ul.children(),o=r[i];0!=r.length&&o?e(o).before(n.$obj):t._$ul.append(n.$obj);var a=n._$a;a.attr("role")||a.attr("role","button");var s=n._$ul;s&&(a.attr("aria-expanded","false"),a.attr("aria-haspopup","true"));var l=n.$obj.css("display");("list-item"==l||"block"==l&&$B.IE_M7)&&n.$obj.css("display",""),n.$obj.hasClass(T)&&!n.$obj.hasClass(k)&&h(n)}}),t._items.splice(i,0,n),t._dataModel&&(t._dataModel._isItemsHashDirty=!0),d()}function m(e,t,n){t&&!t._isDisposed&&(t.$obj&&(t.$obj.remove(),e._dataModel&&(e._dataModel.isItemsHashDirty=!0),e._$ul=e.$obj.children("ul")),n&&t.dispose())}function _(e,t,n,i){var r=e._items.splice(t,1)[0];return r._isDisposed||(g(function(){m(e,r,n)}),d()),r}function y(e){var t=e._items;if(t)for(var n=0;n<t.length;n++)t[n].dispose();return e._items=[],e._$ul&&e._$ul.html(""),e}window.ObservableArray=function(e){this.array=e};var b=ObservableArray.prototype;b.insert=function(t,n){var i=this;t>=0&&t<=i.array.length&&e([i.array]).triggerHandler("arrayChange",["insert",t,n])},b.push=function(e){var t=this;t.insert(t.array.length,e)},b.remove=function(t){var n=this;if(t>=0&&t<n.array.length){var i=n.array[t];e([n.array]).triggerHandler("arrayChange",["remove",t,i])}},b.clear=function(){for(var e=this;e.array.length;)e.remove(e.array.length-1)},b.length=function(){return this.array.length},window.Observable=function(e){this.obj=e};var w=Observable.prototype;w.setProperty=function(t,n){var i=this,r=i.obj[t];n!=r&&(i.obj[t]=n,e(i.obj).trigger("propertyChanged",[t,n,r]))};var C=window,S=C.wLive.Controls,I=S.NavLink,$="c_m",k="c_sm",L="c_cmore",T="c_mcp",x=0,M=6;S.MenuDataModel=t,S.Menu=n;var P=n.prototype;P.makeSubMenu=function(){var e=this,t=$menu.chevronTypes.SmallRightDark;return $B.rtl&&(t=$menu.chevronTypes.SmallLeftDark),e._$chev.html(" "+$menu.createChevron(t,!0)),e},P.setHtml=function(e){var t=this;return t._$mspan.html(e),t},P.setId=function(e){var t=this;return t._$ul.attr("id",e),t.id=e,t},P.getDataModel=function(){return this._dataModel},P.getMenu=function(){return this._menu},P.getLink=function(){return this._navLink},P.add=P.push=function(t,n,i){var r=this;return v(r,t,n),i||t._$a.hasClass("c_ml")||e(t._$a).bind("click",$menu.closeAll),r._menu&&r._menu.update(),r},P.remove=function(t,n,i){var r=this,o=_(r,t,n,i);return e(o._$a).unbind("onclick",$menu.closeAll),r._menu&&r._menu.update(),o},P.clear=function(){var e=this;return y(e),e._menu&&e._menu.update(),e},P.dispose=function(){var e=this;e._$a.unbind(".menu"),e.clear(),e._menu&&e._menu.dispose()},n.defaultOptions={html:"",id:"",subMenu:!1,container:'<li class="'+T+'"></li>',menuParams:null,linkId:""},n.create=function(t){var i=e.extend({},n.defaultOptions,t),r=new n(i.container);return r.setHtml(i.html),r.setId(i.id),r._$a.attr("id",i.linkId),i.subMenu&&r.makeSubMenu(),r},S.SplitMenuDataModel=i,S.SplitMenu=r;var A=r.prototype;A.getDataModel=function(){return this._dataModel},A.dispose=function(){var e=this;e._$menu&&e._$menu.dispose()},A.setProperty=function(e,t){var n=this;return n.$obj.attr(e,t),n},A.getMenu=function(){return this._$menu},A.getLink=function(){return this._$a},r.defaultOptions={id:"",linkId:"",container:"<li></li>",useChevronAsText:!0},r.create=function(t){var n=e.extend({},r.defaultOptions,t),i=new r(n.container,!1,n.useChevronAsText);return i.setProperty("id",n.id),i._$a.setId(n.linkId),i},S.CommandBarDataModel=o;o.prototype;S.CommandBar=a;var D=a.prototype;D.add=D.push=function(e,t){var n=this;return sutra(e.$obj,"$Sutra.Shared.CommandItem",!0),v(n,e,t),n},D.remove=function(e,t,n){return _(this,e,t,n)};var N;D.addLightHover=function(){this.$obj.addClass("c_clih");var e=this.$obj.parent();e.hasClass("c_hcnlto")&&(e.removeClass("c_hcnlto"),N=!0)},D.removeLightHover=function(){N?(this.$obj.parent().addClass("c_hcnlto"),N=!1):this.$obj.removeClass("c_clih")},a.defaultOptions={container:'<div class="c_c c_cbb c_ccptc"></div>'},a.create=function(t){var n=e.extend({},a.defaultOptions,t),i=new a(n.container);return i},D.render=function(){var t=this;clearTimeout(t._renderTimeout),e(t).trigger("afterRender"),t._needsToRender=!1},D.getDataModel=function(){var e=this;return e._dataModel},D.dispose=function(){for(var e=this,t=0,n=e._items.length;n>t;t++)m(e,e._items[t],!0);e._dataModel._dispose()},D.get=P.get=function(e){return this._items[e]},D.count=P.count=function(){return this._items.length},D.clear=function(){var e=this;return y(e),e};var E,B=[]}(window.originaljQuery||jQuery)}),define("sharedlapsetimer",["csiperf"],function(){!function(){window.$CSIPerf.lapse.push({s:"sjs",t:(new Date).getTime()})}()}),define("headerhelper",["jquery-1.7.2","registernamespace","pagestats","baseutil","domutils","wliveimagestrip","wlivecss","wlivemenu","csiperf","date","pwcinitializer","icmanager","safelinks","ssl","navigationcollections","sharedlapsetimer"],function(){!function(e){function t(e){return e=e||_ge("c_h_ttl"),'<div><ul class="c_h_ttl">'+e.innerHTML+'</ul><div class="c_clr"></div></div>'}function n(){var n=wLive.Controls.Notifications;if(n){var r=t(),o=n.createFlyout({title:"",content:r,anchor:_ge("c_clogoc"),options:{moreCss:"c_headerBar",bubble:6,maxWidth:g,animation:{entranceType:"slidefadein2",entranceArguments:[{left:0,top:-20,override:!0}],exitType:"slidefadeout2",exitArguments:[{left:0,top:-20}]}}});n.getQueue().start(),o.show(),e(o).bind("aftershow",function(){var t=e(".c_headerBar .UserContent div")[0];i(e(t).find("a"),o),c.$Sutra&&$Sutra.Shared&&$Sutra.Shared.HeaderTiles&&sutra(t,"$Sutra.Shared.HeaderTiles")})}}function i(t,n){e(document).on("mousedown",".c_headerBar",function(t){return e(t.srcElement).parents("a").addClass("pressed"),!1}).on("mouseup","html",function(t){e(".c_headerBar a").removeClass("pressed")}),t.each(function(){var t=e(this);ae(t,t.attr("id")),t.click(function(){n&&n.dismiss()})}),c.$Sutra&&$Sutra.Shared&&$Sutra.Shared.HeaderTile&&t.each(function(){sutra(this,"$Sutra.Shared.HeaderTile")})}function r(e){13==e.which&&(l="keydown"==e.type)}function o(){var e=window.location.host.split("."),t="."+e[e.length-2]+".com",n=new Date,i=$HIC,r=f.getCookie(we,1)||"",o=r.split("|");n.setDate(n.getDate()+i.e),o[0]!=i.c&&(o=[]),o[0]=i.c||o[0]||"",o[1]=i.m||0===i.m?i.m:o[1]||"",o[2]=i.l||0===i.l?i.l:o[2]||"",o[3]=i.cl||o[3]||"",o[4]=i.dg||0===i.dg?i.dg:o[4]||"",o[5]=i.scl||o[5]||"",o[0]?f.setCookie(we,o.join("|"),t,0,n,1):f.deleteCookie(we,t)}var a,s,l,c=window,u=c.$Config,d=c.$Do,f=c.$Cookie,g=(e(c),642),p=[],h="SelectClick.MetroHeader.Nav",v="c_h_mail",m="c_h_ppl",_="c_h_cal",y="c_h_sd",b="c_h_dfe",w="c_h_dfi",C="c_h_wd",S="c_h_xl",I="c_h_ppt",$="c_h_on",k="c_h_oo",L="c_h_sw",T="c_clogot",x="c_clogoc",M="c_hiconm",P="c_hiconu",A="c_hiconc",D="c_coh",N="c_cof",E="c_memenu",B="c_melink",R="c_himla",W="c_himld",j="c_memenuic",F="c_profile",O="c_hli",H="c_wimnetsub",U="c_signout",Q="c_wimneton_FB",q="c_wimnetoff_FB",X={};X[v]="Mail",X[m]="People",X[_]="Calendar",X[y]="SkyDrive",X[b]="DogExt",X[w]="DogInt",X[C]="Word",X[S]="Excel",X[I]="PowerPoint",X[$]="OneNote",X[k]="Office",X[L]="Sway",X[T]="Home",X[x]="Switcher",X[M]="webIM",X[P]="undo",X[A]="gear",X[D]="help",X[N]="feedb",X[B]="me",X[R]="presence",X[W]="presence",X[j]="c_memenuic",X[F]="profile",X[O]="account",X[H]="3pchatm",X[U]="signout",X[Q]="fbchat",X[q]="fbchat";var V=e("#c_signin"),z=function(){for(var t=0;t<p.length;t++)p[t].unbind("click");V.unbind(),e(".c_clogo").unbind(),e(c).unbind("unload",z)};e(".c_clogo a").attr("onclick",""),c.$header={};var G=0;e("#c_clogoc").bind("click",function(){return window.require?window.require(["flyout","doregister"],n):n(),c.top.$HeaderWebIM&&c.top.$HeaderWebIM.setUnreadCountEl(_ge("#c_murc")),!1}),e("#c_cof").bind("click",function(){c.require&&require(["feedbackdialoghelper","feedbackdialog","feedbackdialog.html"],function(){})}),e("#c_clogoc").bind({keydown:r,keyup:r}),c.$header.showLoading=function(){if(!a){var t=_ge("c_header"),n=t&&t.firstChild;n&&(a=e($f.createLoading(0,$f.loadingType.flying,"100%","4px",0,"#fff")),a.addClass("c_h_flyingDots"),n.appendChild(a.get(0)))}G++,$f.showLoading(a)},c.$header.hideLoading=function(){G--,G=0>G?0:G,a&&!G&&$f.hideLoading(a)},c.$header.getDummyHeader=function(){if(!s){s=document.createElement("ul"),s.className="c_mcp t_hdbg c_c";var e=document.createElement("li");e.style.listStyle="none",s.appendChild(e),document.body.appendChild(s)}return s};var K=function(e){if(c.$PF){var t=encodeURIComponent($PF.getCurrentUrl()),n=$f.replaceQs(V.attr("href"),"wreply",t);return $BSI.navigateTo(n,"_top"),$f.cancelEvent(e)}return!0};V.bind("click",K),e(c).bind("unload",z);var J,Y,Z,ee,te,ne=[],ie=function(e,t,n){this.execute=function(i){i.href.indexOf("?rru=home")>-1?i.href=i.href.replace(t,n):i.href=i.href.replace(e,n)}},re=function(e,t,n){this.execute=function(i){var r=i.href;if(r.indexOf(t)>-1&&r.indexOf("#")<0&&!r.match(/[\?|&|\/]cid/))if(n){var o="."+u.d,a=o+"/"+e;"profile"==t.toLowerCase()&&r.indexOf("/home")>0&&(o+="/home"),i.href=r.replace(o,a)}else{var s="cid="+e,l="?";r.indexOf(l)>-1&&(l="&"),i.href=r+l+s}}},oe=function(e,t){this.execute=function(n){e&&n.href.indexOf("?rru=inbox")>-1?n.href=e:t&&n.href.indexOf("?rru=contacts")>-1&&(n.href=t)}},ae=function(e,t,n){e&&Boolean(X[t])&&(e.bind("click",function(){var e=X[t];Boolean(n)&&(e+=n),$BSI.reportEvent(h,{MetroHeaderNav:e})}),p.push(e))};c.$header.reportBSIMenu=ae;var se=function(t){var n=t.getAttribute("hid");Boolean(X[n])&&ae(e(t),n,"A")};d.register("$Header.MenuBind",se);var le=function(){ae(e("#c_h_theme_m_ul"),E)};d.register("$Header.ThemesMenuBind",le),u.Header&&(J=u.Header.MailLink,Y=u.Header.ContactsLink,Z=u.Header.HotmailDomain,te=u.Header.OldHomeDomain,ee=u.Header.OldHotmailDomain);var ce=Z;J||Y?ne[ne.length]=new oe(J,Y):ce&&(ne[ne.length]=new ie(ee,te,Z));var ue=c.$HIC&&$HIC.c;ue&&ue.length>0&&(ne[ne.length]=new re("cid-"+ue,"profile",!0),ne[ne.length]=new re(ue,"skydrive."));var de=[],fe=[],ge=c._ge("c_header");if(ge){var pe=$css.getCN("c_hleft","div",ge)[0];pe&&(fe=pe.getElementsByTagName("a"))}for(var he=fe.length-1;he>=0;he--){var ve=fe[he];de.push(ve),ae(e(ve),ve.id),c.$Sutra&&$Sutra.Shared&&$Sutra.Shared.HeaderLink&&sutra(ve,"$Sutra.Shared.HeaderLink")}ae(e("#c_clogot"),"c_clogot"),ae(e("#c_clogoc"),"c_clogoc"),ae(e("#c_hiconu"),"c_hiconu"),ae(e("#c_hiconm"),"c_hiconm"),ae(e("#c_hiconc"),"c_hiconc");for(var me,_e,ye=(e("#c_hmc").find("a").each(function(){de.insert(0,this)}),de.length-1);ye>=0;ye--){me=de[ye],!me.target&&(me.href.indexOf("//g.live")>-1||me.href.indexOf(u.sd)<0)&&(me.target="_top");for(var be=ne.length-1;be>=0;be--)_e=ne[be],_e&&_e.execute(me)}if(c.$HIC){var we="HIC";d.register("$Header.UpdateCookie",o)}}(window.originaljQuery||jQuery)}),define("mecontrol",["headerhelper"],function(){!function(e){function t(){function t(){e(n).unbind(".me"),d&&e(d).unbind("click",r)}function r(e){$menu.closeCurrent();var t=n.$Logout;t&&t.doLogout&&t.doLogout(e)}var o,a,s,l,c,u,d,f=this,g=!1,p=!1,h="c_memenu",v="c_meic",m="c_melinkspan",_="c_melink";e(n).bind("unload.me",t),d=_ge("c_signout"),d&&e(d).bind("click",r),f.copyAndInitializeMenu=function(t){t=t||n.$PF&&n.$PF.getAppFrameWindow()||window;var i=_ge(h),r=t._ge(h);u=t._ge(m);var o=!(n==t||i&&i.initialized&&r.isCopied);if(o&&(g=!1),!g&&t.$f){var a=_ge(m);if(c=i||r,o){i&&(e(i).remove(),c=r);var s=_ge(_);s&&e(s).remove();var d=$header.getDummyHeader().firstChild,p=t.$f.getLocation(t._ge(m),1,1),v=document.createElement("ul"),y=document.createElement("a");v.innerHTML=c.innerHTML,v.className=c.className,v.id=c.id,v.initialized=1,r.isCopied=1,y.style.position="absolute",y.style.top=p.bottom+"px",y.style.left=($B.rtl?p.left:p.right)+"px",y.style.height=0,y.style.padding=0,y.id=_,c=v,l=y,d.appendChild(y),d.appendChild(v),e(n).bind("resize.me",function(){v.initialized=0})}else i&&a&&i.parentNode!=a.parentNode&&($css.add(i,"uxfa_m c_m t_hovl"),a.parentNode.insertBefore(i,a.nextSibling),l=_ge(_));f.init(),$Do.when("$HeaderWebIM.Initialize")}},f.openMenu=function(e){f.copyAndInitializeMenu(),g&&(c.binding?c.binding.toggleState():$menu.create(e,0,{sourceEl:l,menuEl:c,pressedStateEl:u}))},f.createMeICs=function(){if(!p){p=!0;var t=n.$icm,r=i.cid,o=_ge(v);if(o){var a=t.createICForPerson("MeControlMedium",r);if(a){var s=e(o);s.html(a.render()),a.activate();var l=s.find("img");l.attr("title",s.attr("title"))}}var c=_ge("c_memenuic");if(c){var u=t.createICForPerson("MeControlXXL",r);if(u){var d=e(c);d.html(u.render()),u.activate();var f=d.find("img");f.attr("title",d.attr("title"))}}}},f.init=function(){g||(o=e("#c_memenu"),a=e("#c_memenu_right"),s=e("#c_memenu_left"),$Do.when("$ic",0,f.createMeICs),n.$header&&(n.$header.reportBSIMenu(e("#c_himla"),"c_himla"),n.$header.reportBSIMenu(e("#c_himld"),"c_himld"),n.$header.reportBSIMenu(e("#c_memenuic"),"c_memenuic"),n.$header.reportBSIMenu(e("#c_profile"),"c_profile"),n.$header.reportBSIMenu(e("#c_hli"),"c_hli"),n.$header.reportBSIMenu(e("#c_wimnetsub"),"c_wimnetsub"),n.$header.reportBSIMenu(e("#c_signout"),"c_signout")),sutra(_ge(h),"$Sutra.Shared.MeControlMenu"),sutra(_ge("c_profile"),"$Sutra.Shared.Profile"),sutra(_ge("c_hli"),"$Sutra.Shared.Account"),sutra(_ge("c_signout"),"$Sutra.Shared.SignOut"),g=!0)},$Do.when("$icm",0,f.createMeICs)}var n=window,i=n.$Config,r=_ge("c_melink");r&&(_$meLink=e(r),_$meLink.mouseover(function(){window.top.$MeControl.copyAndInitializeMenu(n)}),_$meLink.focus(function(){window.top.$MeControl.copyAndInitializeMenu(n)}),n.$header.reportBSIMenu(_$meLink,"c_melink"),sutra(r,"$Sutra.Shared.MenuLink")),n.$MeControl=new t}(window.originaljQuery||jQuery)}),define("footer",["mecontrol"],function(){!function(e){function t(){var e=null;if(w.XMLHttpRequest)e=new XMLHttpRequest;else if(w.ActiveXObject)try{e=new w.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}return e}function n(){var n=t(),i=r("LanguagePicker.Client.Title"),o='<div class="loadingArea"><table class="loadingTable"><tr><td class="loadingSpinner" id="lpSpinner"></td><td class="lpLoading">'+r("LanguagePicker.Client.Loading")+"</td></tr></table></div>",l=wLive.Controls.Notifications,c=l.createFlyout({title:i,content:o,anchor:_ge("uxp_ftr_link_language"),buttons:{action:r("LanguagePicker.Client.Save")},options:{dismissOnButtonClick:!1,moreCss:"languagePickerFlyout"}});if(_=c,e(c).bind({"buttonclick.flyout":function(n,i,o){if("action"===o){var s=e(c.content()).find("form"),l=s[0].elements,u=l.language.value,d=l.canary.value;e(c.content()).find(".UserContent").html('<div class="loadingArea"><table class="loadingTable"><tr><td class="loadingSpinner" id="lpSpinner"></td><td class="lpLoading">'+r("LanguagePicker.Client.Saving")+"</td></tr></table></div>");if(e(".languagePickerFlyout button.default").hide(),w.$f){var f=e($f.createLoading(0,$f.loadingType.spinning,"25px","25px"));e("#lpSpinner").append(f),$f.showLoading(f)}var g=t();g&&(g.onreadystatechange=function(){if(4==g.readyState&&200==g.status)if(c.dismiss(),w.$PF)try{w.top.location=w.$PF.getCurrentUrl()}catch(e){}else{var t=g.responseText,n=w.top.location.href.toString(),i=$f.replaceQs(n,"mkt",t);try{w.top.location.href=i,-1!=n.indexOf("#")&&w.top.location.reload()}catch(e){}}else 4==g.readyState&&200!=g.status&&(c.dismiss(),a(B.saving))},g.open("POST","/handlers/languagesave.mvc?canary="+encodeURIComponent(d)+"&lang="+u,!0),g.send("canary="+encodeURIComponent(d)+"&lang="+u))}},"beforedismiss.flyout":function(t,n,i){e(document.body).toggleClass(x,!1)}}),e(document.body).toggleClass(x,!0),c.show().then(function(e){}),l.getQueue().start(),w.$f){var u=e($f.createLoading(0,$f.loadingType.spinning,"25px","25px"));e("#lpSpinner").append(u),$f.showLoading(u)}return n&&(n.onreadystatechange=function(){4==n.readyState&&200==n.status?s(n.responseText):4==n.readyState&&200!=n.status&&(c.dismiss(),a(B.loading))},n.open("GET","/handlers/languagepicker.mvc",!0),n.send()),!1}function i(){return window.require?window.require(["flyout","doregister"],n):n(),!1}function r(e){var t="";return w.GetString&&(t=w.GetString("live.shared.strings."+e)),t}function o(){var e="";e=r(R===B.loading?"LanguagePicker.Client.Error.Loading":"LanguagePicker.Client.Error.Saving");var t=wLive.Controls.Notifications,n=t.createTopBar({content:e,dismissalMode:"Explicit",buttons:{action:r("LanguagePicker.Client.Close")}});n.show(),t.getQueue().start()}function a(e){return R=e,window.require?window.require(["notificationbar","doregister"],o):o(),!1}function s(t){e(_.content()).find(".UserContent").html('<div><form name="langPicker" action="/handlers/languagesave.mvc" method="POST">'+t+"</form></div>");e(".languagePickerFlyout button.default").show();var n=e(".Flyout.languagePickerFlyout");n.attr("aria-labelledby","uxp_ftr_link_language"),n.attr("aria-label",r("LanguagePicker.Client.Title"))}function l(e,t,n){return N.style.display=t,n?(e.returnValue=!1,!1):!0}function c(e){return l(e,"none",!0)}function u(e){return l(e,"",!0)}function d(t,n){return t&&(t.id===n||d(e(t).parent(),n))}function f(e){return""!==N.style.display||d(e.target,A.id)?!0:l(e,"none",!1)}function g(){clearTimeout(v),v=setTimeout(S.adjustFooter,50)}function p(){var t=P[e(this).attr("id")];t&&$BSI.reportEvent(M,{FooterNav:t})}function h(e){w.$Sutra&&$Sutra.Shared&&$Sutra.Shared.FooterLink&&sutra(e,"$Sutra.Shared.FooterLink")}var v,m,_,y,b,w=window,C=$Config,S=w.$footer={},I=_ge("uxp_ftr_control"),$=e("#m_wf"),k=e("#m_wh"),L="uxp_ftr_ff",T=k.height(),x="langPickerVisible";C.wla&&$Network.fetchScript($Config.wla,function(){},"window.live.shared.strings.languagepicker","Gfx_JS_WLiveStr_Download","Gfx"),$.length||($=e(I).parent());var M="SelectClick.Footer.Nav",P={};P.uxp_ftr_link_legal="Terms",P.uxp_ftr_link_privacy="Privacy",P.uxp_ftr_link_developers="Dev",P.uxp_ftr_link_intl1="Intl",P.uxp_ftr_link_custom3="CoB1",P.uxp_ftr_link_custom4="CoB2",P.uxp_ftr_link_abuse="Abuse",P.uxp_ftr_link_language="Lang";var A=w._ge("uxp_ftr_control_mini"),D=w._ge("uxp_ftr_hidechevron"),N=w._ge("uxp_ftr_control_cc"),E=w._ge("uxp_ftr_link_language"),B={loading:0,saving:1},R=-1;S.dispose=function(){A&&(e(document).unbind("click",f),e(A).unbind(),e(D).unbind()),e(E).unbind(),e("#uxp_ftr_control a").unbind(".ftr"),e(w).unbind("unload",S.dispose),e(w).unbind("resize",g),e(document).unbind(".footerResize")},S.pageContentDiv=_ge("c_content")||_ge("BelowHeader"),S.pageContentDiv||(S.pageContentDiv=$.prev(".MainLayoutIndented")[0]),S.adjustFooter=function(){var t=S.pageContentDiv;if(I&&t){var n=$f.clientHeight(),i=t.scrollHeight;if(!y||y!=n||b!=i){y=n,b=i,m=$.outerHeight(),e(S).trigger("beforeResize"),i=t.scrollHeight;var r=i+T;$.hasClass(L)&&(r+=m),r<$f.docHeight(!0)?$.addClass(L):$.removeClass(L),e(S).trigger("afterResize")}}},A&&(e(document).bind("click",f),e(A).bind("click",u),e(D).bind("click",c)),e("#uxp_ftr_control a").each(function(){var t=this;e(t).bind("click.ftr",p),h(t)});var W=_ge("uxp_ftr_link_mobile");if(W&&e(W).bind("click",function(){try{$Cookie.setCookie($Config.bpcc,"false",$Config.sd),window.open($Config.fml,"_top")}catch(e){}}),h(_ge("uxp_ftr_link_trademark")),C.ff&&($.css("padding-top",0),e(w).bind("resize",g),e(document).bind({"keydown.footerResize":g,"mousedown.footerResize":g,"mousewheel.footerResize":g,"DOMMouseScroll.footerResize":g}),S.adjustFooter()),(!$Config.LP||!$Config.LP.bypassLanguageFlyout)&&E){var j=e(E);j.attr("aria-haspopup","true"),j.attr("aria-label",r("LanguagePicker.Client.LanguageLinkAriaLabel")),j.attr("tabindex","0"),j.attr("role","button"),E.href="",j.bind("click",i)}e(w).bind("unload",S.dispose)}(window.originaljQuery||jQuery)}),define("leftnav",["footer"],function(){!function(e){function t(){if(v.length){if(l=e(f.$footer),c=e("#uxp_ftr_control"),s=_ge("c_base"),e(f).bind("unload.leftNav",n),e(".c_n .c_gl").bind("click",i),h)d=e("#"+h);else{var t=e(".c_n .active > a");d=t.length?t:e(".c_n .active > .link")}d&&(u=d.hasClass("c_gl")?d.siblings("ul"):e(d.parents("ul")[0]),p.AutoExpand&&u.show(),d.parent().addClass("active"),d.parents("ul").show()),p.FullHeight&&(l.bind("beforeResize.leftNav",r),l.bind("afterResize.leftNav",o),g.adjustHeight()),v.find("a").bind("dragstart.ln",$f.cancelEvent)}}function n(){e(f).unbind(".leftNav"),e(l).unbind(".leftNav"),e(".c_n .c_gl").unbind(),v.find("a").unbind(".ln")}function i(){var t=e(this);if(!t.attr("href")){var n=t.siblings("ul");u||(u=n),u[0]==n[0]?u.toggle():(u.hide(),n.show(),u=n)}}function r(){v.css("height","auto")}function o(){clearTimeout(a),a=setTimeout(g.adjustHeight,100)}var a,s,l,c,u,d,f=window,g=f.$leftNav={},p=$Config.LeftNav||{},h=p.ActiveLinkId,v=e("#c_ln"),m=parseInt(v.css("padding-top"));g.adjustHeight=function(){if(s&&v.length){var e=s.scrollHeight-c.height()-m;v.css("height",e+"px")}},t()}(window.originaljQuery||jQuery)}),define("collapsing",["leftnav"],function(){!function(e){var t=window,n=0,i=6;t.CollapsingMenu=function(t,r,o,a,s,l,c,u){function d(){var e;if(c)e=c();else{var t,n=S?l.previousSibling:l;n&&(t=$B.ltr?o.parentNode.offsetWidth+f(o.parentNode)<n.offsetWidth+f(n)+s+20:f(o.parentNode)>f(n)-(s+20),e=o.childNodes.length>m&&t||C.offsetTop<n.offsetTop-n.offsetHeight)}return e}function f(e){for(var t=e.offsetLeft;"body"!=e.nodeName.toLowerCase()&&"html"!=e.nodeName.toLowerCase()&&(e=e.offsetParent);)t+=e.offsetLeft;return t}function g(){var e=!1,t=o.lastChild.previousSibling;return t&&(p(t,!0),w.insertBefore(t,w.firstChild),e=!0),e}function p(t,r){var o=e(t),a=o.find("a.c_ml")[0],s=a&&a.menu;if(o.hasClass("c_sm"))r?(s&&s.deactivate(),o.children("a").hide(),o.children("ul").css("visibility",""),o.find("ul li:last-child").append('<span class="c_ms"> </span>')):(s&&s.activate(),o.children("a").css("display",""),o.find("ul li:last-child .c_ms").remove());else if(o.children(".c_m").length>0){var l=o.find("span.c_chev");if(l.length){var c=r?b:y;l[0].innerHTML=" "+c}s&&(r?s.convertToSubMenu(i):s.convertFromSubMenu(n))}}var h=this,v=t,m=r,_=u?$menu.chevronTypes.SmallDownLight:$menu.chevronTypes.SmallDownDark,y=$menu.createChevron(_,!0),b=$B.rtl&&$B.IE_M6?$menu.createChevron($menu.chevronTypes.SmallLeftDark,!0):$menu.createChevron($menu.chevronTypes.SmallRightDark,!0),w=o.lastChild.childNodes[1],C=o.firstChild,S=!1;l||(l=w.parentNode,S=!0),h.updateMaxItems=function(e){v=e},h.updateMinItems=function(e){m=e},h.redraw=function(t,n){var i=$css.getCN("c_collRem","a",w)[0];if(i){var r=i.parentNode;r.parentNode.removeChild(r)}for(var s=o.childNodes.length-1;v>s&&0!=w.childNodes.length;)p(w.firstChild,!1),o.insertBefore(w.firstChild,o.lastChild),s++;for(;s>v;)g(),s--;for(w.parentNode.style.display=a;!n&&d()&&g(););var c=e(w);c.show();var u=c.children();if(0===u.filter(":visible").length)w.parentNode.style.display="none";else{var f=S;w.parentNode.style.display=a,l=w.parentNode,S=!1,d()&&g(),S=f}w.binding&&w.binding.update()}}}(window.originaljQuery||jQuery)}),define("wlivecommandbar",["collapsing"],function(){!function(e){function t(){clearTimeout(A),A=setTimeout(n,100)}function n(){h=0,e(m).trigger(C)}function i(){var t=L-e("#c_cb0 .c_cme").outerWidth();e("#c_cb0 .c_cc").css("padding-"+x,t+"px"),e(m).trigger("resize")}function r(){e("#c_cb0 .c_cc").css("padding-"+x,0),e(m).trigger("resize")}function o(){$Do.when("$WLXIM.SidebarCreated",0,function(){$WLXIM.isSidebarOpened()&&i(),e($WLXIM.sidebar).bind("onSidebarOpenedEvent",i),e($WLXIM.sidebar).bind("onSidebarClosedEvent",r);
});for(var n=$css.getCN("c_c","div",document),o=0;o<n.length;o++){var l=n[o],c=e(l),d=c.children(".c_cc")[0],h=P.getInstanceById(l.id);if(!c.hasClass("c_ncolapse")){var v=h&&!h.getDataModel().isLightTheme,b=$B.IE_M6?"block":$B.IE_M7?"inline":"inline-block";l.collapse=new CollapsingMenu(l.m,l.i,d,b,14,0,u(l.id),v),l.r&&l.collapse.redraw(),l.DisableCommand=function(e){var t=l.getElementsByTagName("a")[e];_.d(t)},l.EnableCommand=function(e){var t=l.getElementsByTagName("a")[e].parentNode;_.e(t)},l.dispose=function(){y.unbind("unload",l.dispose)},l.updateMaxItems=function(e){l.collapse.updateMaxItems(e)},l.updateMinItems=function(e){l.collapse.updateMinItems(e)};var S=window.$Config;if(S&&S.CommandBar&&S.CommandBar.resize){if(y.bind(C,l.collapse.redraw),h){f=e("#c_cb0 h1"),g=e("#c_clogoc"),p=g.siblings(".c_ms"),_$emptyLogoLink=e("#c_cb0.c_cle a.c_clogot"),a(c),_$emptyLogoLink.length&&(_$emptyLogoLink.unbind(),_$emptyLogoLink.bind("click",function(){return!1})),e(h).bind("beforeRender",function(e){d.style.overflow=$,l.collapse.redraw(e,!0)}),e(h).bind("afterRender",function(e){l.collapse.redraw(),l.style.overflow=k,d.style.overflow=k}),h.updateMaxItems=l.updateMaxItems,h.updateMinItems=l.updateMinItems;e("#c_cb0 h1 .c_clogot");f.bind("keydown",s)}y.bind(w,t),l.dispose=function(){if(y.unbind(w,t),y.unbind(C,l.collapse.redraw),h&&(e("a",c).unbind(),e(h).unbind(),e("#c_clogoc").unbind(),h.dispose(),m.$WLXIM&&$WLXIM.sidebar))try{e($WLXIM.sidebar).unbind()}catch(n){}y.unbind("resize.cb"),y.unbind("unload",l.dispose)},h&&h.render()}y.bind("unload",l.dispose)}d.style.overflow=k}$Do.register("WLXCommandBar")}function a(e){e.delegate("a",{"mousedown.cb":l,"focus.cb":l,"blur.cb":c,"mouseup.cb":c,"mouseleave.cb":c,"dragstart.cb":$f.cancelEvent})}function s(e){d=e.shiftKey}function l(){$B.IE&&$B.V<=8&&(this.hideFocus=!0),e(this).addClass(I)}function c(){e(this).removeClass(I)}function u(t){return function(){var n,i="#"+t,r=e(i);if(r.length){var o=h;if(!o){var a=e(i+" .c_cme"),s=a.outerWidth(),l=e(i+" .c_clogo").outerWidth();l>T&&(o=e(i).outerWidth()-l-s)}o>0&&(h=o,n=e(i+" .c_cc").outerWidth()>o)}return n}}var d,f,g,p,h,v,m=window,_=m.$edh,y=e(m),b={},w="resize",C="wlResize",S="c_cb0",I="c_cf",$="hidden",k="visible",L=300,T=50,x=$B.rtl?"left":"right",M=_ge(S),P={};M?P=m.$CommandBar=b[S]=new wLive.Controls.CommandBar("#"+S,!0,M.dataModel):m.$CommandBar=P,P.showOptionsMenu=function(t,n){var i,r,o=_ge("c_copt"),a=n._ge("c_copt"),s=o||a,l=n._ge("c_hiconc");if(!(m==n||o&&a.isCopied&&v)){o&&(e(o).remove(),s=a);var c=$header.getDummyHeader().firstChild,u=n.$f.getLocation(l,1,1),d=document.createElement("ul"),f=document.createElement("a");d.innerHTML=s.innerHTML.replace(/window\./g,"_ge($PF.fid).contentWindow."),d.className=s.className,d.id=s.id,a.isCopied=1,v=1,f.style.position="absolute",f.style.top=u.bottom+"px",f.style.left=($B.rtl?u.left:u.right)+"px",f.style.height=0,f.style.padding=0,s=d,i=f,c.appendChild(f),c.appendChild(d),m.$Config.Themes=n.$Config.Themes,r=1,y.bind("resize.cb",function(){v=0}),m.$header.reportBSIMenu(e("#c_cof"),"c_cof"),m.$header.reportBSIMenu(e("#c_coh"),"c_coh")}if(s.binding)s.binding.toggleState();else{var g=l.parentNode;$menu.create(t,1,{sourceEl:i,menuEl:s,pressedStateEl:g,bindEnterKey:!0})}($Config.Themes.ThemeService||m.$themewritecallback)&&$Do.when("$ThemeMenuInit",0,r)},P.getInstanceById=function(e){if(!b[e]){var t=_ge("#"+e);t&&(b[e]=new wLive.Controls.CommandBar("#"+e,!0,t.dataModel))}return b[e]},P.invalidateOptionsMenu=function(e){var t=e._ge("c_copt");t.isCopied=!1};var A;P.init=o,$Do.when("$CommandBarDomReady",0,function(){$Do.when("$WLiveLoaded",0,function(){setTimeout(o,0)})})}(window.originaljQuery||jQuery)}),define("trie",["wlivecommandbar"],function(){!function(){function e(e){function t(e){for(var t=0,n=i.length-1,r=null,o=null;n>=t;)if(r=Math.floor((t+n)/2),o=i[r].key.substring(0,e.length),e>o)t=r+1;else{if(!(o>e))return r;n=r-1}return null}var n=this,i=[],r=e,o=!1;n.remove=function(e){i.remove(e)},n.insert=function(e,t){var n={key:e,datum:t};return i.push(n),o=!1,n},n.sort=function(){o||i.sort(function(e,t){var n=e.key,i=t.key;return n>i?1:i>n?-1:0}),o=!0},n.matchPrefix=function(e,o){var a=null,s=null,l=null,c=null,u=null,d=null;if(n.sort(),a=t(e),null==a)return[];for(s=a;s>0&&i[s-1].key.startsWith(e);s--);for(l=a+1;l<i.length&&i[l].key.startsWith(e);l++);c=new Array(l-s);for(var f=0;f<c.length;f++){var g,p=i[s+f];g=o?{key:p.key,datum:p.datum}:p.datum,c[f]=g}if(r){c.sort(r),u=[d=c[0]];for(var h=0;h<c.length;h++)r(d,c[h])&&u.push(d=c[h]);return u}return c}}var t=window;t.$Trie=e}()}),define("icusertilescript.inline",["trie"],function(){}),define("logout",["icusertilescript.inline"],function(){!function(){function e(){function e(e,t){i||(i=1,$BSI.navigateTo(e,t))}function t(t,n){var i=this,r=[];i.pause=function(e){r.push(e)},i.resume=function(i){r.remove(i),0==r.length&&e(t,n)}}var i,r=this,o=[];r.add=function(e){o.push(e)},r.remove=function(e){o.remove(e)},r.doLogout=function(r){var a,s=0,l=o.length;if(i=0,!r.shiftKey&&!r.ctrlKey&&!r.altKey)for(var c=r.target;c;){if("A"==c.tagName){var u=c.href;if(u){var d=c.target;$f.cancelEvent(r),a=new t(u,d),setTimeout(function(){e(u,d)},1e3)}break}c=c.parentNode}var f="$logout";for(a.pause(f);l>s;s++)try{o[s](a)}catch(g){n.submitFromException(g)}a.resume(f)}}var t=window,n=t.$WebWatson;t.$Logout=new e}()}),define("preload",["logout"],function(){!function(e){function t(){$Config.WebIM?$Do.when("wlxim",0,n):$BSI.isLoading()?($BSI.addLoadedCallback(o),v=1):o(),e(c).bind("beforeunload",u.dispose)}function n(){s=window.$WLXIM,e(s).bind("stateChange",r),r(),h=1}function i(){e(s).unbind("stateChange",r),h=0}function r(){s.hasContacts()&&o()}function o(){var e=g.DelayMs||0;setTimeout(a,e),h&&i()}function a(){if(!p){var e=g.View;p=1,e&&(l=document.createElement("iframe"),l.id=d,l.width=l.height=0,l.style.display="none",l.src="/handlers/resourcespreload.mvc?bicild=&view="+e,document.body.appendChild(l))}}var s,l,c=window,u=c.$Preload={},d="preload_frame",f=c.$Config,g=f.Preload||{},p=0,h=0,v=0;u.dispose=function(){if(u.pause(),h?i():v&&($BSI.removeLoadedCallback(o),v=0),e(c).unbind("beforeunload",u.dispose),l){try{var t=l.contentWindow;t.onunload&&(t.onunload(),t.onunload=null)}catch(n){}l.parentNode.removeChild(l),l=0}},u.resume=function(e){if(l)try{l.contentWindow.$Preload.resume(e)}catch(t){}},u.pause=function(){if(l)try{l.contentWindow.$Preload.pause()}catch(e){}},t()}(window.originaljQuery||jQuery)}),define("basemaster",["preload"],function(){!function(e){function t(){$Do.when("$PF.attach",0,c.dispose),u.fs&&$BSI.addLoadedCallback(r),e(document).bind("mousedown",n),$f.getDocType().indexOf("Strict")>0&&e(document.body).addClass("strict")}function n(t){var n=t.target;for(s&&i(t,s);n;){if(v.contains(n.tagName)){s=n,$css.addHideBorder(t,n),"A"==n.tagName&&$css.addPressedState(t,n),e(n).bind("blur",i);break}n=n.parentNode}}function i(t,n){n=n||this,$css.removeHideBorder(t,n),$css.removePressedState(t,n),e(n).unbind("blur",i),s=null}function r(){$Network.fetchCSS(u.fs,o,void 0,"Gfx_Css_WlxFonts_Download","Gfx")}function o(){var e=new Date;e.setDate((new Date).getDate()+1),$Cookie.setCookie("wlfonts","1",u.sd,"/",e)}var a,s,l=window,c=l.$baseMaster={},u=$Config,d=e("#m_wh"),f=e("#c_header"),g=e("#c_base"),p=!0,h=50,v=["A","INPUT","LABEL","BUTTON","TEXTAREA"];c.getHeaderHeight=function(){return h},c.toggleFixedHeader=function(t,n){p=!!t,d.show(),t?($B.IE&&$B.V<=8&&d.show(),d.css({top:"0"}),f.removeClass("c_h_hidden"),g.css({top:Math.max(n||0,h)+"px"}),l.$WLXIM&&$WLXIM.setSidebarToFullScreen(!1),e("a",d).attr("tabindex","")):($B.IE&&$B.V<=8&&d.hide(),g.css({top:"0"}),d.css({top:"-"+h+"px"}),f.addClass("c_h_hidden"),l.$WLXIM&&$WLXIM.setSidebarToFullScreen(!0),e("a",d).attr("tabindex","-1"))},c.dispose=function(){if(!a){var t=l.$Static,n=l.$Preload,i=l.$WLXIM,r=l.$WLXIMCL,o=l.$footer,s=l.$HeaderWebIM;t&&t.pause(1),n&&n.dispose(),i&&i.pause(),r&&r.dispose(),o&&o.dispose(),s&&s.dispose(),e(document.body).parent().removeClass("fh"),a=1}},t()}(window.originaljQuery||jQuery)}),define("persistenceframework",["basemaster"],function(){!function(e){function t(e){try{_ge(p.fid).contentWindow.document.domain}catch(t){return}var n="",i=e.pfState;n=i?0==i.indexOf("#")?[p.afu,i].join(""):i:p.afu;var r=p.getNormalizedUrl(n,null);setTimeout(function(){p.navigateTo(r)},1);var o;return r!=n&&(o=p.getRelativeUrl(r)),o}function n(t){p.i||(e(p).bind(g,t),h++)}function i(t){var n=this;p.i||e(p).bind(f,function(){t.call(n)})}function r(t){p.i||e(p).unbind(f,t)}function o(){s||(s=e("#"+p.lid),s.html('<div style="top:45%;width:100%;position:absolute;text-align:center">'+$f.createLoading(1,0,"60px")+"</div>"),l=s.find(".c_loadingDots")),s.show(),$f.showLoading(l),e("#"+p.did).hide()}function a(e){var t=e.document.getElementsByTagName("link");if(t)for(var n=0;n<t.length;n++)if(t[n].getAttribute("rel").indexOf("icon")>-1)return t[n]}var s,l,c,u,d=window,f="Merge",g="PreMerge",p=d.$PF,h=0,v=0,m=2e3;p&&p.f&&(p.i||($Do.when("$History.attachPF",0,t,!0),p.m&&e("form").submit(function(){var t=e(this);return t.attr("target")||(t.attr("target",p.fid),$Do.when("$PF.merge")),!0})),p.preMerge=function(t){return p.merged?void p.navigateTo(t):void(h>0?(u=t,e(p).trigger(g)):p.mergeAndNavigate(t))},p.allowMerge=function(){v++,v>=h&&p.mergeAndNavigate(u)},p.merge=function(){p.merged||(p.merged=!0,e(p).trigger(f),e(p).unbind(f),e(p).unbind(g),e("body").css("cssText",p.hbs),e("html").css("cssText",p.hhs),e("#"+p.did).show().add("[persist]").parentsUntil("body").andSelf().attr("persist",1).siblings().filter(":not([persist])").hide())},p.showLoading=function(){p.lid&&(c=setTimeout(o,m))},p.hideLoading=function(){p.lid&&(clearTimeout(c),e("#"+p.did).show(),s&&(s.hide(),$f.hideLoading(l)))},p.updateFavicon=function(e,t){var n=a(e),i=a(d);if(n&&i){var r=i.cloneNode(!0);r.href=n.getAttribute("href"),t.document.head.appendChild(r),i.parentNode.removeChild(i)}},$Do.register("$PF"),$Do.register("$PF.merge",p.merge),$Do.register("$PF.attach",i),$Do.register("$PF.detach",r),$Do.register("$PF.attachPreMerge",n))}(window.originaljQuery||jQuery)}),define("flextag",["persistenceframework"],function(){!function(){var e=window;e.$Flextag=new function(){var t=this;t.load=function(){e.$Config&&$Config.flextag&&$Config.flextag.url&&setTimeout(function(){var e="flextagFrame",t=document.getElementById(e),n=$Config.flextag.url+"?v="+(new Date).getTime();if(t)t.src=n;else{var i=document.createElement("IFRAME");i.id=i.name=e,i.width=i.height=0,i.style.display="none",i.scrolling="no",i.frameBorder="0",i.allowTransparency=!0,i.src=n,document.body.appendChild(i)}},2e3)}}}()}),define("animationsstub",["flextag"],function(){!function(e){function t(t,n,i,r){return r||(e(t).removeClass("NoDisplay"),e(t).toggle(!0)),s}function n(t){return function(n){return t?(e(n).removeClass("NoDisplay"),e(n).toggle(t)):e(n).addClass("NoDisplay"),s}}function i(){return function(t,n){return e(t).addClass("NoDisplay"),e(n).removeClass("NoDisplay"),e(n).toggle(!0),s}}var r=window,o=r.wLive;o.Animations={};var a=o.Animations,s=null;e.Deferred&&(s=e.Deferred().resolve()),e.extend(a,{Direction:{Horizontal:0,Vertical:0},Enabled:!1,expand:n(!0),collapse:n(!1),fadeIn:n(!0),fadeOut:n(!1),addToList:n(!0),deleteFromList:n(!1),addToSearchList:n(!0),deleteFromSearchList:n(!1),deleteFromListFast:n(!1),addAndDeleteInListFast:i(),showEdgeUI:n(!0),showPanel:n(!0),hideEdgeUI:n(!1),hidePanel:n(!1),showPopup:n(!0),hidePopup:n(!1),enterContent:t,exitContent:n(!1),enterContent2:t,exitContent2:n(!1),flyAway:function(){return s},reveal:n(!0),hide:n(!1)})}(window.originaljQuery||jQuery)}),define("webim",["animationsstub"],function(){!function(e){function t(){function t(){return Ht&&Ht.get_status()==qt.UserStatus.signedIn}function n(t,n){if($.$Sutra){var i=t.content(),r="$Sutra.WebIM.Flyouts.{0}".format(n.sutra.flyoutName);sutra(i,r);var o=t.getButton({buttonName:"action"});o&&sutra(e(o),r+"ActionButton");var a=e(".UserTitle",i);a.length>0&&sutra(a,r+"Title");var s=e(".UserContent",i);s.length>0&&sutra(s,r+"Message"),n.sutra.applyCustomTags&&n.sutra.applyCustomTags(r,i)}}function r(e,t,n,i,r,o){function a(t){0==u&&(c&&l?$.$pwc.client.blockOrUnblockMessenger(e,n,function(){o||(ln.addScenarioQoSStats(n?ce:ue,null,p,f,!1),b(f,!0)),m(i)},function(t){s(n,e),o||(ln.addScenarioQoSStats(n?ce:ue,t,p,f,!1),b(f,!1,t)),m(r)}):(c||s(n,e),o||b(f,c,c?null:g(t)),m(c?i:r)))}var l,c=!0,u=0,d=e.getContacts(),f=o||x.startScenario(n?Z:ee,G),p=(new Date).getTime();if(!ln.user)return o||b(f,!1,"userNotInitialized"),void m(r);for(var v=ln.user.get_skypeAddress()?ln.user.get_skypeAddress().get_address():null,_=0;_<d.length;_++){var y=d[_];if(y.getSourceId()===Q)l=y;else if(ln.isSkypeBlockEnabled()&&v&&(y.getSourceId()===X||y.getSourceId()===q)&&n!=y.getIsBlocked()&&$.SkyJS&&$.SkyJS.Outlook.isUserLinkStatusActive()){u++;var w=n?$.SkyJS.Outlook.blockContact:$.SkyJS.Outlook.unblockContact;w({data:{userId:v,contactId:h(y),reporterIp:P.ip,reportAbuse:t?1:0},success:function(e){u--,ln.addScenarioQoSStats(n?se:le,null,p,f,!1),a(e)},error:function(e){c=!1,u--,ln.addScenarioQoSStats(n?se:le,g(e),p,f,!1),a(e)}})}}a(null)}function s(t,i){var r=$.MsgrUI,o=t?r._getLocString("flyoutsBlockErrorMessage"):r._getLocString("flyoutsUnblockErrorMessage");o=o.format(i.getDisplayName().encodeHtml());var a={action:r._getLocString("flyoutsBlockErrorMessageButton")},s=k.Controls.Notifications.createTopBar({content:o,dismissalMode:k.Controls.Notifications.BarDismissalMode.Explicit,buttons:a});e(s).bind("aftershow.topBar",function(){n(s,{sutra:{flyoutName:"BlockUnblockErrorNotification"}}),e(s).unbind("aftershow.topBar")}),s.show().then(function(){s=null})}function d(e,t,n,i,r,o){function a(e){(!n||n&&u)&&(b(s,c,c?null:g(e)),m(c?r:o))}var s=x.startScenario(Y,G),l=(new Date).getTime();if($.SkyJS&&$.SkyJS.Outlook.isUserLinkStatusActive()){var c=!0,u=!1,d=ln.user.get_skypeAddress().get_address();$.SkyJS.Outlook.declineRequest({data:{userId:d,contactId:e},success:function(r){if(ln.addScenarioQoSStats(ae,null,l,s,!1),n&&ln.blockPerson(t,i,function(){u=!0,a(r)},function(){u=!0,c=!1,a(r)},s),i){var o=$.$pwc.getPerson(t);ln.reportAbuse(o,e)}a(r)},error:function(e){ln.addScenarioQoSStats(ae,g(e),l,s,!1),c=!1,a(e)}})}else b(s,!1,"userLinkNotActive"),m(o)}function g(e){return e?"{0}-{1}".format(e.code||"NoCode",e.text||"NoDescription"):"NoErrorData"}function h(e){return e.getSourceId()==X?e.getSkypeId():e.getObjectId()}function m(e,t){e&&e.apply(null,t||[])}function y(){Ee=!0}function B(){et(),Ee=!1,null!=xe&&($.clearInterval(xe),$.setTimeout(function(){N.title=Le},200),Re=0,je={},xe=null)}function W(t,n,i){var r=e("<div class='imToastHeader' />").text(t),o=e("<div class='imToastBody' />").append($.Microsoft.Live.Messenger.MessengerUtility.replaceEmoticons(n)),a=v(j),s=$.wLive.Controls.Notifications.createToast({title:r,content:o,sourceIcon:a,options:{moreCss:"t_cbr"}});F(i),Oe[i]=s,s.show().then(function(e){e.clicked&&$WLXIM.onToastClicked(i)})}function F(e){if(Oe[e])try{Oe[e].dismiss();var t=$.wLive.Controls.Notifications.getQueue();t&&t.removeNotification(Oe[e])}catch(n){D.logError("removeToastFromQueueError",n)}}function U(t,n){0!=e("#rec_conv").length&&(Ce=t,Qe=!0,Ae&&p(),Ie=Ht.get_contacts().findByIdWithoutRoleCheck(t),C(t,n||"other","chat"))}function _e(e){Xe(e,Fe)&&(We-=1)}function ye(e){Ze(e,Fe)&&We++}function De(e){Ze(e,je)&&Re++}function Xe(e,t){return 1==t[e]?(Fe[e]=0,!0):!1}function Ze(e,t){return 1!=t[e]?(t[e]=1,!0):!1}function et(){Be>0&&k.Animations.enterContent(e("#c_ofm"),{top:100,left:0}).then()}function tt(){return Ue?"open":"close"}function nt(t,n,i,r){if(n=n||t.get_currentAddress(),n&&n.get_network().get_isSkype()){if($.SkyJS){r=r||e("#sidebar")[0];var o=n.get_linkedContact().get_skypePendingOutbound&&n.get_linkedContact().get_skypePendingOutbound();return $.SkyJS.Outlook.isUserLinkStatusActive()?20==n.get_type()?(n.get_linkedContact().get_isBlocked()||ln.showSkypeInviteFlyout(r,t.get_id(),i),!1):8==n.get_type()&&o?(ln.showResendSkypeInviteFlyout(r,t.get_id(),i),!1):!0:(ln.showConnectToSkypeFlyout(r,$.MsgrUI._getLocString("flyoutsConnectToSkypeSendMessageText")),!1)}return!1}return!0}function it(t,n,i){return n=n||t.get_currentAddress(),n&&n.get_network().get_isSkype()?$.SkyJS?$.Microsoft.Live.Messenger.Services.SkyJSHelper.isCallInProgress?!1:(i=i||e("#sidebar")[0],$.SkyJS.Outlook.isUserLinkStatusActive()?!0:(ln.showConnectToSkypeFlyout(i,$.MsgrUI._getLocString("flyoutsConnectToSkypeCallText")),!1)):!1:!0}function rt(e,t,n){var i;i=t?t.get_network().get_id():e.get_currentAddress().get_network().get_id(),$.SkyJS.Outlook.startCall(e.get_skypeName(),e.get_cid(),n,Ht.createSkypeInitializationInfo(e),i)}function ot(){var t=50;return e("#m_wh").length>0?t=e("#m_wh").height()||t:e("#HeaderContainer").length>0&&(t=e("#HeaderContainer").height()),t}function at(){Ue=!1;var t=E("c_hiconm");null!=t&&t.setAttribute("aria-pressed","false");var n=e("#sidebar");n.is(":hidden")||(pt("onSidebarClosedEvent",null),L.rtl?k.Animations.hideEdgeUI(n,{left:ve,top:0}).then(function(){n.hide(),gt(),ft(),pt("onSidebarCloseCompletedEvent",null),e(t).css("background-color","")}):k.Animations.hideEdgeUI(n,{left:ve,top:0}).then(function(){e(n).css("left",""),n.hide(),gt(),ft(),pt("onSidebarCloseCompletedEvent",null),e(t).css("background-color","")}),Ve&&Ne&&Ne.sendWebimPaneStateChanged(tt())),ht(H)}function st(e){Qe&&Ce?ct(e):lt()}function lt(){var t=e("#chat_view");t.is(":hidden")?dt():k.Animations.fadeOut(t).then(function(){t.hide(),dt()})}function ct(t){var n=e("#rec_conv");n.is(":hidden")?ut(t):k.Animations.fadeOut(n).then(function(){n.hide(),ut(t)})}function ut(t){var n=e("#chat_view");n.is(":hidden")&&(n.show(),k.Animations.fadeIn(n).then(function(){var n=e(".ModernConversationHistoryControl").get(0);n&&(n.scrollTop=n.scrollHeight);var i=e(".ModernConversationInputControl_TextBox").get(0);null!=i&&1==t&&i.focus(),we&&we.set_isVisible(!0),pt("landingPageControlVisible",!1)})),Qe=!0,Ce&&(_e(Ce),F(Ce),ht(Ce)),Je=e("#chat_view").find("a").first()}function dt(){var t=e("#rec_conv");t.is(":hidden")&&(t.show(),k.Animations.fadeIn(t).then(function(){be&&(e(be.get_element()).show(),pt("landingPageControlVisible",!0))})),ht(O),Je=e("#rec_conv").find("[resourceid='ContactSearchInput']").first()}function ft(){e("#rec_conv").css("display","none")}function gt(){e("#chat_view").css("display","none")}function pt(t,n){e("#sidebar").trigger(t,n)}function ht(e){var t="cid="+P.cid+":state="+e;M.setCookie("Webim_Sidebar_Open",t,P.sd,0,null,1)}function vt(){Tt(0),Ht&&Ht.set_services(qt.SessionServices.notifications)}function mt(){Ht&&(Ht.set_services(qt.SessionServices.full),Lt("Full"))}function _t(e){if(ln.hasPresence()){e&&(en=e,en.pause("wim"));try{Ht.signOut()}catch(t){D.logError("Signout Error",t)}}}function yt(){Vt=1,Ut=P.WebIM,xt(),D.logAction("WebIM_DownloadingResources"),Ot(),bt()}function bt(){Me=new Date,$e=x.startScenario(K,G),ke=(new Date).getTime(),T.fetchCSS(Ut.c,St,void 0,"Gfx_Css_WlxWebIMUI_Download","Gfx"),T.fetchCSS(Ut.cc,St,void 0,"Gfx_Css_WebIMCore_Download","Gfx"),T.fetchScript(Ut.a,St,"window.live.shared.globalsettings.webim","Gfx_JS_WebIMStr_Download","Gfx"),require([V],function(){St(null,V)},function(){}),1==window.$Config.WebIM.si?T.fetchScript(Ut.slu+"?r="+Math.random(),wt,void 0,"Gfx_JS_Skype_LocJs","Gfx"):(D.logAction("WebIM_Skype_DisabledByConfig"),Ct()),Ut.pj&&T.fetchScript(Ut.pj,null,void 0,"Gfx_JS_Popover_Download","Gfx"),null==$.wLive.Search&&require([z],function(){},function(){})}function wt(e){$.SkyJS&&$.SkyJS.Live&&$.SkyJS.Live.Rollout?$.SkyJS.Live.Rollout.isEnabled(P.cid,P.mkt.toLowerCase())?(ln.addScenarioQoSStats(te,null,ke,$e,!1),pn=$.SkyJS.Live.Rollout.getPackageUrl(P.cid,P.mkt.toLowerCase()),Ut.eso&&$.location.search.indexOf("skyjsurl=")>-1&&/^https:\/\/(az351254|az299139|az340659|az359216|az415007)\.vo\.msecnd\.net\/\d+-\d+-\d+\/assets\/javascript\/outlook-package\.min\.js$/.test($.location.search.split("skyjsurl=")[1])&&(pn=$.location.search.split("skyjsurl=")[1]),T.fetchScript(pn,St,void 0,"Gfx_JS_Skype_Skyjs","Gfx")):(D.logAction("WebIM_Skype_Rollout_Disabled"),Ct()):(on=!0,ln.addScenarioQoSStats(te,de+"LocJs",ke,$e,!1),Ct())}function Ct(){var e=N.createElement("script");pn=e.src="",St(e)}function St(t,n){gn++,It(t,n),gn==fn&&(on?b($e,!1,de):b($e,!0),A.register("wlximuiouter",0,!0),Kt?$t():I(!1,de,null),0==e("#sidebar").length&&Kt&&(o(),e("#c_cme #c_hiconm").removeClass("c_md"),e(".c-Header .meArea .c_hiconm").removeClass("c_md"),a(),A.when("$pwc",0,f)))}function It(e,t){var n=e?"script"==e.nodeName.toLowerCase()?e.src:e.href:t;switch(n){case location.protocol+"//"+location.hostname+Ut.a:void 0!=$.GetString&&""!=$.GetString("live.webim.strings.connectedto")?ln.addScenarioQoSStats(ie,null,ke,$e,!1):(on=!0,ln.addScenarioQoSStats(ie,de+"Strings",ke,$e,!1));break;case V:case Ut.cs:ln.ML=Qt=$.Microsoft&&$.Microsoft.Live,ln.MLM=qt=Qt&&Qt.Messenger,qt?(Kt=!0,ln.addScenarioQoSStats(ne,null,ke,$e,!1)):(on=!0,ln.addScenarioQoSStats(ne,de+"Core",ke,$e,!1));break;case pn:$.SkyJS&&$.SkyJS.Outlook?ln.addScenarioQoSStats(re,null,ke,$e,!1):(on=!0,ln.addScenarioQoSStats(re,de+"SkyJS",ke,$e,!1))}}function $t(){var t=new qt.RpsAuthIdentity(P.email,P.cid,null,null);null!=P.BSI&&null!=P.BSI.xid&&t.set_experienceId(P.BSI.xid),e(t).bind("authenticationCompleted",kt)}function kt(t,n,i){var r=($.Microsoft.Live.Messenger,i.get_resultCode());if(r==qt.AuthenticationResultCode.failure)i.get_isUnsupportedBrowser()?(Yt=1,Ft(-1,"Authentication Failed: unsuported browser")):Ft(91,"Authentication Failed with status code: "+i.get_status());else if(D.logAction("WebIM_SigningIn"),ln.user=Ht=new qt.User(n,new qt.Services.PeopleCache),Ht.get_localEndpoint().set_name(Ut.n),Ht.get_services()!=qt.SessionServices.normal?(Tt(Ht.get_status()),Zt=1):i.get_multipleEndpointsNotSupported()?(Tt(0),vt()):(Tt(1),Ht.set_services(qt.SessionServices.full),Lt("Full")),Mt(),Ht.signIn(),!an&&sn&&sn.messagingModule&&sn.messagingModule.containerClassName){var o=e("."+sn.messagingModule.containerClassName);if(o){an=new $.MsgrUI.MessagingModuleControl(Ht,{containerWidth:o.width(),tabIndex:sn.messagingModule.tabIndex}),o.empty().append(an.render()),an.activate();var a=e(an.get_element());o.bind("resize",function(){a.triggerHandler("resize")})}}}function Lt(e){if(!Zt){Zt=1;var t={IMMode:e};$.$BSI.reportEvent("ClickedSelected.Messaging.IMStart",t),D.logDetails("WebIM_StartIM",t)}}function Tt(e){M.setCookie(cn,P.hcid+un+e,P.sd,0,0,1)}function xt(){var e=M.getCookie(cn,1);if(e){var t=e.indexOf(un);if(-1!=t&&e.substr(0,t)==P.hcid&&(e=parseInt(e.substr(t+1)),!isNaN(e)))return e}return 1}function Mt(){e(Ht).bind("signInCompleted",Et),e(Ht).bind("signedOut",Wt),e(Ht).bind("propertyChanged",Bt),e(Ht.get_contact().get_presence()).bind("propertyChanged",Rt),e(Ht.get_conversations()).bind("collectionChanged",At),e(window).bind("unload",Nt),e(window).bind("resize",Pt),e(window).bind("blur",y),e(window).bind("focus",B)}function Pt(){if(Pe&&Pe.length>0&&ln.isSidebarOpened()&&!ln.isSidebarOverlay()){var t=e(window).width()-ve+"px";try{Pe.width(t)}catch(n){}}}function At(t,n,i){var r=i.get_newItems();if(r&&r.length>0){var o=r[0];e(o).bind("messageReceived",Dt)}}function Dt(e,t,n){if(null!=Ht.get_contacts()&&Ht.get_contacts().get_count()>0&&(!t.get_userInitiated||!t.get_userInitiated())){var i=t.get_buddyContact();i&&ln.onConversationUpdated(i,n.get_message(),t instanceof $.Microsoft.Live.Messenger.GroupConversation)}}function Nt(){e(window).unbind("unload",Nt),e(window).bind("resize",Pt),e(Ht).unbind("signInCompleted",Et),e(Ht).unbind("signedOut",Wt),e(Ht).unbind("propertyChanged",Bt),e(Ht.get_contact().get_presence()).unbind("propertyChanged",Rt);var t=Ht.get_conversations();e(t).unbind("collectionChanged",At);for(var n=0;n<t.get_count();n++)e(t).unbind("messageReceived",Dt);if(null!=Ne){var i=e(Ne);i.unbind("StartGroupChat"),i.unbind("ToggleMessagingPane"),i.unbind("WebImTakeFocus"),i.unbind("RegisterThreadId")}}function Et(e,t,n){n.get_resultCode()==qt.SignInResultCode.success?(tn=1,ln.isFull()||mt(),u(),I(!0,null,null)):I(!1,null,n.get_error()),Xt||M.setSessionCookie("WebIM","1"),jt(),Ot(),A.register("$WLXIM.UserSignedIn"),D.logAction("WebIM_SignedIn")}function Bt(e,t,n){var i=n.get_propertyName();"Services"!=i&&"Status"!=i||(rn&&Ht&&Ht.get_status()==qt.UserStatus.signedIn&&(rn=0,vt()),!tn&&Ht&&Ht.get_status()==qt.UserStatus.signedIn&&(tn=1),nn&&Ht&&Ht.get_status()==qt.UserStatus.signedIn&&(nn=0,mt()),Ht&&Ht.get_status()!=qt.UserStatus.signedIn&&l(),Ot())}function Rt(e,t){var n=t.get_status();n!=qt.PresenceStatus.offline&&Tt(n),Ht&&Ht.get_presence().get_status()==qt.PresenceStatus.offline?Ht.get_status()==qt.UserStatus.signedIn&&c():u()}function Wt(e,t,n){n.get_reason()||en&&en.resume("wim"),l()}function jt(){Xt||(Xt=1)}function Ft(e,t){Jt=1,Ot(),jt(),D.log({eventType:"WebIM_InitializationFailure",resultCode:e,resultDetails:{message:t}})}function Ot(){for(var t=0,n=dn.clone(),i=n.length;i>t;t++)try{n[t]()}catch(r){D.logError("WebIM_InformStateChagne",r)}e(ln).trigger("stateChange")}var Ht,Ut,Qt,qt,Xt,Vt,zt,Gt,Kt,Jt,Yt,Zt,en,tn,nn,rn,on,an,sn,ln=this,cn="pres",un="=",dn=[],fn=5,gn=0,pn="";ln.isWac=void 0,ln.wacThreadId=void 0,ln.wacReady=function(){return!(!ln.isWac||!ln.wacThreadId)},ln.isOff=function(){return!(nn||Vt&&0!=xt())},ln.isUnsupported=function(){return Yt},ln.isError=function(){return!ln.isOff()&&(Jt||Ht&&Ht.get_status()==qt.UserStatus.signedOut)},ln.isLoading=function(){return!(ln.isOff()||ln.isError()||Ht&&Ht.get_status()!=qt.UserStatus.signingIn&&Ht.get_status()!=qt.UserStatus.signingOut)},ln.isWaitingToReconnect=function(){return!ln.isOff()&&Ht&&Ht.get_status()==qt.UserStatus.autoReconnectWaiting},ln.hasContacts=function(){return tn},ln.hasNotify=function(){return t()},ln.hasPresence=function(){return t()&&Ht.get_services()>qt.SessionServices.notifications},ln.isFull=function(){return t()&&Ht.get_services()==qt.SessionServices.full},ln.addScenarioQoSStats=function(e,t,n,i,r){if(i){var o={api:e,dependent:G};"undefined"!=typeof t&&null!=t&&(o.error=t),r&&(o.errorType="c"),k.ScenarioQoSStats.add(o,n,i),D.log({eventType:e,resultCode:t})}},ln.addStateListener=function(e){dn.push(e)},ln.removeStateListener=function(e){dn.remove(e)},ln.showFlyout=function(t){var i=k.Controls.Notifications.createFlyout(t);e(i).bind("aftershow.flyout",function(){n(i,t),t.onAfterShow&&t.onAfterShow(i),e(i).unbind("aftershow.flyout")});var r;e(i).bind("beforedismiss.flyout",function(){r=i.content(),e(i).unbind("beforedismiss.flyout")}),t.onButtonClick&&e(i).bind("buttonclick.flyout",function(){t.onButtonClick(i)}),i.show().then(function(e){"action"===e.buttonClicked?t.performAction&&t.performAction(r):t.onDismiss&&t.onDismiss(r)}),r=null},ln.showFirstShortCircuitFlyout=function(e,t){var n=$.MsgrUI,i=$.$pwc.getPerson(e);if(i){var r={content:n._getLocString("firstShortCircuitFlyoutMessage").format(i.getOrderedName()),anchor:t,sutra:{flyoutName:"firstscmessageflyout"}};ln.showFlyout(r)}},ln.isSkypeInvitesEnabled=function(){return!!window.$Config.WebIM.sv&&Kt&&ln.MLM.Services.SkyJSHelper.skypeEnabled},ln.isSkypeBlockEnabled=function(){return!!window.$Config.WebIM.sb&&Kt&&ln.MLM.Services.SkyJSHelper.skypeEnabled},ln.showBlockFlyout=function(t,n,i,r,o){var a=$.MsgrUI,s=$.$pwc.getPerson(n);if(s){var l=o||a._getLocString("flyoutsBlockMessage").format(s.getOrderedName()),c={content:ge.format(l.encodeHtml(),a._getLocString("flyoutsReportAbuse").encodeHtml()),anchor:t,buttons:{action:a._getLocString("flyoutsBlockButton")},sutra:{flyoutName:"BlockFlyout",applyCustomTags:function(t,n){var i=e("input",n);sutra(i,t+"ReportAbuse")}},performAction:function(t){var o=e("input",t)[0].checked;ln.blockPerson(n,o,function(){o&&ln.reportAbuse(s,null),m(i,[!0])},r,null)},onAfterShow:function(t){var n=e(t.content()),i=e(".wim_block_repabuse",n),r=e(t.getButton({buttonName:"action"}));i.find("label").bind("click",function(){var e=i.find(":checkbox");e.prop("checked",!e.is(":checked"))}),e(".ButtonArea",n).css("min-width",i.width()+r.width()+30)},onDismiss:function(t){e(".wim_block_repabuse",t).find("label").unbind(),m(i,[!1])}};ln.showFlyout(c)}},ln.showDeclineInviteFlyout=function(t,n,i,r,o){var a=$.MsgrUI,s={title:a._getLocString("flyoutsDeclineInviteTitle").encodeHtml(),content:fe.format(a._getLocString("flyoutsBlockCheckbox").encodeHtml(),a._getLocString("flyoutsReportAbuse").encodeHtml()),anchor:t,buttons:{action:a._getLocString("flyoutsDeclineButton")},sutra:{flyoutName:"DeclineInviteFlyout",applyCustomTags:function(t,n){var i=e("input",n);sutra(i[0],t+"Block"),sutra(i[1],t+"ReportAbuse")}},performAction:function(t){var a=e("input",t),s=a[0].checked,l=a[1].checked;d(i,n,s,l,function(){m(r,[!0])},o)},onAfterShow:function(t){var n=e(t.content());n.find("label").bind("click",function(t){var n=e(t.target).parent().find(":checkbox");n.prop("checked",!n.is(":checked"))})},onDismiss:function(t){e(t).find("label").unbind(),m(r,[!1])}};ln.showFlyout(s)},ln.showConnectToSkypeFlyout=function(t,n){var i=$.MsgrUI;n=n||i._getLocString("flyoutsConnectToSkypeAddContactText");var r={content:n.encodeHtml(),anchor:t,buttons:{action:i._getLocString("flyoutsConnectToSkypeButton")},sutra:{flyoutName:"ConnectToSkypeFlyout"},onButtonClick:function(t){e(t).unbind("buttonclick.flyout");var n=P.WebIM.sau,i=$.open(n,"_blank","scrollbars=0,resizable=1,location=0, width=720,height=520"),r=$.setInterval(function(){i.closed&&($.clearInterval(r),$.location.reload())},500)},performAction:function(){}};ln.showFlyout(r)},ln.showSkypeInviteFlyout=function(e,t,n,i,r){var o=$.MsgrUI,a={content:o._getLocString("flyoutsAddToSkypeText").encodeHtml(),anchor:e,buttons:{action:o._getLocString("flyoutsAddToSkypeButton")},sutra:{flyoutName:"AddToSkypeContactsFlyout"},performAction:function(){ln.sendSkypeInvite(t,n,function(){m(i,[!0])},r)},onDismiss:function(){m(i,[!1])}};ln.showFlyout(a)},ln.showResendSkypeInviteFlyout=function(e,t,n,i,r){var o=$.MsgrUI,a=$.$pwc.getPerson(t);if(a){var s={content:o._getLocString("flyoutsResendSkypeRequestText").format(a.getDisplayName()).encodeHtml(),anchor:e,buttons:{action:o._getLocString("flyoutsResendSkypeRequestButton")},sutra:{flyoutName:"ResendSkypeRequestFlyout"},performAction:function(){ln.sendSkypeInvite(t,n,i,r)},onDismiss:function(){i&&i()}};ln.showFlyout(s)}},ln.reportAbuse=function(e,t){if(null!=e){var n=e.getContacts();if(n.length>0){var i=Ht.get_contacts().findByIdWithoutRoleCheck(n[0].getId());if(null!=i)for(var r=0;r<i.get_addresses().get_count();r++){var o=i.get_addresses().get_item(r);o.get_supportsReportAbuse()&&Ht.reportAbuse(o,null)}}}else Ht.reportAbuse(null,t)},ln.sendSkypeInvite=function(e,t,n,i){function r(e){0==o&&(ln.addScenarioQoSStats(oe,a?null:g(e),l,s,!1),b(s,a,a?null:g(e)),m(a?n:i))}var o=0,a=!0,s=x.startScenario(J,G),l=(new Date).getTime(),c={skypeinvitesource:t};if($BSI.reportEvent("WebIM.SkypeInviteSent",c),D.logDetails("WebIM_SkypeInviteSent",c),$.SkyJS){var u=$.$pwc.getPerson(e);if(u)for(var d=u.getContacts(),f=ln.user.get_skypeAddress().get_address(),p=0;p<d.length;p++){var v=d[p],_=v.getOrderedName();(v.getSourceId()===X||v.getSourceId()===q&&v.getSkypePendingOutbound())&&(o++,$.SkyJS.Outlook.sendRequest({data:{userId:f,contactId:h(v),greeting:_?$.MsgrUI._getLocString("flyoutsSendInviteGreeting").format(_):""},success:function(e){o--,r(e)},error:function(e){a=!1,o--,r(e)}}))}}r(null)},ln.blockPerson=function(e,t,n,i,o){var a=$.$pwc.getPerson(e);a&&r(a,t,!0,n,i,o)},ln.unblockPerson=function(e,t,n){var i=$.$pwc.getPerson(e);i&&r(i,!1,!1,t,n,null)},ln.signIn=function(){Ht&&Ht.get_status()==qt.UserStatus.signedIn?(Tt(1),mt()):(nn=1,rn=0,Ot())},ln.signOut=function(){Ht&&Ht.get_status()==qt.UserStatus.signedIn?vt():(nn=0,rn=1,Ot())},ln.reconnect=function(){ln.isWaitingToReconnect()&&Ht.signIn()},ln.toggleSidebar=function(t){var n=!t||"mousedown"==t.type||13==t.which;if(n){var i=e("#sidebar"),r=e("div.Files-belowHeader"),o=e("div.od-Photos-belowHeader");if(r.length>0?$WLXIM.setPaneToResize(r):o.length>0&&$WLXIM.setPaneToResize(o),
i.length>0)if(i.is(":hidden")){if($WLXIM.isWac&&$WLXIM.wacThreadId){var a=Ht.findContactByThreadId($WLXIM.wacThreadId);if(!a)return;U(a.get_id(),"wac"),ln.showSidebar(!1)}else ln.showSidebar(!0);if(t&&13==t.which){var s=i.find("a");s.length>0&&s[0].focus()}}else S("header"),at(),pt("landingPageControlVisible",!1)}},ln.dismissSidebar=function(){S("closeButton"),at()},ln.getChatViewOpenedContactId=function(){return Ce},ln.onChatViewBack=function(){lt(),Qe=!1,Ce=null},ln.onConversationSelected=function(e,t,n){U(n.buddyId,"recentConversations"),ct(!0)},ln.onConversationUpdated=function(e,t,n){var i=t.get_conversationId().split(":")[1].toLowerCase();if(!$WLXIM.isWac||$WLXIM.wacThreadId===i){var r=$.MsgrUI,o=$.Microsoft.Live.Messenger;if(1==Ee&&!t.get_reloaded()&&t.get_type()==o.MessageType.textMessage&&!t.get_sender().get_isUser()&&(De(e.get_id()),!Ve)){var a=null!=e.get_firstName()?e.get_firstName():e.get_displayName();hn(1==Re&&n?r._getLocString("newGroupMessageNotification"):1==Re&&null!=a?r._getLocString("newMessageNotification").format(a).trim():r._getLocString("newMultipleMessageNotification").format(Re).trim())}if(!(t.get_reloaded()||t.get_type()!=o.MessageType.textMessage&&t.get_type()!=o.MessageType.threadActivityMessage||Ue&&Qe&&Ce&&Ce==e.get_id()||null==e.get_id()||""==e.get_id())){if(t.get_sender().get_isUser())return void _e(e.get_id());if(ye(e.get_id()),!t.get_isOfflineMessage()){var s;if(t.get_type()==o.MessageType.textMessage)s=t.get_text();else{if(!r||!r.Utility)return;s=r.Utility.getActivityMessageString(t)}if(s){var l=e.get_displayName();W(l,s,e.get_id())}}}}},ln.removeAllToasts=function(){for(var e in Oe)F(e)};var hn=function(){var e=!1,t=function(){e?(N.title=Te,e=!1):N.title==Te?N.title=Le:(Le=N.title,N.title=Te)};return function(n){e=!0,Te=n,null==xe&&(Le=N.title,xe=$.setInterval(t,1e3))}}();ln.updateMessagingCount=function(t){var n;if(t!==Be){Be=t,n=t>99?"99+":t>0?t:"";var i=e("#c_ofm"),r=i.parent();i.html(n),r.parent().width(i.width()+me+"px"),et(),Ve&&$WLXIM.wacThreadId&&Ne&&Ne.sendWebimUnreadCountChanged(t,tt())}},ln.isSidebarOpened=function(){return Ue},ln.isSidebarOverlay=function(){return He&&e(window).width()<he},ln.setPaneToResize=function(e){Pe=e,$WLXIM.isSidebarOpened()&&i(null,ln.isSidebarOverlay())},ln.resetSidebarOverlaySettings=function(){He=!1,he=pe},ln.setSidebarOverlay=function(e){He=e},ln.setSidebarOverlayWindowWidth=function(e){He=!0,he=e},ln.setSidebarToFullScreen=function(t){qe=1==t?"0px":ot()+"px",e("#sidebar").css("top",qe)},ln.bindToCustomPostMessage=function(t,n){e(Ne).bind(t,function(e,t){ze||(Ne.sendWebImFirstIncomingMessage(),ze=!0),n(e,t)})},ln.sendCustomPostMessage=function(e,t){Ge||(Ne.sendWebImFirstOutgoingMessage(),Ge=!0),e.apply(ln,t)},ln.registerWacChat=function(t){function n(e,t){i(t.groupId)}function i(e){$WLXIM.wacThreadId=e.toLowerCase(),A.register("WACChatThreadIdChanged")}function r(e,t){var n=t.groupId.toLowerCase(),r=Ht.findContactByThreadId(n);null!=r?ln.startConversationWithContactId(r.get_id(),"wac",!0):Ht.addToStartGroupChatPendingList(n),i(n)}function o(e,t){var n=t.htmlEvent;ln.toggleSidebar(n)}function a(){if(ln.isSidebarOpened())if(e("#rec_conv").is(":visible")){var t=e("#rec_conv").find("[resourceid='ContactSearchInput']").first();t.blur(),t.focus()}else{var n=e("#chat_view").find("[resourceid='TextBox']").first();if(n.attr("disabled")){var i=e("#chat_view").find("a").first();i.blur(),i.focus()}else n.blur(),n.focus(),n.val(n.val())}}function s(t){9==t.which&&null!==Je?(_(),t.shiftKey&&e(":focus")[0]===Je[0]?(Ye.focus(),t.preventDefault()):t.shiftKey||e(":focus")[0]!==Ye[0]||(Je.focus(),t.preventDefault())):117==t.which&&t.ctrlKey&&(t.preventDefault(),Ne.sendWebimGiveFocus(t.shiftKey?"backward":"forward",tt()))}if(Ht&&MC.GroupChatFeatures.phase!==MC.GroupChatPhase.disabled){var l=Ht.get_status(),c=l===qt.UserStatus.signedIn,u=l===qt.UserStatus.autoReconnectWaiting;(c||u)&&(Ne=t,Ne.sendWebimReady(Be,tt()),0==Ve&&(e(Ne).bind("StartGroupChat",r),e(Ne).bind("ToggleMessagingPane",o),e(Ne).bind("WebImTakeFocus",a),e(Ne).bind("RegisterThreadId",n),e(N).keydown(s)),e("#sidebar").addClass("is_wac_registered"),Ve=!0)}},ln.startConversationWithContactId=function(e,t,n){var i=Ht.get_contacts().findByIdWithoutRoleCheck(e),r=Ht.get_aggregatedConversations().getAggregatedConversationByContact(i);Se=null!=r&&null!=r.get_currentConversation()?r.get_currentConversation().get_buddyAddress():i.get_currentAddress(),null!=Se&&(U(e,t),ln.showSidebar(n))},ln.startConversationWithContact=function(e,t,n,i,r){var o=$WLXIM.getConversationAddress(e,t,n);nt(e,o,r,i)&&(Se=o,U(e.get_id(),r),ln.showSidebar(!0))},ln.startConversationWithIMAddress=function(e,t,n,i){nt(e,t,n,i)&&(Se=t,n=n||"",U(e.get_id(),n),ln.showSidebar(!0))},ln.startAudioCall=function(e,t,n,i){return it(e,n,i)?(rt(e,n,!1),C(e.get_id(),t,"voice"),!0):!1},ln.startVideoCall=function(e,t,n,i){return it(e,n,i)?(rt(e,n,!0),C(e.get_id(),t,"video"),!0):!1},ln.onToastClicked=function(e){U(e,"toast"),ln.showSidebar(!0)},ln.switchPresence=function(e){Ht&&(Ht.get_presence().set_status(e),Ht.get_settings().set_userPresencePreference(e))},ln.isVVWindow=function(){return Ut.vv},ln.showSidebar=function(t){if(0!=e("#rec_conv").length){var n=E("c_hiconm");null!=n&&n.setAttribute("aria-pressed","true");var i=e("#sidebar");i.is(":hidden")?(i.show(),pt("onSidebarOpenedEvent",ln.isSidebarOverlay()),be&&w(),L.rtl?i.css("left","0"):i.css("right","0"),k.Animations.showEdgeUI(i,{left:e(window).width(),top:0}).then(function(){if(st(t),pt("onSidebarOpenCompletedEvent",ln.isSidebarOverlay()),L.IE_M7&&Pe&&Pe.length>0){var i=Pe.get(0),r=i.style.display;i.style.display="none",i.style.display=r}e(n).css("background-color",R)})):st(t),Ue=!0,Ve&&Ne&&Ne.sendWebimPaneStateChanged(tt())}},ln.getSidebarOpenCookieState=function(){var e=M.getCookie("Webim_Sidebar_Open");if(e){var t=e.split(":state=");if(t&&2==t.length&&t[0].endsWith(P.cid)&&t[1].length>0)return t[1]}return null},ln.init=function(e,t){sn=t,gn>=fn?D.logAction("WebIM_AlreadyLoaded"):Vt?D.logAction("WebIM_Alreadyoading"):zt?(D.logAction("WebIM_DownloadPaused"),Gt=1):yt(),$.$Logout.add(_t)},ln.pause=function(){Vt||(zt=1)},ln.resume=function(){zt=0,Gt&&yt()},ln.setTestFlags=function(e){Ut.eso&&(Ke=e)},ln.getTestFlags=function(){if(0==Ke&&Ut.eso&&$.location.search.indexOf("testflags=")>-1)for(var e=$.location.search.substring(1).split("&"),t=0,n=e.length;n>t;t++)if(e[t].startsWith("testflags=")){Ke=parseInt(e[t].split("=")[1]),isNaN(Ke)&&(Ke=0);break}return Ke},ln._pres=xt,ln._inform=Ot}function n(){if(P.WebIM&&P.WebIM.cs){$.$WLXIM=new t;var n=e("body").attr("id");$.$WLXIM.isWac=n&&n.indexOf("Wac")>-1,setTimeout(function(){A.when("$BSI",0,y)},P.WebIM.delay||0)}}function i(t,n){if(Pe&&Pe.length>0&&!n){if(L.rtl&&L.Firefox){var i=ve+Pe.width()-e(window).width();Pe.css("left",i+"px")}var r=e(window).width()-ve+"px";Pe.width(r),window.Shared&&Shared.ElementEventing.raise(window,"resize")}e("body").addClass("webim-opened")}function r(t){Pe&&Pe.length>0&&(Pe.width(""),L.rtl&&L.Firefox&&Pe.css("left","0"),Shared.ElementEventing.raise(window,"resize")),e("body").removeClass("webim-opened")}function o(){var t=m(B,N.body,"sidebar",null);t.setAttribute("persist","1"),$WLXIM.sidebar=t,A.register("$WLXIM.SidebarCreated"),e($WLXIM.sidebar).bind("onSidebarOpenedEvent",i),e($WLXIM.sidebar).bind("onSidebarCloseCompletedEvent",r),e($WLXIM.sidebar).addClass("t_sbgc"),A.register("wlxim_startconversation",$WLXIM.startConversationWithContact),A.when("NotificationControls",0,function(){k.Controls.Notifications.getQueue().start()}),e(t).css("top",qe),$.$Sutra&&$.$Sutra.WebIM&&sutra(t,"$Sutra.WebIM.WebIMSidebar")}function a(){var t=$.MsgrUI,n=e("#sidebar").get(0),i="<span id='sidebar_close_img' tabindex='0' class='imCloseImg' style='background-image:url("+v(W)+");display:block;' role='button' aria-pressed='false'/>",r=13,o=32;e(n).append(i),e(n).find("#sidebar_close_img").on("click",function(){return $WLXIM.dismissSidebar(),!1}).on("keyup",function(e){return e.keyCode===o||e.keyCode===r?($WLXIM.dismissSidebar(),!1):void 0});var a=m(B,n,"sidebar_info",null),c=v(F),u="<div style='text-align:center'><img src='"+c+"' class='signin_loading_img' /> "+t._getLocString("signingInInfo")+"</div>";s(a,"signing",u,""),s(a,"reconnect","","<button class='default sidebar_button' type='button' onclick='$WLXIM.reconnect()'>"+t._getLocString("messagingPaneReconnectNow")+"</button>"),s(a,"signout",t._getLocString("messagingPaneSignOut"),"<button class='default sidebar_button' type='button' onclick='$WLXIM.signIn()'>"+t._getLocString("messagingPaneSignInButton")+"</button>"),s(a,"resignin",t._getLocString("messagingPaneSignOut"),"<button class='default sidebar_button' type='button' onclick='location.reload()'>"+t._getLocString("messagingPaneSignInButton")+"</button>");var d=m(B,n,"rec_conv",null),f=m(B,d,"rec_conv_body",null),g=m(B,n,"chat_view",null),p=m(B,g,"chat_view_body",null);l(),$.$Sutra&&$.$Sutra.WebIM&&(sutra(n,"$Sutra.WebIM.WebIMSidebar"),sutra(d,"$Sutra.WebIM.RecentConversationsView"),sutra(f,"$Sutra.WebIM.RecentConversationsList"),sutra(g,"$Sutra.WebIM.ChatView"),sutra(p,"$Sutra.WebIM.ChatViewBody"))}function s(t,n,i,r){var o="<table class='sidebar_info_table "+n+"'><tr style='vertical-align: bottom; height:50%'><td><div class='sidebar_info_top'>"+i+"</div></td></tr><tr style='vertical-align: top; height:50%'><td><div class='sidebar_info_bottom'>"+r+"</div></td></tr></table>";e(o).appendTo(t)}function l(){var t=$.Microsoft.Live.Messenger,n=$.MsgrUI,i=e(".sidebar_info");if(i.find("table").hide(),$WLXIM.isWaitingToReconnect()){var r=i.find("table.reconnect"),o=n._getLocString("messagingPaneReconnect").format($WLXIM.getReconnectingTime().min+":"+$WLXIM.getReconnectingTime().sec);r.find(".sidebar_info_top").text(o),r.show(),$.setTimeout(l,1e3)}else if($WLXIM.isLoading())i.find("table.signing").show();else if($WLXIM.user&&$WLXIM.user.get_status()==t.UserStatus.signedOut)i.find("table.resignin").show();else{if(!$WLXIM.user||$WLXIM.user.get_presence().get_status()!=t.PresenceStatus.offline||$WLXIM.user.get_status()!=t.UserStatus.signedIn)return void u();c()}d()}function c(){var t=e(".sidebar_info");d(),t.find("table").hide(),t.find("table.signout").show(),we&&(we.dispose(),we=null,e("#chat_view_body").empty())}function u(){var t=e(".sidebar_info");return t.is(":hidden")?void t.hide():(k.Animations.fadeOut(t).then(function(){t.hide()}),void(Ce&&$WLXIM.startConversationWithContactId(Ce,Xe,!0)))}function d(){var t=e(".sidebar_info");t.is(":hidden")&&(t.show(),k.Animations.fadeIn(t).then(function(){}),$WLXIM.removeAllToasts())}function f(){A.when("$WLXIM.UserSignedIn",0,function(){uiQosApiStartTime=(new Date).getTime(),g(),Ae=!0,De=!1,$WLXIM.isWac||e($WLXIM.user.get_conversations()).bind("getRecentConversationsCompleted",function(){var e=$WLXIM.getSidebarOpenCookieState();e&&e!=H&&(e!=O&&null!=$WLXIM.user.get_contacts().findByIdWithoutRoleCheck(e)?$WLXIM.startConversationWithContactId(e,Xe,!1):$WLXIM.showSidebar(!1))})})}function g(){var t=null,n=$.$pwc.settings.getImHistoryEnabled();n&&(t=h()),be=new $.MsgrUI.LandingPageControl($WLXIM.user),e("#rec_conv_body").append(be.render()),be.activate(),Ue&&w(),p()}function p(){var t=$.MsgrUI,n=e("#chat_view_body");we&&(n.empty(),we.dispose()),Se?(we=new t.ModernConversationControl(n[0],null,Se,$WLXIM.user),Se=null):Ce&&(we=new t.ModernConversationControl(n[0],Ce,null,null))}function h(){var e=P.WebIM.mh;return"javascript:window.location='"+e+"'"}function v(e){return P.WebIM.imgBase+e}function m(e,t,n,i){var r=N.createElement(e);return i&&(r.innerHTML=i),n&&(r.id=n,r.className=n),t&&t.appendChild(r),r}function _(){var t='a[href][tabindex!="-1"]:visible, textarea[tabindex!="-1"]:visible:not([disabled])',n=e(".WebIMUpsell:visible, .RecentConversationsControl_ConnectedTo, .ModernConversationControlBottom","#sidebar > div:visible");Ye=e(t,n).last()}function y(){var t=$WLXIM;if(P.WebIM.f||t.init(),A.register("wlxim",0,!0),e(".App #BelowHeader").length>0)$WLXIM.setPaneToResize(e(".App #BelowHeader"));else{var n=e("#c_base"),i=e("div.Files-belowHeader"),r=e("div.od-Photos-belowHeader");i.length>0?$WLXIM.setPaneToResize(i):r.length>0?$WLXIM.setPaneToResize(r):n.length>0&&$WLXIM.setPaneToResize(n)}0==e("#c_header").length?$WLXIM.setSidebarToFullScreen(!0):$WLXIM.setSidebarToFullScreen(!1)}function b(e,t,n){e&&(x.stopScenario(e,t,n),e.id&&D.log({eventType:e.id,resultCode:t?null:n},!t))}function w(){var e={ConversationCount:be.get_visibleItemCount()};$.$BSI.reportEvent("WebIM.RecentConversationCount",e),D.logDetails("WebIM_RecentConversationCount",e)}function C(e,t,n){if(t!==Xe&&Ze.indexOf(e)<0){Ze.push(e);var i={WebIMLaunchPoint:t,ConversationType:n,isOverlayMode:$WLXIM.isSidebarOverlay()};$.$BSI.reportEvent("WebIM.ConversationStarted",i),D.logDetails("WebIM_ConversationStarted",i)}}function S(e){var t={WebIMCloseLocation:e};$.$BSI.reportEvent("WebIM.SidebarHidden",{WebIMCloseLocation:e}),D.logDetails("WebIM_SidebarHidden",t)}function I(t,n,i){var r={};r.TimeToLogin=Math.floor((new Date-Me)/1e3),r.SignInSuccess=t,r.Culture=P.mkt,r.MessengerError=i||"-",r.WebImError=n||"-",r.EndpointId=t?$WLXIM.user.get_localEndpoint().get_id().toString():"-",r.WLContacts=0,r.SkypeContacts=0,r.ConnectContacts=0;try{var o=$.Microsoft.Live.Messenger;if(r.IsSkypeLogin=o.Services.SkyJSHelper.skypeEnabled,r.IsSkypeLogin){var a=o.Services.SkyJSHelper.initErrorCode;r.SkyjsErrorCode=""==a?"-":a,r.SkypeAccountType=$.SkyJS.Outlook.isUserLinkStatusActive(),r.SkypeLoginTime=$WLXIM.user.get_identity().skypeLoginTime}for(var s=0;s<$WLXIM.user.get_contacts().get_count();s++)for(var l=$WLXIM.user.get_contacts().get_item(s).get_addresses(),c=0;c<l.get_count();c++){var u=l.get_item(c).get_type();switch(u){case o.IMAddressType.windowsLive:r.WLContacts++;break;case o.IMAddressType.skype:r.SkypeContacts++;break;case o.IMAddressType.connect:r.ConnectContacts++}}}catch(d){D.logError("WebIM_SkypeReportingError",d)}var f={TimeToLogin:0,SkypeLoginTime:0,IsSkypeLogin:!1,SignInSuccess:!1,SkyjsErrorCode:"-",SkypeAccountType:!1,Culture:"-",MessengerError:"-",WebImError:"-",EndpointId:"-",WLContacts:0,SkypeContacts:0,ConnectContacts:0},g=e.extend({},f,r);$BSI.reportEvent("WebIM.LoginTime",g),D.logDetails("WebIM_LoginTime",g)}var $=window,k=$.wLive,L=$.$B,T=$.$Network,x=$.$ScenarioQoS,M=$.$Cookie,P=$.$Config,A=$.$Do,D=k.People.Reporter,N=$.document,E=$._ge,B="DIV",R="rgba(0, 0, 0, 0.24)",W="webim/imagestripmessaging.png",j="webim/messaging_icon_1.png",F="common/spinner_grey_40_transparent.gif",O=0,H=-1,U="FB",Q="WL",q="SKYPE",X="SCD",V="webimend",z="searchshared",G="WebIM",K="WebIM_CoreScriptLoad",J="WebIM_SkypeSendRequest",Y="WebIM_SkypeDeclineRequest",Z="WebIM_BlockRequest",ee="WebIM_UnblockRequest",te="WebIM_CoreScriptLoad_Loader",ne="WebIM_CoreScriptLoad_MessengerCore",ie="WebIM_CoreScriptLoad_MessengerStrings",re="WebIM_CoreScriptLoad_SkyJS",oe="WebIM_SkypeSendRequest_Call",ae="WebIM_SkypeDeclineRequest_Call",se="WebIM_SkypeBlockRequest_Call",le="WebIM_SkypeUnblockRequest_Call",ce="WebIM_MessengerBlockRequest_Call",ue="WebIM_MessengerUnblockRequest_Call",de="ScriptLoadFailure",fe='<div><div class="wim_decline_block"><input tabindex="-1" title="{0}" aria-label="{0}" type="checkbox" value="Block"><label title="{0}">{0}</label></div><div><input tabindex="-1" title="{1}" aria-label="{1}" type="checkbox" value="ReportAbuse"><label title="{1}">{1}</label></div></div>',ge='<div class="wim_block_message">{0}</div><div class="wim_block_repabuse"><input tabindex="-1" title="{1}" aria-label="{1}" type="checkbox" value="ReportAbuse"><label title="{1}">{1}</label></div>',pe=1e5,he=pe,ve=300,me=20,_e=new Array(1);_e[U]="sn/PsaMedium/FBActive.png";var ye=new Array(1);ye[U]="Facebook";var be,we,Ce,Se,Ie,$e,ke,Le,Te,xe,Me,Pe,Ae,De,Ne,Ee=!1,Be=0,Re=0,We=0,je={},Fe={},Oe={},He=!1,Ue=!1,Qe=!1,qe=50,Xe="resumedConversation",Ve=!1,ze=!1,Ge=!1,Ke=0,Je=null,Ye=null,Ze=[];n()}(window.originaljQuery||jQuery)}),define("wliveloaded",["webim"],function(){!function(){$Do.register("$WLiveLoaded")}()}),define("jquery.simplecallbacks",["jquery-1.7.2"],function(){!function(e,t,n){"use strict";var i=t;t.simpleCallbacks=function(){var e=[];return{fire:function(){for(var t=e,n=0;n<t.length;n++)t[n].apply(this,arguments)},add:function(t){e=e.slice(0),e.push(t)},remove:function(t){e=i.grep(e,function(e){return e!==t})},empty:function(){e=[]}}}}(this,window.originaljQuery||window.jQuery)}),define("jquery.observable",["jquery.simplecallbacks"],function(){!function(e,t,n){"use strict";function i(e,i,r,s){e=M(e)?e[0]:e;var l=r?{eventType:i,namespace:r}:a(i),c=l.eventType,u=l.namespace,d=k[c],f=e[S.expando];if(f){var g=f.events;if(g){var p=g[c];if(p&&p.length){for(var h=p.length-1;h>=0;--h){var v=p[h];u!==n&&!o(u,v.namespaceParts)||s!==n&&s!==v.handler||(d.remove.call(e,v),p.splice(h,1))}p.length||(delete g[c],t.isEmptyObject(g)&&delete f.events)}}}}function r(e,t,r){i(e,t,n,r)}function o(e,t){if(!t)return!1;for(var n=e.split("."),i=!0,r=0;i&&r<n.length;r++)n[r]&&(i=i&&t[n[r]]);return i}function a(e){var t=e,n="",i=e.indexOf(".");return i>-1&&(t=e.substr(0,i),n=e.substr(i+1)),{eventType:t,namespace:n}}function s(e,t,i){l(e,t,n,n,i)}function l(e,t,n,i,r){e=M(e)?e[0]:e;for(var o=e[S.expando]=e[S.expando]||{},s=o.events=o.events||{},l=a(t),c=l.eventType,u=l.namespace,d=s[c]=s[c]||[],f={},g=u.split("."),p=0;p<g.length;p++)f[g[p]]=!0;d.push({namespace:u,namespaceParts:f,data:i,handler:r,type:c,origType:c,selector:n})}function c(e,t,n){e=M(e)?e[0]:e;var i=e[S.expando];if(i){var r=i.events;if(r){var o=r[t];if(o)for(var a=0;a<o.length;a++){var s=o[a];s.handler.call(e,{data:s.data,type:t,handleObj:s,target:e},n)}}}}function u(e){return M(e)?new f(e):new d(e)}function d(e){return this._data=e,this}function f(e){return this._data=e,this}function g(e){return M(e)?[e]:e}function p(e){if("number"!=typeof e)throw"Invalid index."}function h(e,t){e=M(e)?e:[e];var n,i,r=t,o=r,a=e.length,s=[];for(n=0;a>n;n++)i=e[n],R(i)?T.apply(s,[s.length,1].concat(h(i.call(t,t),t))):""+i===i?(o!==r&&s.push(r=o),s.push(i)):(t=o=i,o!==r&&s.push(r=o));return s}function v(e,t){var n,i;for(n in e){i=!0;break}i||delete E[t]}function m(e,t){if(!e.data||!e.data.off){var n=t.oldValue,i=e.data;e.type===N?i.cb.array(e,t):"*"!==i.prop&&i.prop!==t.path||(typeof n===A&&C(g(n),i.path,i.cb),typeof(n=t.value)===A&&w(g(n),i.path,i.cb),i.cb(e,t))}}function _(e,t,n,i,r,o,a){return e._ob=a(e,n),function(){var s=e._ob,l=t.length;typeof s===A&&(y(s,i,r,o,!0),l&&C(g(s),t,i,a,n)),s=e._ob=a(e,n),typeof s===A&&(y(s,i,r,o),l&&w(g(s),t,i,a,n))}}function y(e,t,i,r,o){t&&t.array&&M(e)&&b(N+".observe.obs"+t._bnd,n,e,t,i,r,!0,o)}function b(e,n,r,o,a,s,c,u){var d,f,p,h=F(r),v=g(r);if(u)h&&i(v,e);else{if(d=h&&t._data(r))for(d=d&&d.events,d=d&&d[c?N:D],f=d&&d.length;f--;)if((p=d[f].data)&&p.cb===o){if(c)return;"*"===n&&p.prop!==n&&i(r,e+"."+p.prop)}l(v,e,null,c?{cb:o}:{path:n,prop:a,cb:o},m),s&&(s[t.data(r,"obId")||t.data(r,"obId",W++)]=r)}}function w(){var e,r,o,a,s,l,c,u,d,f,p,m,C,S,I,$,k,L=1,M=B,P=x.apply([],arguments),A=P.pop(),D=P[0],N=""+D!==D?P.shift():n,W=P.length;for(D=N,R(A)?u=A:(A===!0?c=A:A&&(D=A,L=0),A=P[W-1],(W&&A===n||R(A))&&(u=P.pop(),W--)),R(P[W-1])&&(C=u,u=P.pop(),W--),M+=c?u?".obs"+u._bnd:"":".obs"+(d=u._bnd=u._bnd||j++),c&&0===W&&N&&i(N,B),c||(I=E[d]=E[d]||{}),$=0,e=0;W>e;e++){if(a=P[e],y(l,u,o,c),l=N,""+a===a){if(r=a.split("^"),r[1]&&($=r[0].split(".").length,a=r.join("."),$=a.split(".").length-$),C&&(S=C(a,N))){W+=S.length-1,T.apply(P,[e--,1].concat(S));continue}r=a.split(".")}else L&&!R(a)&&(a._jsvOb&&(c||(a._cb=k=_(a,P.slice(e+1),D,u,o,I,C),a._rt=D,k._bnd=u._bnd),w(a._rt,P.slice(0,e),a._cb,C,c),a=a._ob),l=a),N=a,r=[N];for(;l&&"object"==typeof l&&(o=r.shift())!==n;){if(""+o===o){if(""===o)continue;if(r.length<$+1&&!l.nodeType){if(!c&&(m=F(l)&&t._data(l))){for(m=m.events,m=m&&m.propertyChange,f=m&&m.length;f--&&(p=m[f].data,!p||p.cb!==u||(p.prop!==o||p.path!==r.join("."))&&"*"!==p.prop););if(f>-1){l=l[o];continue}}if("*"===o){R(l)?(s=l.depends)&&w(s,u,c||D):b(M,o,l,u,o,I,n,c);break}!o||R(s=l[o])&&s.depends||b(M+"."+o,r.join("."),l,u,o,I,n,c)}o=o?l[o]:l}if(R(o)){(s=o.depends)&&w(l,h(s,l),u,C,c||g(D));break}l=o}}return y(l,u,o,c),d&&v(I,d),{cbId:d,bnd:I,leaf:l}}function C(){return[].push.call(arguments,!0),w.apply(this,arguments)}var S=t;if(!t)throw"requires jQuery or JsRender";if(!t.observable){var I,$,k=t.event.special,L=t.views?t.views.sub:{},T=[].splice,x=[].concat,M=function(e){return e instanceof Array},P=t.expando,A="object",D=L.propChng=L.propChng||"propertyChange",N=L.arrChng=L.arrChng||"arrayChange",E=L._cbBnds=L._cbBnds||{},B=D+".observe",R=function(e){return"function"==typeof e},W=1,j=1,F=t.hasData;t.observable=u,u.Object=d,u.Array=f,u.observe=w,u.unobserve=C,u.on=l,u.simpleOn=s,u.simpleOff=r,u.off=i,u.trigger=c,u.onObservableTrigger=t.simpleCallbacks(),d.prototype={_data:null,data:function(){return this._data},observe:function(e,t){return w(this._data,e,t)},unobserve:function(e,t){return C(this._data,e,t)},setProperty:function(e,t,i){var r,o,a,s=this,l=s._data;if(e=e||"",l)if(M(e))for(r=e.length;r--;)o=e[r],s.setProperty(o.name,o.value,i===n||i);else if(""+e!==e)for(r in e)s.setProperty(r,e[r],t);else if(e.indexOf(P)<0){for(a=e.split(".");l&&a.length>1;)l=l[a.shift()];s._setProperty(l,a.join("."),t,i)}return s},_setProperty:function(e,t,n,i){var r,o,a=t?e[t]:e;R(a)&&a.set&&(o=a,r=a.set===!0?a:a.set,a=a.call(e)),(a!==n||i&&a!=n)&&(!(a instanceof Date)||a>n||n>a)&&(r?(r.call(e,n),n=o.call(e)):e[t]=n,this._trigger(e,{path:t,value:n,oldValue:a}))},_trigger:function(e,n){t.observable.onObservableTrigger.fire(),c(e,D,n)}},f.prototype={_data:null,data:function(){return this._data},insert:function(e,t){return p(e),arguments.length>1&&(t=M(t)?t:[t],t.length&&this._insert(e,t)),this},_insert:function(e,t){$=this._data,I=$.length,T.apply($,[e,0].concat(t)),this._trigger({change:"insert",index:e,items:t})},remove:function(e,t){if(p(e),t=t===n||null===t?1:t,t&&e>-1){var i=this._data.slice(e,e+t);t=i.length,t&&this._remove(e,t,i)}return this},_remove:function(e,t,n){$=this._data,I=$.length,$.splice(e,t),this._trigger({change:"remove",index:e,items:n})},move:function(e,t,i){if(p(e),p(t),i=i===n||null===i?1:i){var r=this._data.slice(e,e+i);this._move(e,t,i,r)}return this},_move:function(e,t,n,i){$=this._data,I=$.length,$.splice(e,n),$.splice.apply($,[t,0].concat(i)),this._trigger({change:"move",oldIndex:e,index:t,items:i})},refresh:function(e){var t=this._data.slice(0);return this._refresh(t,e),this},_refresh:function(e,t){$=this._data,I=$.length,T.apply($,[0,$.length].concat(t)),this._trigger({change:"refresh",oldItems:e})},_trigger:function(e){var n=$.length;t.observable.onObservableTrigger.fire(),c([$],N,e),n!==I&&c([$],D,{path:"length",value:n,oldValue:I})}},k[D]=k[N]={remove:function(e){if((e=e.data)&&(e.off=1,e=e.cb)){var n=e._bnd,i=E[n];i&&(delete i[t.data(this,"obId")],v(i,n))}}}}}(this,window.originaljQuery||window.jQuery||this.jsviews)}),define("jsrender",["jquery.observable"],function(){!function(e,t,n){"use strict";function i(e,t){t&&t.onError&&t.onError(e)===!1||(this.name="JsRender Error",this.message=e||"JsRender error")}function r(e,t){var n;e=e||{};for(n in t)e[n]=t[n];return e}function o(e,t,n){return ie.rTag&&!arguments.length||(A=e?e.charAt(0):A,D=e?e.charAt(1):D,N=t?t.charAt(0):N,E=t?t.charAt(1):E,B=n||B,e="\\"+A+"(\\"+B+")?\\"+D,t="\\"+N+"\\"+E,x="(?:(?:(\\w+(?=[\\/\\s\\"+N+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+N+"]|\\"+N+"(?!\\"+E+"))*?)",ie.rTag=x+")",x=new RegExp(e+x+"(\\/)?|(?:\\/(\\w+)))"+t,"g"),M=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t)),[A,D,N,E,B]}function a(e,t){t||(t=e,e=n);var i,r,o,a,s=this,l=!t||"root"===t;if(e){if(a=s.type===t?s:n,!a)if(i=s.views,s._.useKey){for(r in i)if(a=i[r].get(e,t))break}else for(r=0,o=i.length;!a&&o>r;r++)a=i[r].get(e,t)}else if(l)for(;s.parent.parent;)a=s=s.parent;else for(;s&&!a;)a=s.type===t?s:n,s=s.parent;return a}function s(){var e=this.get("item");return e?e.index:n}function l(e){var t,i=this,r=(i.ctx||{})[e];return r=r===n?i.getRsc("helpers",e):r,r&&"function"==typeof r&&(t=function(){return r.apply(i,arguments)}),t||r}function c(e,t,i){var r,o,a,s=+i===i&&i,l=t.linkCtx;return s&&(i=(s=t.tmpl.bnds[s-1])(t.data,t,Z)),a=i.args[0],(e||s)&&(o=l&&l.tag||{_:{inline:!l},tagName:e+":",flow:!0,_is:"tag"},o._.bnd=s,l&&(l.tag=o,o.linkCtx=l,i.ctx=$(i.ctx,l.view.ctx)),o.tagCtx=i,i.view=t,o.ctx=i.ctx||{},delete i.ctx,t._.tag=o,e="true"!==e&&e,e&&((r=t.getRsc("converters",e))||y("Unknown converter: {{"+e+":"))&&(o.depends=r.depends,a=r.apply(o,i.args)),a=s&&t._.onRender?t._.onRender(a,t,s):a,t._.tag=n),a}function u(e,t){var i,r=this,o=Z[e];for(i=o&&o[t];i===n&&r;)o=r.tmpl[e],i=o&&o[t],r=r.parent;return i}function d(e,t,i,r){var o,a,s,l,c,u,d,f,g,p,h,v,m,b,w="",C=+r===r&&r,S=t.linkCtx||0,I=t.ctx,k=i||t.tmpl,L=t._;for("tag"===e._is&&(a=e,e=a.tagName),C&&(r=(v=k.bnds[C-1])(t.data,t,Z)),d=r.length,a=a||S.tag,u=0;d>u;u++)g=r[u],h=g.tmpl,h=g.content=h&&k.tmpls[h-1],i=g.props.tmpl,u||i&&a||(m=t.getRsc("tags",e)||y("Unknown tag: {{"+e+"}}")),i=i||(a?a._def:m).template||h,i=""+i===i?t.getRsc("templates",i)||ee(i):i,g.tmpl=i,g.render=_,g.index=u,g.view=t,g.ctx=$(g.ctx,I),a||(m._ctr?(a=new m._ctr,b=!!a.init,a.attr=a.attr||m.attr||n):a={render:m.render},a._={inline:!S},S&&(S.attr=a.attr=S.attr||a.attr,S.tag=a,a.linkCtx=S),(a._.bnd=v||S)&&(a._.arrVws={}),a.tagName=e,a.parent=c=I&&I.tag,a._is="tag",a._def=m),L.tag=a,g.tag=a,a.tagCtxs=r,a.flow||(p=g.ctx=g.ctx||{},s=a.parents=p.parentTags=I&&$(p.parentTags,I.parentTags)||{},c&&(s[c.tagName]=c),p.tag=a),a.rendering={};for(u=0;d>u;u++)g=a.tagCtx=r[u],a.ctx=g.ctx,!u&&b&&(a.init(g,S,a.ctx),b=n),(o=a.render)&&(f=o.apply(a,g.args)),w+=f!==n?f:g.tmpl?g.render():"";return delete a.rendering,a.tagCtx=a.tagCtxs[0],a.ctx=a.tagCtx.ctx,a._.inline&&(l=a.attr)&&"html"!==l&&(w="text"===l?te.html(w):""),w=C&&t._.onRender?t._.onRender(w,t,C):w}function f(e,t,i,r,o,c,d,f){var g,p,h,v="array"===t,m={key:0,useKey:v?0:1,id:""+z++,onRender:f,bnds:{}},_={data:r,tmpl:o,content:d,views:v?[]:{},parent:i,ctx:e,type:t,get:a,getIndex:s,getRsc:u,hlp:l,_:m,_is:"view"};return i&&(g=i.views,p=i._,p.useKey?(g[m.key="_"+p.useKey++]=_,h=p.tag,m.bnd=v&&(!h||!!h._.bnd&&h)):g.splice(m.key=_.index=c!==n?c:g.length,0,_),_.ctx=e||i.ctx),_}function g(e){var t,n,i,r,o;for(t in Y)if(r=Y[t],(o=r.compile)&&(n=e[t+"s"]))for(i in n)n[i]=o(i,n[i],e,t,r)}function p(e,t,n){var i,r;return"function"==typeof t?t={depends:t.depends,render:t}:((r=t.template)&&(t.template=""+r===r?ee[r]||ee(r):r),t.init!==!1&&(i=t._ctr=function(e){},(i.prototype=t).constructor=i)),n&&(t._parentTmpl=n),t}function h(i,r,o,a,s,l){function c(n){if(""+n===n||n.nodeType>0){try{d=n.nodeType>0?n:!M.test(n)&&t&&t(e.document).find(n)[0]}catch(r){}return d&&(n=d.getAttribute(K),i=i||n,n=ee[n],n||(i=i||"_"+V++,d.setAttribute(K,i),n=ee[i]=h(i,d.innerHTML,o,a,s,l))),n}}var u,d;return r=r||"",u=c(r),l=l||(r.markup?r:{}),l.tmplName=i,o&&(l._parentTmpl=o),!u&&r.markup&&(u=c(r.markup))&&(!u.fn||u.debug===r.debug&&u.allowCode===r.allowCode||(u=u.markup)),u!==n?(i&&!o&&(J[i]=function(){return r.render.apply(r,arguments)}),u.fn||r.fn?u.fn&&(r=i&&i!==u.tmplName?$(l,u):u):(r=v(u,l),w(u,r)),g(l),r):void 0}function v(e,t){var n,i=re.wrapMap||{},o=r({markup:e,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:_},t);return t.htmlTag||(n=Q.exec(e),o.htmlTag=n?n[1].toLowerCase():""),n=i[o.htmlTag],n&&n!==i.div&&(o.markup=L.trim(o.markup),o._elCnt=!0),o}function m(e,t){function i(o,a,s){var l,c,u,d;if(o&&""+o!==o&&!o.nodeType&&!o.markup){for(u in o)i(u,o[u],a);return Z}return a===n&&(a=o,o=n),o&&""+o!==o&&(s=a,a=o,o=n),d=s?s[r]=s[r]||{}:i,c=t.compile,(l=ie.onBeforeStoreItem)&&(c=l(d,o,a,c)||c),o?null===a?delete d[o]:d[o]=c?a=c(o,a,s,e,t):a:a=c(n,a),a&&(a._is=e),(l=ie.onStoreItem)&&l(d,o,a,c),a}var r=e+"s";Z[r]=i,Y[e]=t}function _(e,t,i,r,o,a){var s,l,c,u,d,g,p,h,v,m,_,b,w,C=this,S=!C.attr||"html"===C.attr,I="";if(r===!0&&(p=!0,r=0),C.tag?(h=C,C=C.tag,m=C._,b=C.tagName,w=h.tmpl,t=$(t,C.ctx),v=h.content,h.props.link===!1&&(t=t||{},t.link=!1),i=i||h.view,e=e===n?i:e):w=C.jquery&&(C[0]||y('Unknown template: "'+C.selector+'"'))||C,w&&(!i&&e&&"view"===e._is&&(i=e),i&&(v=v||i.content,a=a||i._.onRender,e===i&&(e=i.data,o=!0),t=$(t,i.ctx)),i&&i.data!==n||((t=t||{}).root=e),w.fn||(w=ee[w]||ee(w)),w)){if(a=(t&&t.link)!==!1&&S&&a,_=a,a===!0&&(_=n,a=i._.onRender),L.isArray(e)&&!o)for(u=p?i:r!==n&&i||f(t,"array",i,e,w,r,v,a),s=0,l=e.length;l>s;s++)c=e[s],d=f(t,"item",u,c,w,(r||0)+s,v,a),g=w.fn(c,d,Z),I+=u._.onRender?u._.onRender(g,d):g;else u=p?i:f(t,b||"data",i,e,w,r,v,a),m&&!C.flow&&(u.tag=C),I+=w.fn(e,u,Z);return _?_(I,u):I}return""}function y(e){throw new Z.sub.Error(e)}function b(e){y("Syntax error\n"+e)}function w(e,t,n,i){function r(t){t-=u,t&&f.push(e.substr(u,t).replace(j,"\\n"))}function o(t){t&&b('Unmatched or missing tag: "{{/'+t+'}}" in template:\n'+e)}function a(a,c,p,h,v,m,_,y,w,C,I,$){m&&(v=":",h="html"),C=C||n;var k,L,T=c&&[],x="",M="",P="",A=!C&&!v&&!_;p=p||v,r($),u=$+a.length,y?l&&f.push(["*","\n"+w.replace(F,"$1")+"\n"]):p?("else"===p&&(U.test(w)&&b('for "{{else if expr}}" use "{{else expr}}"'),T=g[6],g[7]=e.substring(g[7],$),g=d.pop(),f=g[3],A=!0),w&&(w=w.replace(j," "),x=S(w,T,t).replace(H,function(e,t,n){return t?P+=n+",":M+=n+",",""})),M=M.slice(0,-1),x=x.slice(0,-1),k=M&&M.indexOf("noerror:true")+1&&M||"",s=[p,h||!!i||"",x,A&&[],'params:"'+w+'",props:{'+M+"}"+(P?",ctx:{"+P.slice(0,-1)+"}":""),k,T||0],f.push(s),A&&(d.push(g),g=s,g[7]=u)):I&&(L=g[0],o(I!==L&&"else"!==L&&I),g[7]=e.substring(g[7],$),g=d.pop()),o(!g&&I),f=g[3]}var s,l=t&&t.allowCode,c=[],u=0,d=[],f=c,g=[,,,c];return e=e.replace(O,"\\$1"),o(d[0]&&d[0][3].pop()[0]),e.replace(x,a),r(e.length),(u=c[c.length-1])&&o(""+u!==u&&+u[7]===u[7]&&u[0]),C(c,n?e:t,n)}function C(e,n,i){var r,o,a,s,l,c,u,d,f,g,p,h,m,_,y,w,S,I,$,k,L,T,x,M,P,A,D,N=0,E="",B="",R={},W=e.length;for(""+n===n?(w=i?'data-link="'+n.replace(j," ").slice(1,-1)+'"':n,n=0):(w=n.tmplName||"unnamed",($=n.allowCode)&&(R.allowCode=!0),n.debug&&(R.debug=!0),h=n.bnds,y=n.tmpls),r=0;W>r;r++)if(o=e[r],""+o===o)E+='\nret+="'+o+'";';else if(a=o[0],"*"===a)E+=""+o[1];else{if(s=o[1],l=o[2],k=o[3],c=o[4],B=o[5],L=o[7],(M="else"===a)||(N=0,h&&(m=o[6])&&(N=h.push(m))),(P=":"===a)?(s&&(a="html"===s?">":s+a),B&&(A="prm"+r,B="try{var "+A+"=["+l+"][0];}catch(e){"+A+'="";}\n',l=A)):(k&&(S=v(L,R),S.tmplName=w+"/"+a,C(k,S),y.push(S)),M||(I=a,x=E,E="",_=r),T=e[r+1],T=T&&"else"===T[0]),c+=",args:["+l+"]}",P&&m||s&&">"!==a){if(D=new Function("data,view,j,u"," // "+w+" "+N+" "+a+"\n"+B+"return {"+c+";"),D.paths=m,D._ctxs=a,i)return D;p=1}if(E+=P?"\n"+(m?"":B)+(i?"return ":"ret+=")+(p?(p=0,g=!0,'c("'+s+'",view,'+(m?(h[N-1]=D,N):"{"+c)+");"):">"===a?(d=!0,"h("+l+");"):(f=!0,"(v="+l+")!="+(i?"=":"")+'u?v:"";')):(u=!0,"{tmpl:"+(k?y.length:"0")+","+c+","),I&&!T){if(E="["+E.slice(0,-1)+"]",(i||m)&&(E=new Function("data,view,j,u"," // "+w+" "+N+" "+I+"\nreturn "+E+";"),m&&((h[N-1]=E).paths=m),E._ctxs=a,i))return E;E=x+'\nret+=t("'+I+'",view,this,'+(N||E)+");",m=0,I=0}}E="// "+w+"\nvar j=j||"+(t?"jQuery.":"js")+"views"+(f?",v":"")+(u?",t=j._tag":"")+(g?",c=j._cnvt":"")+(d?",h=j.converters.html":"")+(i?";\n":',ret="";\n')+(re.tryCatch?"try{\n":"")+(R.debug?"debugger;":"")+E+(i?"\n":"\nreturn ret;\n")+(re.tryCatch?"\n}catch(e){return j._err(e);}":"");try{E=new Function("data,view,j,u",E)}catch(F){b("Compiled template code:\n\n"+E,F)}return n&&(n.fn=E),E}function S(e,t,n){function i(i,f,g,p,h,v,m,_,y,C,I,$,k,L,T,x,M,P,B){function W(e,n,i,r,a,s,l){if(n&&(t&&!o&&t.push(p),"."!==n)){var c=(i?'view.hlp("'+i+'")':r?"view":"data")+(l?(a?"."+a:i?"":r?"":"."+n)+(s||""):(l=i?"":r?a||"":n,""));return c+=l?"."+l:"","view.data"===c.slice(0,9)?c.slice(5):c}return e}var j;return h=h||"",g=g||f||I,p=p||_,y=y||x||"",v?void b(e):(t&&T&&(j=l[c],B.length-2>P-j&&(j=B.slice(j,P+1),T=D+":"+j+N,T=a[T]=a[T]||w(A+T+E,n,!0),T.paths||S(j,T.paths=[],n),t.push({_jsvOb:T}))),d?(d=!$,d?i:'"'):u?(u=!k,u?i:'"'):(g?(c++,l[c]=P++,g):"")+(M?c?"":r?(r=o=!1,
"\b"):",":m?(c&&b(e),r=p,o="~"===p.charAt(0),"\b"+p+":"):p?p.split("^").join(".").replace(R,W)+(y?(s[++c]=!0,"."!==p.charAt(0)&&(l[c]=P),y):h):h?h:L?(s[c--]=!1,L+(y?(s[++c]=!0,y):"")):C?(s[c]||b(e),","):f?"":(d=$,u=k,'"')))}var r,o,a=n.links,s={},l={0:-1},c=0,u=!1,d=!1;return(e+" ").replace(W,i)}function I(){}function $(e,t){var n;return t&&(I.prototype=t),n=e&&e!==t?t?r(new I,e):e:t&&new I}function k(e){return G[e]||(G[e]="&#"+e.charCodeAt(0)+";")}if(!(t&&t.views||e.jsviews)){var L,T,x,M,P="v1.0pre",A="{",D="{",N="}",E="}",B="^",R=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,W=/(\()(?=\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^)|[)\]])([([]?))|(\s+)/g,j=/\s*\n/g,F=/\\(['"])/g,O=/\\?(['"\\])/g,H=/\x08(~)?([^\x08]+)\x08/g,U=/^if\s/,Q=/<(\w+)[>\s]/,q=/[\x00`><"'&]/g,X=q,V=0,z=0,G={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},K="data-jsv-tmpl",J=([].slice,{}),Y={template:{compile:h},tag:{compile:p},helper:{},converter:{}},Z={jsviews:P,render:J,settings:{delimiters:o,debugMode:!0,tryCatch:!0},sub:{View:f,Error:i,tmplFn:w,parse:S,extend:r,error:y,syntaxError:b},_cnvt:c,_tag:d,_err:function(e){return re.debugMode?"Error: "+(e.message||e)+". ":""}};(i.prototype=new Error).constructor=i,s.depends=function(){return[this.get("item"),"index"]};for(T in Y)m(T,Y[T]);var ee=Z.templates,te=Z.converters,ne=(Z.helpers,Z.tags),ie=Z.sub,re=Z.settings;t?(L=t,L.fn.render=_):(L=e.jsviews={},L.isArray=Array&&Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}),L.render=J,L.views=Z,L.templates=ee=Z.templates,ne({"else":function(){},"if":{render:function(e){var t=this,n=t.rendering.done||!e&&(arguments.length||!t.tagCtx.index)?"":(t.rendering.done=!0,t.selected=t.tagCtx.index,t.tagCtx.render());return n},onUpdate:function(e,t,n){var i,r,o;for(i=0;(r=this.tagCtxs[i])&&r.args.length;i++)if(r=r.args[0],o=!r!=!n[i].args[0],r||o)return o;return!1},flow:!0},"for":{render:function(e){var t=this,i=t.tagCtx,r=!arguments.length,o="",a=r||0;return t.rendering.done||(r?o=n:e!==n&&(o+=i.render(e),a+=L.isArray(e)?e.length:1),(t.rendering.done=a)&&(t.selected=i.index)),o},onUpdate:function(e,t,n){},onArrayChange:function(e,t){var n,i=this,r=t.change;if(this.tagCtxs[1]&&("insert"===r&&e.target.length===t.items.length||"remove"===r&&!e.target.length||"refresh"===r&&!t.oldItems.length!=!e.target.length))this.refresh();else for(n in i._.arrVws)n=i._.arrVws[n],n.data===e.target&&n._.onArrayChange.apply(n,arguments);e.done=!0},flow:!0},include:{flow:!0},"*":{render:function(e){return e},flow:!0}}),te({html:function(e){return e!=n?String(e).replace(X,k):""},attr:function(e){return e!=n?String(e).replace(q,k):null===e?null:""},url:function(e){return e!=n?encodeURI(String(e)):null===e?null:""}}),o()}}(this,window.originaljQuery||window.jQuery)}),define("jquery.views",["jsrender"],function(){!function(e,t,n){"use strict";function i(e){var i,r,o,a,s,c,u,d,f,g,p,h,v,m,_,y=e.target,b=y._jsvBnd;if(b)for(h=b.slice(1).split("&"),v=h.length;v--;)(p=Me[h[v]])&&(a=p.linkCtx,g=a.view,(b=p.to)&&(f=t(y),m=g.hlp(le),_=g.hlp(ce),o=l(y),i=he[o],s=Z(o)?o(y):i?f[i]():f.attr(o),m&&(r=m.call(g,e)===!1)||s===n||(u=b[1],b=b[0],d=b[0],d=d._jsvOb?d._ob:d,b=b[2]||b[1],Z(u)?c=u:(c=g.tmpl.converters,c=c&&c[u]||z.converters[u]),c&&(s=c.call(a.tag,s)),s!==n&&d&&(te(d).setProperty(b,s),_&&_.call(a,e))),r&&e.stopImmediatePropagation()))}function r(e,i,r){var o,s,c,u,f,g,p,h,v,m,_=this,y=_.data,b=_.elem,w=_.cvt,C="attr",S=b.parentNode,I=S,$=t(b),k=_.view,T=k.hlp(le);if(S&&(!T||!i||T.call(_,e,i)!==!1)&&(!i||"*"===e.data.prop||e.data.prop===i.path)){if(v=k.linkCtx,k.linkCtx=_,i&&(_.eventArgs=i),!e||i||_._initVal){if(delete _._initVal,u=r.call(k.tmpl,y,k,z),o=_.attr||l(b,!0,w!==n),g=_.tag){if(i&&g.onUpdate&&g.onUpdate(e,i,u)===!1||"none"===o)return d(_,y,b,r),void(k.linkCtx=v);u=":"===g.tagName.slice(-1)?z._cnvt(g.tagName.slice(0,-1),k,u):z._tag(g.tagName,k,k.tmpl,u)}else r._ctxs&&(w=""===w?"true":w,u=w?z._cnvt(w,k,u):z._tag(r._ctxs,k,k.tmpl,u),g=k._.tag,o=_.attr||o);if(g&&(g.parentElem=_.expr||g._elCnt?b:b.parentNode,p=g._prv,h=g._nxt,g.refresh=L),Z(u)&&ye(_.expr+": missing parens"),"visible"===o&&(o="css-display",u=u?a(b):"none"),f=0===o.lastIndexOf("css-",0)&&o.substr(4))(c=t.style(b,f)!==u)&&t.style(b,f,u);else if("link"!==o){if("value"===o)"checkbox"===b.type&&(u=u&&"false"!==u,C="prop",o="checked");else if("radio"===o){if(b.value!==""+u)return d(_,y,b,r),void(k.linkCtx=v);u=!0,C="prop",o="checked"}else"selected"!==o&&"disabled"!==o&&"multiple"!==o&&"readlonly"!==o||(u=u&&"false"!==u?o:null);if(s=he[o]){if(c=g||$[s]()!==u)if("html"===o)if(g){if(m=g._.inline,g.refresh(u),!m&&g._.inline)return void(k.linkCtx=v)}else $.empty(),I=b,k.link(y,I,p,h,u,g&&{tag:g._tgId});else"text"!==o||b.children[0]?$[s](u):b.textContent!==n?b.textContent=u:b.innerText=null===u?"":u}else(c=$[C](o)!=u)&&(null==u?$["attr"===C?"removeAttr":"removeProp"](o):$[C](o,u))}i&&c&&(T=k.hlp(ce))&&T.call(_,e,i)}d(_,y,b,r),k.linkCtx=v}}function o(e,t){var n=this,i=n.hlp(le),r=n.hlp(ce);if(!i||i.call(e,t)!==!1){if(t){var o=t.change,a=t.index,s=t.items;switch(o){case"insert":n.addViews(a,s);break;case"remove":n.removeViews(a,s.length);break;case"move":n.refresh();break;case"refresh":n.refresh()}}r&&r.call(this,e,t)}}function a(t){var n,i,r=e.getComputedStyle,o=(t.currentStyle||r.call(e,t,"")).display;return"none"!==o||(o=Te[i=t.nodeName])||(n=V.createElement(i),V.body.appendChild(n),o=(r?r.call(e,n,""):n.currentStyle).display,Te[i]=o,V.body.removeChild(n)),o}function s(e){var i,r,a=e.data,s=e._.bnd;!e._.useKey&&s&&((r=e._.bndArr)&&(t.observable.off([r[1]],ae,n,r[0]),e._.bndArr=n),s===!!s||s.linkCtx?a&&(i=function(t){t.data&&t.data.off||o.apply(e,arguments)},t.observable.on([a],ae,null,null,i),e._.bndArr=[i,a]):a?s._.arrVws[e._.id]=e:delete s._.arrVws[e._.id])}function l(e,t,n){var i=e.nodeName.toLowerCase(),r=K.merge[i];return r?t?"input"===i&&"radio"===e.type?"radio":r.to.toAttr:r.from.fromAttr:t?n?"text":"html":""}function c(e,i,r,o,a,s,l){var c,u,d,f,g,p=e.parentElem,h=e._prv,v=e._nxt,m=e._elCnt;if(h&&h.parentNode!==p&&ye("Missing parentNode"),l){f=e.nodes(),m&&h&&h!==v&&E(h,v,p,e._.id,"_",!0),e.removeViews(n,n,!0),u=v,m&&(h=h?h.previousSibling:v?v.previousSibling:p.lastChild),t(f).remove();for(g in e._.bnds)M(g)}else{if(i){if(d=o[i-1],!d)return!1;h=d._nxt}m?(u=h,h=u?u.previousSibling:p.lastChild):u=h.nextSibling}c=r.render(a,s,e,l||i,e._.useKey&&l,!0),e.link(a,p,h,u,c,d)}function u(e,t,i){var r,o,a;return i?(a="^`",o=t._.tag||{_:{inline:!0,bnd:i},tagCtx:{view:t},flow:!0},r=o._tgId,o.refresh=L,r||(Me[r=Ae++]=o,o._tgId=""+r)):(a="_`",xe[r=t._.id]=t),"#"+r+a+(e===n?"":e)+"/"+r+a}function d(e,i,r,o){var a,s,l,c,u,d,f=[],g=e._bndId||""+Ae++,p=e._hdlr;if(delete e._bndId,(a=e.tag)&&(f=a.depends||f,f=Z(f)?a.depends(a):f,l=a.onChange),l=l||e._cvtBk,(!e._depends||""+e._depends!=""+f)&&(e._depends&&ne(i,e._depends,p,!0),s=ne(t.isArray(i)?[i]:i,c=e.fn.paths||e.fn,f,p,e._ctxCb),s.elem=r,s.linkCtx=e,s._tgId=g,r._jsvBnd=r._jsvBnd||"",r._jsvBnd+="&"+g,e._depends=f,e.view._.bnds[g]=g,Me[g]=s,l!==n)){for(d=c.length;""+(u=c[--d])!==u;);u=c[d]=u.split("^").join("."),s.to="."===u.charAt(0)?[[c[d-1],u.slice(1)],l]:[e._ctxCb(c[0])||[i,c[0]],l]}}function f(e,t,n,i,r,o){return g(this,e,t,n,i,r,o)}function g(e,r,o,a,s,l,c,d){if(e&&r){r=r.jquery?r:t(r),W||(W=V.body,t(W).on(se,i));for(var f,g,p,v,m,_,y,w=u,C=a&&"replace"===a.target,S=r.length;S--;)if(y=r[S],"string"==typeof e)h(e,y,j(y),o,a);else{if(s=s||j(y),e.markup!==n)s.link===!1&&(a=a||{},a.link=w=!1),C&&(_=y.parentNode),p=e.render(o,a,s,n,n,w),_?(l=y.previousSibling,c=y.nextSibling,t.cleanData([y],!0),_.removeChild(y),y=_):(l=c=n,t(y).empty());else if(e!==!0)break;if(y._dfr&&!c){for(v=b(y._dfr,!0,Ee),f=0,g=v.length;g>f;f++)m=v[f],(m=xe[m.id])&&m.data!==n&&m.parent.removeViews(m._.key,n,!0);y._dfr=""}s.link(o,y,l,c,p,d)}}return r}function p(e,i,r,a,l,c){function d(e,t,n,i,r,o,a,s,c,u,d,f){var g="";return _=s||c||"",i=i||n||u||f,i&&(X&&(n||f)&&!Le[te]&&be("'<"+te+"... />' in:\n"+l),le=se,te=Re.shift(),se=Ie[te],le&&(Ee+=ge,ge="",se?Ee+="-":(g=(u||"")+fe+"@"+Ee+de+(d||""),Ee=je.shift()))),se?(o?ge+=o:t=u||f||"",_&&(t+=_,ge&&(t+=" "+ie+'="'+ge+'"',ge=""))):t=o?t+g+r+fe+o+de+a+_:g||e,_&&(Re.unshift(te),te=_.slice(1),Re[0]===$e[te]&&ye('"'+te+'" has incorrect parent tag'),(se=Ie[te])&&!le&&(je.unshift(Ee),Ee=""),le=se,Ee&&se&&(Ee+="+")),t}function f(e,t){var r,a,l,c,d,f,g,p=[];if(e){for(T=e.length,"@"===e.tokens.charAt(0)&&(t=M.previousSibling,M.parentNode.removeChild(M),M=null),T=e.length;T--;){if(A=e[T],l=A.ch,r=A.path)for(L=r.length-1;a=r.charAt(L--);)"+"===a?"-"===r.charAt(L)?(L--,t=t.previousSibling):t=t.parentNode:t=t.lastChild;"^"===l?(_=Me[d=A.id])&&(g=t&&(!M||M.parentNode!==t),M&&!g||(_.parentElem=t),A.elCnt&&g&&(A.open?t&&(t._dfr="#"+d+l+(t._dfr||"")):t._dfr="/"+d+l+(t._dfr||"")),p.push([g?null:M,A])):(P=xe[d=A.id])&&(P.link||(P.parentElem=t||M&&M.parentNode||i,J(P,R),P._.onRender=u,P._.onArrayChange=o,s(P)),c=P.parentElem,A.open?(P._elCnt=A.elCnt,t?t._dfr="#"+d+l+(t._dfr||""):(P._prv||(c._dfr=m(c._dfr,"#"+d+l)),P._prv=M)):(!t||M&&M.parentNode===t?M&&(P._nxt||(c._dfr=m(c._dfr,"/"+d+l)),P._nxt=M):(t._dfr="/"+d+l+(t._dfr||""),P._nxt=n),v=P.linkCtx,(f=Fe||P.ctx&&P.ctx.onAfterCreate)&&f.call(v,P)))}for(T=p.length;T--;)Be.push(p[T])}return!e||e.elCnt}function g(e){var t,n;if(T=e&&e.length)for(L=0;T>L;L++)if(A=e[L],q.id)q.id=q.id!==A.id&&q.id;else if(n=_=Me[A.id].linkCtx.tag,!_.flow){if(!H){for(t=1;n=n.parent;)t++;Q=Q||t}!H&&t!==Q||U&&_.tagName!==U||O.push(_)}}function p(){if(me){if("resolved"===me.state())return;Pe.shift()}for(x=Se?i.querySelectorAll(pe):t(pe,i).get(),S=x.length,r&&(N=Se?r.querySelectorAll(pe):t(pe,r).get(),r=N.length?N[N.length-1]:r),Q=0,y=0;S>y;y++)if(M=x[y],r&&!ve)ve=M===r;else{if(a&&M===a)break;M.parentNode&&Oe(b(M,n,O&&We))&&M.getAttribute(re)&&Be.push([M])}if(w(r,se),w(a,se),q)return void(me&&me.resolve());for(se&&Ee+ge&&(M=a,Ee&&(a?f(b(Ee+"+",!0),a):f(b(Ee,!0),i)),f(b(ge,!0),i),a&&(ae=a.getAttribute(ie),(S=ae.indexOf(he)+1)&&(ae=ae.slice(S+he.length-1)),a.setAttribute(ie,ge+ae))),S=Be.length,y=0;S>y;y++)M=Be[y],D=M[1],M=M[0],D?(_=Me[D.id],_=_.linkCtx?_.linkCtx.tag:_,D.open?(M&&(_.parentElem=M.parentNode,_._prv=M),_._elCnt=D.elCnt,!_||_.onBeforeLink&&_.onBeforeLink()===!1||_._.bound||(_._.bound=!0,P=_.tagCtx.view,h(n,_._prv,P,P.data||e,D.id)),_._.linking=!0):(_._nxt=M,_._.linking&&(P=_.tagCtx.view,_.contents=I,_.nodes=$,_.childTags=k,delete _._.linking,_&&_.onAfterLink&&_.onAfterLink(),_._.bound||(_._.bound=!0,h(n,_._prv,P,P.data||e,D.id))))):(P=j(M),h(M.getAttribute(re),M,P,P.data||e));me&&(me.resolve(),G.onAfterLazyLink.fire(Pe.length))}var v,_,y,S,L,T,x,M,P,A,D,N,E,B,W,F,O,H,U,Q,q,z,Y,Z,ee,te,ne,oe,ae,se,le,ce,ge,he,ve,me,_e,Te=K.noDomLevel0,Ae=this,De=Ae._.id+"_",Ee="",Be=[],Re=[],je=[],Fe=Ae.hlp(ue),Oe=f;if(c&&(me=c.lazyLink&&t.Deferred(),c.tmpl?B="/"+c._.id+"_":(q=c.get,c.tag&&(De=c.tag+"^",c=!0)),c=c===!0),q&&(Oe=g,O=q.tags,H=q.deep,U=q.name),i=i?"string"==typeof i?t(i)[0]:i.jquery?i[0]:i:Ae.parentElem||V.body,te=i.tagName.toLowerCase(),se=!!Ie[te],r=r&&C(r,se),a=a&&C(a,se)||null,l!==n){if(oe=V.createElement("div"),ne=oe,he=ge="",ce="http://www.w3.org/2000/svg"===i.namespaceURI?"svg":(ee=we.exec(l))&&ee[1]||"",Te&&ee&&ee[2]&&ye("Unsupported: "+ee[2]),se){for(F=a;F&&!(W=b(F));)F=F.nextSibling;(ae=W?W.tokens:i._dfr)&&(E=B||"",!c&&B||(E+="#"+De),L=ae.indexOf(E),L+1&&(L+=E.length,he=ge=ae.slice(0,L),ae=ae.slice(L),W?F.setAttribute(ie,ae):i._dfr=ae))}for(l=(""+l).replace(Ne,d),Ce.appendChild(oe),ce=ke[ce]||ke.div,z=ce[0],ne.innerHTML=ce[1]+l+ce[2];z--;)ne=ne.lastChild;for(Ce.removeChild(oe),Y=V.createDocumentFragment();Z=ne.firstChild;)Y.appendChild(Z);G.onBeforeInsert.fire(Y),i.insertBefore(Y,a)}return me?(_e=setTimeout(p,0),Pe.push({id:_e,fn:p}),G.onBeforeLazyLink.fire()):p(),me&&me.promise()}function h(e,t,i,r,o){var a,s,l,c,u,d,f,g,p,h,m;if(o)h=Me[o],h=h.linkCtx?h.linkCtx.tag:h,p=h.linkCtx||{data:r,elem:h._elCnt?h.parentElem:t,view:i,attr:"html",fn:h._.bnd,tag:h,_bndId:o},v(p,p.fn);else if(e&&t)for(a=i.tmpl,e=S(e,t),F.lastIndex=0;s=F.exec(e);)m=F.lastIndex,l=o?"html":s[1],f=s[3],u=s[10],c=n,p={data:r,elem:h&&h._elCnt?h.parentElem:t,view:i,attr:l,_initVal:!s[2]},s[6]&&(!l&&(c=/:([\w$]*)$/.exec(u))&&(c=c[1],c!==n&&(d=-c.length-1,f=f.slice(0,d-1)+U,u=u.slice(0,d))),null===c&&(c=n),p.cvt=s[5]||""),p.expr=l+f,g=a.links[f],g||(a.links[f]=g=G.tmplFn(O+f+Q,a,!0,c),G.parse(u,g.paths=[],a)),p.fn=g,l||c===n||(p._cvtBk=c),v(p,g),F.lastIndex=m}function v(e,t){function n(n,i){r.call(e,n,i,t)}e._ctxCb=D(e.view),e._hdlr=n,e.tag&&e.tag.onArrayChange&&(n.array=function(t,n){e.tag.onArrayChange(t,n)}),n(!0)}function m(e,t){var n;return e?(n=e.indexOf(t),n+1?e.slice(0,n)+e.slice(n+t.length):e):""}function _(e){return e&&("string"==typeof e?e:"SCRIPT"===e.tagName?e.type.slice(3):1===e.nodeType&&e.getAttribute(ie)||"")}function y(e,t,n,i,r,o){Oe.push({elCnt:Fe,id:i,ch:r,open:t,close:n,path:o,token:e})}function b(e,t,i){var r;return Fe=n,Oe=[],(r=t?e:_(e))?(Oe.elCnt=!e.type,Fe="@"===r.charAt(0)||Oe.elCnt,Oe.tokens=r,r.replace(i||je,y),Oe):void 0}function w(e,t){e&&("jsv"===e.type?e.parentNode.removeChild(e):t&&""===e.getAttribute(re)&&e.removeAttribute(re))}function C(e,t){for(var n=e;t&&n&&1!==n.nodeType;)n=n.previousSibling;return n&&(1!==n.nodeType?(n=V.createElement("SCRIPT"),n.type="jsv",e.parentNode.insertBefore(n,e)):_(n)||n.getAttribute(re)||n.setAttribute(re,"")),n}function S(e,n){return e=t.trim(e),e.slice(-1)!==U?e=H+":"+e+(l(n)?":":"")+U:e}function I(e,n){var i,r=t(this.nodes());return r[0]&&(i=e?r.filter(e):r,r=n&&e?i.add(r.find(e)):i),r}function $(e,t,n){var i,r=this,o=r._elCnt,a=!t&&o,s=[];for(t=t||r._prv,n=n||r._nxt,i=a?t===r._nxt?r.parentElem.lastSibling:t:r._.inline===!1?t||r.linkCtx.elem.firstChild:t&&t.nextSibling;i&&(!n||i!==n);)(e||o||!_(i))&&s.push(i),i=i.nextSibling;return s}function k(e,t){e!==!!e&&(t=e,e=n);var i=this,r=i.link?i:i.tagCtx.view,o=i._prv,a=i._elCnt,s=[];return o&&r.link(n,i.parentElem,a?o.previousSibling:o,i._nxt,n,{get:{tags:s,deep:e,name:t,id:a&&i._tgId}}),s}function L(e){var i,r,o,a=this,s=a.parentElem,l=a.tagCtx.view,c=a._prv,d=a._nxt,f=a._elCnt,g=a._.inline,p=a.tagCtx.props;return a.disposed&&ye("Removed tag"),e===n&&(e=a._.bnd.call(l.tmpl,l.data,l,z),g&&(e=z._tag(a,l,l.tmpl,e))),(a.flow||a.render||a.template)&&(g?(r=a.nodes(!0),f&&(c&&c!==d&&E(c,d,s,a._tgId,"^",!0),c=c?c.previousSibling:d?d.previousSibling:s.lastChild),t(r).remove()):(!a.flow&&p.inline&&(l._.tag=a,e=u(e,l,!0),l._.tag=n,i=a._.inline=!0),t(s).empty())),!i&&a.onBeforeLink&&a.onBeforeLink(),o=l.link(l.data,s,c,d,e,a&&{tag:a._tgId,lazyLink:p.lazyLink}),!i&&a.onAfterLink&&(o?o.then(function(){a.onAfterLink()}):a.onAfterLink()),o||a}function T(){for(var e;e=Pe[0];)clearTimeout(e.id),e.fn()}function x(e){var t,i,r,o,a,s,l,c=[],u=e.length,d=u;for(T();d--;)c.push(e[d]);for(d=u;d--;)if(o=c[d],o.parentNode){if(l=o._jsvBnd)for(l=l.slice(1).split("&"),o._jsvBnd="",i=l.length;i--;)M(l[i],!0);var f=o&&("string"==typeof o?o:"SCRIPT"===o.tagName?o.type.slice(3):1===o.nodeType&&o.getAttribute(ie)||"");if(a=b(f+(o._dfr||""),!0,Be))for(t=0,r=a.length;r>t;t++)s=a[t],"_"===s.ch?(s=xe[s.id])&&s.data!==n&&s.parent.removeViews(s._.key,n,!0):M(s.id,!0)}}function M(e,n){var i,r,o,a,s,l=Me[e];if(l){for(i in l.bnd)a=l.bnd[i],s=".obs"+l.cbId,t.isArray(a)?(t.observable.off([a],ae,s),t.observable.off([a],oe,s)):t.observable.off(a,oe,s),delete l.bnd[i];r=l.linkCtx,(o=r.tag)&&(o.onDispose&&o.onDispose(),n||o._elCnt||(o._prv.parentNode.removeChild(o._prv),o._nxt.parentNode.removeChild(o._nxt)),o.disposed=!0),delete r.view._.bnds[e],delete Me[e],delete G._cbBnds[l.cbId]}}function P(e,r){return arguments.length?r&&(r=r.jquery?r:t(r),e===!0?t.each(r,function(){for(var e;(e=j(this,!0))&&e.parent;)e.parent.removeViews(e._.key,n,!0);x(this.getElementsByTagName("*"))}):e===n&&x(r)):(W&&(t(W).off(se,i),W=n),e=!0,Y.removeViews(),x(V.body.getElementsByTagName("*"))),r}function A(e,t){return P(this,e,t)}function D(e){return e=e||t.view(),function(t,n){var i,r,o=[n];if(e&&t){if(t._jsvOb)return t._jsvOb.call(e.tmpl,n,e,z);if("~"===t.charAt(0))return"~tag"===t.slice(0,4)&&(r=e.ctx,"."===t.charAt(4)&&(i=t.slice(5).split("."),r=r.tag),i)?r?[r,i.join("."),n]:[]:(t=t.slice(1).split("."),(n=e.hlp(t.shift()))&&(t.length&&o.unshift(t.join(".")),o.unshift(n)),n?o:[]);if("#"===t.charAt(0))return"#data"===t?[]:[e,t.replace(De,""),n]}}}function N(e){return"checkbox"===e.type?e.checked:e.value}function E(e,t,n,i,r,o){var a,s,l,c,u,d,f,g=0,p=e===t;if(e){for(l=b(e)||[],a=0,s=l.length;s>a;a++){if(c=l[a],d=c.id,d===i&&c.ch===r){if(!o)break;s=0}if(!p){var h="_"===c.ch?xe[d]:Me[d];h&&(u="_"===c.ch?h:h.linkCtx.tag,c.open?u._prv=t:c.close&&(u._nxt=t))}g+=d.length+2}g&&e.setAttribute(ie,e.getAttribute(ie).slice(g)),f=t?t.getAttribute(ie):n._dfr,(s=f.indexOf("/"+i+r)+1)&&(f=l.tokens.slice(0,g)+f.slice(s+(o?-1:i.length+1))),f&&(t?t.setAttribute(ie,f):n._dfr=f)}else n._dfr=m(n._dfr,"#"+i+r),o||t||(n._dfr=m(n._dfr,"/"+i+r))}var B=t;if(!t)throw"requires jQuery";if(!t.views)throw"requires JsRender";if(!t.observable)throw"requires jquery.observable";if(!t.link){var R,W,j,F,O,H,U,Q,q,X,V=e.document,z=t.views,G=z.sub,K=z.settings,J=G.extend,Y=G.View(n,"top"),Z=function(e){return"function"==typeof e},ee=z.templates,te=t.observable,ne=te.observe,ie="data-jsv",re=K.linkAttr||"data-link",oe=(t.event.special,K.propChng=K.propChng||"propertyChange"),ae=G.arrChng=G.arrChng||"arrayChange",se=(G._cbBnds=G._cbBnds||{},"change.jsv"),le="onBeforeChange",ce="onAfterChange",ue="onAfterCreate",de='"></script>',fe='<script type="jsv',ge="script,["+ie+"]",pe=ge+",["+re+"]",he={value:"val",input:"val",html:"html",text:"text"},ve={from:{fromAttr:"value"},to:{toAttr:"value"}},me=t.cleanData,_e=K.delimiters,ye=G.error,be=G.syntaxError,we=/<(?!script)(\w+)(?:[^>]*(on\w+)\s*=)?[^>]*>/,Ce=V.createDocumentFragment(),Se=V.querySelector,Ie={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1},$e={tr:"table"},ke=K.wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],svg:[1,"<svg>","</svg>"],div:[1,"x<div>","</div>"]},Le={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},Te={},xe={0:Y},Me={},Pe=[],Ae=1,De=/^#(view\.?)?/,Ne=/(^|(\/>)|(<\/\w+>)|>|)(\s*)([#\/]\d+[_^])`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|(<\/\w+>)(\s*)|(\/>)\s*)/g,Ee=/(#)()(\d+)(_)/g,Be=/(#)()(\d+)([_^])/g,Re=/(?:(#)|(\/))(\d+)(_)/g,We=/(#)()(\d+)(\^)/g,je=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g;ke.optgroup=ke.option,ke.tbody=ke.tfoot=ke.colgroup=ke.caption=ke.thead,ke.th=ke.td,G.onBeforeInsert=B.simpleCallbacks(),G.onBeforeLazyLink=B.simpleCallbacks(),G.onAfterLazyLink=B.simpleCallbacks();var Fe,Oe;t.observable.onObservableTrigger.add(T),G.onStoreItem=function(e,n,i){i&&e===ee&&(i.link=f,i.unlink=A,n&&(t.link[n]=function(){return f.apply(i,arguments)},t.unlink[n]=function(){return A.apply(i,arguments)}))},(K.delimiters=function(){var e=_e.apply(z,arguments);return O=e[0],H=e[1],U=e[2],Q=e[3],q=e[4],F=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+q+")?(\\"+H+G.rTag+"\\"+U+")","g"),this})(),G.viewInfos=b,R={addViews:function(e,t,n){var i,r,o=this,a=t.length,s=o.views;if(!o._.useKey&&a&&(n=o.tmpl)&&(r=s.length+a,c(o,e,n,s,t,o.ctx)!==!1))for(i=e+a;r>i;i++)te(s[i]).setProperty("index",i);return o},removeViews:function(e,i,r){function o(e){var i,o,a,l,c,u,d=f[e];if(d&&d.link){i=d._.id,r||(u=d.nodes()),d.removeViews(n,n,!0),d.data=n,l=d._prv,c=d._nxt,a=d.parentElem,r||(d._elCnt&&E(l,c,a,i,"_"),t(u).remove(),d._elCnt||(l.parentNode&&a.removeChild(l),c.parentNode&&a.removeChild(c))),s(d);for(o in d._.bnds)M(o,r);delete xe[i]}}var a,l,c,u=this,d=!u._.useKey,f=u.views;if(d&&(c=f.length),e===n)if(d){for(a=c;a--;)o(a);u.views=[]}else{for(l in f)o(l);u.views={}}else if(i===n&&(d?i=1:(o(e),delete f[e])),d&&i){for(a=e+i;a-- >e;)o(a);if(f.splice(e,i),c=f.length)for(;c>e;)te(f[e]).setProperty("index",e++)}return this},refresh:function(e){var t=this,n=t.parent;return n&&(c(t,t.index,t.tmpl,n.views,t.data,e,!0),s(t)),t},nodes:$,contents:I,childTags:k,link:p},K.merge={input:{from:{fromAttr:N},to:{toAttr:"value"}},textarea:ve,select:ve,optgroup:{from:{fromAttr:"label"},to:{toAttr:"label"}}},K.debugMode&&(X=!K.noValidate,e._jsv={views:xe,bindings:Me}),J(t,{view:z.view=j=function(e,i,r){i!==!!i&&(r=i,i=n);var o,a,s,l,c,u,d,f,g=0,p=V.body;if(e&&e!==p&&Y._.useKey>1&&(e="string"==typeof e?t(e)[0]:e.jquery?e[0]:e))if(i){for(f=Se?e.querySelectorAll(ge):t(ge,e).get(),u=f.length,s=0;u>s;s++)for(d=f[s],a=b(d,n,Ee),l=0,c=a.length;c>l;l++)if(o=a[l],(o=xe[o.id])&&(o=o&&r?o.get(!0,r):o))return o}else for(;e;){if(a=b(e,n,Re))for(u=a.length;u--;)if(o=a[u],o.open){if(1>g)return o=xe[o.id],o&&r?o.get(r):o||Y;g--}else g++;e=e.previousSibling||e.parentNode}return i?n:Y},link:z.link=g,unlink:z.unlink=P,cleanData:function(e){e.length&&(x(e),me.call(t,e))}}),J(t.fn,{link:function(e,t,n,i,r,o,a){return g(e,this,t,n,i,r,o,a)},unlink:function(e){return P(e,this)},view:function(e){return j(this[0],e)}}),J(Y,{tmpl:{links:{},tags:{}}}),J(Y,R),Y._.onRender=u}}(this,window.originaljQuery||window.jQuery)}),define("Legacy1",function(){});